


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.15. Permission Check &mdash; ∇Nablarch  5u20 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/application_framework/application_framework/libraries/permission_check.html" />
  
    <link rel="top" title="∇Nablarch  5u20 documentation" href="../../../index.html"/>
        <link rel="up" title="7. Libraries Provided by Nablarch" href="index.html"/>
        <link rel="next" title="7.16. Service Availability Check" href="service_availability.html"/>
        <link rel="prev" title="7.14. Date Management" href="date.html"/>
 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u20</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_nablarch/index.html">What is the Nablarch?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/concept.html">Nablarch Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/mvn_module.html">Module List of Nablarch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/license.html">Information on Nablarch License</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Nablarch Application Framework</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Application Framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../nablarch/index.html">1. What is Nablarch Application Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/index.html">2. Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web_service/index.html">3. Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../batch/index.html">4. Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../messaging/index.html">5. Messaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../handlers/index.html">6. Standard Handler Provided by Nablarch</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">7. Libraries Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blank_project/index.html">8. Blank Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setting_guide/index.html">9. Nablarch Application Framework Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/index.html">10. Default Configuration List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloud_native/index.html">11. Nablarch Cloud Native Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adaptors/index.html">Adaptor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/log_adaptor.html">log Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/router_adaptor.html">Routing Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/webspheremq_adaptor.html">IBM WebSphere MQ Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/jaxrs_adaptor.html">JAX-RS Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/doma_adaptor.html">Doma Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/jsr310_adaptor.html">JSR310(Date and Time API)Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarker Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/mail_sender_velocity_adaptor.html">E-mail Velocity Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/web_thymeleaf_adaptor.html">Web Application Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/lettuce_adaptor.html">Lettuce Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/slf4j_adaptor.html">SLF4J Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/micrometer_adaptor.html">Micrometer Adapter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../example/index.html#procedure-to-build-the-environment">Procedure to build the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../example/index.html#application-execution-procedure">Application execution procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../extension_components/index.html">Nablarch extension component</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/report/index.html">1. Form library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html">2. Workflow library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/workflow/tool/index.html">3. Workflow definition data generation tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/etl/index.html">4. ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/etl/etl_maven_plugin.html">5. ETL Maven plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_tools/index.html">Nablarch development tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html">1. Efficient Java Static Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html#conduct-syntax-check">1.1. Conduct syntax check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html#unify-the-format">1.2. Unify the format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html#check-if-unauthorized-apis-are-being-used">1.3. Check if unauthorized APIs are being used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/ui_dev/index.html">2. Front-end UI development platform for advanced users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/testing_framework/index.html">3. Testing framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/index.html">3.1. How to Execute Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/testing_framework/guide/development_guide/06_TestFWGuide/index.html">3.2. How to Use the Automated Test Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/testing_framework/guide/development_guide/08_TestTools/index.html">3.3. Tools Used in the Programming Phase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/toolbox/index.html">4. Useful Tools When Developing Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/toolbox/JspStaticAnalysis/index.html">4.1. JSP Static Analysis Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/toolbox/JspVerifier/JspVerifier.html">4.3. Job Screen JSP Validation Tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Nablarch Implementation Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/01/index.html">Sample Password Encryption Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/0101_PBKDF2PasswordEncryptor.html">Sample Password Encryption Function Using PBKDF2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/02/index.html">Extended Validation Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#email-address-validation">Email address validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#validation-of-japan-telephone-numbers">Validation of Japan telephone numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#code-value-validation">Code value validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/03/index.html">Display a List of Search Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-use">How to Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchinfo-class">ListSearchInfo class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-tag">listSearchResult tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#sort-search-results">Sort search results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-implement-displaying-a-list-of-all-search-results-on-a-single-screen">How to implement displaying a list of all search results on a single screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-implement-the-initial-display-of-search-results-with-the-default-search-conditions">How to implement the initial display of search results with the default search conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#default-settings-for-the-search-result-list-display-function">Default settings for the search result list display function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-import-a-sample-implementation-tag-file-into-the-business-application">How to import a sample implementation (tag file) into the business application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#tag-reference">Tag Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/04/index.html">Extended Formatter Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/04/0401_ExtendedDataFormatter.html">Data Formatter Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/04/0402_ExtendedFieldType.html">Field Type Expansion in the Data Formatter Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/05/index.html">Sample File Management Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/06/index.html">CAPTCHA Function Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/06_Captcha_guide.html">How to Incorporate the CAPTCHA Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/07/index.html">Sample UserAgent Information Acquisition Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#description-of-configuration">Description of configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#use-case">Use case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/08/index.html">Sample of HTML Email Send Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#implementation-examples">Implementation examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/09/index.html">How to Use a Sample to Send a Digitally Signed Email Using Bouncycastle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#environment-preparation">Environment preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#structure-of-digitally-signed-email-send-function">Structure of digitally signed email send function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#preparation-of-configuration-file">Preparation of configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/10/index.html">How to Use the Log Aggregation Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/10/index.html#list-of-samples-provided">List of samples provided</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/11/index.html">Messaging Platform Test Simulator Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#uses">Uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#how-to-use">How to use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#expansion-example">Expansion example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Nablarch Application Framework</a> &raquo;</li>
      
          <li><a href="../index.html">Application Framework</a> &raquo;</li>
      
          <li><a href="index.html">7. Libraries Provided by Nablarch</a> &raquo;</li>
      
    <li>7.15. Permission Check</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/index.html" class="ja">日本語</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="permission-check">
<span id="id1"></span><h1>7.15. Permission Check<a class="headerlink" href="#permission-check" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#function-overview" id="id2">Function overview</a><ul>
<li><a class="reference internal" href="#permission-check-can-be-performed-on-a-request-basis" id="id3">Permission check can be performed on a request basis</a></li>
<li><a class="reference internal" href="#permissions-can-be-configured-in-combination-with-group-and-user-units" id="id4">Permissions can be configured in combination with group and user units</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-list" id="id5">Module list</a></li>
<li><a class="reference internal" href="#how-to-use" id="id6">How to use</a><ul>
<li><a class="reference internal" href="#configure-settings-to-use-permission-check" id="id7">Configure settings to use permission check</a></li>
<li><a class="reference internal" href="#perform-permission-check-on-the-server" id="id8">Perform permission check on the server</a></li>
<li><a class="reference internal" href="#control-screen-display-according-to-the-permission" id="id9">Control screen display according to the permission</a></li>
<li><a class="reference internal" href="#access-permission-data" id="id10">Access permission data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expansion-example" id="id11">Expansion example</a></li>
</ul>
</div>
<p>This function checks the permission for the functions provided by the application.
This function enables access control such as limiting the functions that can be used by each user on the web.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>This function should be used only when the application requirements are met.</p>
<p>This function manages the permission data used for permission check using the database and sets the permission for each request
(see the conceptual model shown in <a class="reference internal" href="#permission-check-authority-model"><span>Permissions can be configured in combination with group and user units</span></a>).
For example, a web registration function is generally composed of multiple requests such as initial display/confirmation/return/registration.</p>
<p class="last">Therefore, while permission can be configured in detail for this function, data design is also required in detail,
which may reduce productivity during development and increase operational load after release.</p>
</div>
<div class="section" id="function-overview">
<h2><a class="toc-backref" href="#id2">7.15.1. Function overview</a><a class="headerlink" href="#function-overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="permission-check-can-be-performed-on-a-request-basis">
<h3><a class="toc-backref" href="#id3">7.15.1.1. Permission check can be performed on a request basis</a><a class="headerlink" href="#permission-check-can-be-performed-on-a-request-basis" title="Permalink to this headline">¶</a></h3>
<p>Permission check is possible for by configuring
<a class="reference internal" href="../handlers/common/permission_check_handler.html#permission-check-handler"><span>Permission Check Handler</span></a> in the handler queue.</p>
<p>See below for details.</p>
<ul class="simple">
<li><a class="reference internal" href="#permission-check-settings"><span>Configure settings to use permission check</span></a></li>
<li><a class="reference internal" href="#permission-check-server-side-check"><span>Perform permission check on the server</span></a></li>
<li><a class="reference internal" href="#permission-check-view-control"><span>Control screen display according to the permission</span></a></li>
</ul>
</div>
<div class="section" id="permissions-can-be-configured-in-combination-with-group-and-user-units">
<span id="permission-check-authority-model"></span><h3><a class="toc-backref" href="#id4">7.15.1.2. Permissions can be configured in combination with group and user units</a><a class="headerlink" href="#permissions-can-be-configured-in-combination-with-group-and-user-units" title="Permalink to this headline">¶</a></h3>
<p>The conceptual model of permission configuration used for permission check is as follows.</p>
<img alt="../../../_images/conceptual_model.png" src="../../../_images/conceptual_model.png" />
<p>Groups are used for assigning permission to organization units such as departments.</p>
<p>The permission check unit represents the minimum unit of permission check by collecting multiple requests.
Requests required to realize the permission check, that is, multiple events on the screen for web, are associated with the permission check unit.
For example, the data is as follows for a user registration function.</p>
<dl class="docutils">
<dt>Permission check unit</dt>
<dd><div class="first last line-block">
<div class="line">User registration</div>
</div>
</dd>
<dt>Request associated with permission check unit &#8220;user registration&#8221;</dt>
<dd><div class="first last line-block">
<div class="line">Initial display of input screen</div>
<div class="line">Confirmation button of input screen</div>
<div class="line">Registration button of confirmation screen</div>
<div class="line">Return button of confirmation screen</div>
</div>
</dd>
</dl>
<p>By configuring the relationship between the group and user, and the group and permission check unit, permission can be set for each group.
Furthermore, since the permission check unit can be set directly to the user, irregular permission to a specific user can be configured.</p>
</div>
</div>
<div class="section" id="module-list">
<h2><a class="toc-backref" href="#id5">7.15.2. Module list</a><a class="headerlink" href="#module-list" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-common-auth<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-common-auth-jdbc<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id6">7.15.3. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configure-settings-to-use-permission-check">
<span id="permission-check-settings"></span><h3><a class="toc-backref" href="#id7">7.15.3.1. Configure settings to use permission check</a><a class="headerlink" href="#configure-settings-to-use-permission-check" title="Permalink to this headline">¶</a></h3>
<p>This function uses a database to manage the permission data used for permission check.
The table layout is as follows.</p>
<dl class="docutils">
<dt>Groups</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Group ID (PK)</td>
<td>Values for identifying the group. String type</td>
</tr>
</tbody>
</table>
</dd>
<dt>System account</dt>
<dd><table border="1" class="first docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>User ID (PK)</td>
<td>Values for identifying the user. String type</td>
</tr>
<tr class="row-even"><td>User ID lock status</td>
<td>Lock status of user ID. String type.</td>
</tr>
<tr class="row-odd"><td>Effective date (From)</td>
<td>Effective date (From) of the user. String type.</td>
</tr>
<tr class="row-even"><td>Effective date (To)</td>
<td>Effective date (To) of the user. String type.</td>
</tr>
</tbody>
</table>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">User ID lock status:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">&#8220;0&#8221; if user is not locked, other than &#8220;0&#8221; if user is locked</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Effective date (From):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">In yyyyMMdd format, &#8220;19000101&#8221; if not specified</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Effective date (To):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">In yyyyMMdd format, &#8220;99991231&#8221; if not specified</td>
</tr>
</tbody>
</table>
</dd>
<dt>Group system account</dt>
<dd><table border="1" class="first docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Group ID(PK)</td>
<td>Values for identifying the group. String type</td>
</tr>
<tr class="row-even"><td>User ID(PK)</td>
<td>Values for identifying the user. String type</td>
</tr>
<tr class="row-odd"><td>Effective date (From)(PK)</td>
<td>Effective date (From) of the user. String type</td>
</tr>
<tr class="row-even"><td>Effective date (To)</td>
<td>Effective date (To) of the user. String type</td>
</tr>
</tbody>
</table>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Effective date (From):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">In yyyyMMdd format, &#8220;19000101&#8221; if not specified</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Effective date (To):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">In yyyyMMdd format, &#8220;99991231&#8221; if not specified</td>
</tr>
</tbody>
</table>
</dd>
<dt>Permission check unit</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Permission check unit ID (PK)</td>
<td>A value for identifying the permission check unit. String type</td>
</tr>
</tbody>
</table>
</dd>
<dt>Permission check unit request</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Permission check unit ID (PK)</td>
<td>A value for identifying the permission check unit. String type</td>
</tr>
<tr class="row-even"><td>Request ID (PK)</td>
<td>Values for identifying the request. String type</td>
</tr>
</tbody>
</table>
</dd>
<dt>Group permission</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Group ID (PK)</td>
<td>Values for identifying the group. String type</td>
</tr>
<tr class="row-even"><td>Permission check unit ID (PK)</td>
<td>A value for identifying the permission check unit. String type</td>
</tr>
</tbody>
</table>
</dd>
<dt>System account permission</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>User ID (PK)</td>
<td>Values for identifying the user. String type</td>
</tr>
<tr class="row-even"><td>Permission check unit ID (PK)</td>
<td>A value for identifying the permission check unit. String type</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Configure the following settings to use permission check</p>
<ul class="simple">
<li>Add the configuration of <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/permission/BasicPermissionFactory.html" title="nablarch.common.permission.BasicPermissionFactory">BasicPermissionFactory</a>
to the component definition.</li>
<li>Since <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/permission/BasicPermissionFactory.html" title="nablarch.common.permission.BasicPermissionFactory">BasicPermissionFactory</a>
is used by configuring to <a class="reference internal" href="../handlers/common/permission_check_handler.html#permission-check-handler"><span>Permission Check Handler</span></a>, specify any name as the component name.</li>
</ul>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;permissionFactory&quot;</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.BasicPermissionFactory&quot;</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- Group schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;groupTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.GroupTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- System account schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;systemAccountTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.SystemAccountTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- Group system account schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;groupSystemAccountTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.GroupSystemAccountTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- Permission check unit schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;permissionUnitTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.PermissionUnitTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- Permission check unit request schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;permissionUnitRequestTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.PermissionUnitRequestTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- Group permission schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;groupAuthorityTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.GroupAuthorityTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- System account permission schema --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;systemAccountAuthorityTableSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.permission.schema.SystemAccountAuthorityTableSchema&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Configuration of property is omitted --&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
  <span class="nt">&lt;/property&gt;</span>

  <span class="c">&lt;!-- Transaction manager used for database access --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dbManager&quot;</span> <span class="na">ref=</span><span class="s">&quot;permissionCheckDbManager&quot;</span><span class="nt">/&gt;</span>

  <span class="c">&lt;!-- Provider giving the business date used to determine the effective date (FROM/TO) --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;businessDateProvider&quot;</span> <span class="na">ref=</span><span class="s">&quot;businessDateProvider&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
<p>Add the following component definition as
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/permission/BasicPermissionFactory.html" title="nablarch.common.permission.BasicPermissionFactory">BasicPermissionFactory</a> requires initialization.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;initializer&quot;</span>
           <span class="na">class=</span><span class="s">&quot;nablarch.core.repository.initialization.BasicApplicationInitializer&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;initializeList&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;list&gt;</span>
      <span class="c">&lt;!-- Initialize BasicPermissionFactory --&gt;</span>
      <span class="nt">&lt;component-ref</span> <span class="na">name=</span><span class="s">&quot;permissionFactory&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/list&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="perform-permission-check-on-the-server">
<span id="permission-check-server-side-check"></span><h3><a class="toc-backref" href="#id8">7.15.3.2. Perform permission check on the server</a><a class="headerlink" href="#perform-permission-check-on-the-server" title="Permalink to this headline">¶</a></h3>
<p>Use <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/permission/Permission.html" title="nablarch.common.permission.Permission">Permission</a> for the permission check.
Since <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/permission/Permission.html" title="nablarch.common.permission.Permission">Permission</a>
is configured to the thread context by <a class="reference internal" href="../handlers/common/permission_check_handler.html#permission-check-handler"><span>Permission Check Handler</span></a>,
acquire by using <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/permission/PermissionUtil.html#getPermission--" title="nablarch.common.permission.PermissionUtil.getPermission()">PermissionUtil.getPermission</a>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Permission</span> <span class="n">permission</span> <span class="o">=</span> <span class="n">PermissionUtil</span><span class="o">.</span><span class="na">getPermission</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">permission</span><span class="o">.</span><span class="na">permit</span><span class="o">(</span><span class="s">&quot;/action/user/unlock&quot;</span><span class="o">))</span> <span class="o">{</span>
    <span class="c1">// The process comes here when the permission check is OK</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="control-screen-display-according-to-the-permission">
<span id="permission-check-view-control"></span><h3><a class="toc-backref" href="#id9">7.15.3.3. Control screen display according to the permission</a><a class="headerlink" href="#control-screen-display-according-to-the-permission" title="Permalink to this headline">¶</a></h3>
<p>Use a custom tag to control the non-display (inactivity) of buttons and links according to permission availability.
See <a class="reference internal" href="tag.html#tag-submit-display-control"><span>Switching between display/no display of the button/link depending on permission check/service availability</span></a>.</p>
</div>
<div class="section" id="access-permission-data">
<h3><a class="toc-backref" href="#id10">7.15.3.4. Access permission data</a><a class="headerlink" href="#access-permission-data" title="Permalink to this headline">¶</a></h3>
<p>Depending on the application requirements, access to permission data may be required,
such as acquiring the list of users belonging to a specific group.
However, this function checks only for the permission.</p>
<p>Therefore, to access the permission data, use <a class="reference internal" href="database/universal_dao.html#universal-dao"><span>Universal DAO</span></a>
to provide support by creating SQL.</p>
</div>
</div>
<div class="section" id="expansion-example">
<h2><a class="toc-backref" href="#id11">7.15.4. Expansion example</a><a class="headerlink" href="#expansion-example" title="Permalink to this headline">¶</a></h2>
<p>None.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'5u20',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>