


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.19. JSP Custom Tags &mdash; ∇Nablarch  5u20 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/application_framework/application_framework/libraries/tag.html" />
  
    <link rel="top" title="∇Nablarch  5u20 documentation" href="../../../index.html"/>
        <link rel="up" title="7. Libraries Provided by Nablarch" href="index.html"/>
        <link rel="next" title="7.19.1. Tag Reference" href="tag/tag_reference.html"/>
        <link rel="prev" title="7.18. Making Web Applications Stateless" href="stateless_web_app.html"/>
 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u20</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_nablarch/index.html">What is the Nablarch?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/concept.html">Nablarch Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/mvn_module.html">Module List of Nablarch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/license.html">Information on Nablarch License</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Nablarch Application Framework</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Application Framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../nablarch/index.html">1. What is Nablarch Application Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web/index.html">2. Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../web_service/index.html">3. Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../batch/index.html">4. Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../messaging/index.html">5. Messaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../handlers/index.html">6. Standard Handler Provided by Nablarch</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">7. Libraries Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blank_project/index.html">8. Blank Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setting_guide/index.html">9. Nablarch Application Framework Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/index.html">10. Default Configuration List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloud_native/index.html">11. Nablarch Cloud Native Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../adaptors/index.html">Adaptor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/log_adaptor.html">log Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/router_adaptor.html">Routing Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/webspheremq_adaptor.html">IBM WebSphere MQ Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/jaxrs_adaptor.html">JAX-RS Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/doma_adaptor.html">Doma Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/jsr310_adaptor.html">JSR310(Date and Time API)Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarker Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/mail_sender_velocity_adaptor.html">E-mail Velocity Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/web_thymeleaf_adaptor.html">Web Application Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/lettuce_adaptor.html">Lettuce Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/slf4j_adaptor.html">SLF4J Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../adaptors/micrometer_adaptor.html">Micrometer Adapter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../example/index.html#procedure-to-build-the-environment">Procedure to build the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../example/index.html#application-execution-procedure">Application execution procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../extension_components/index.html">Nablarch extension component</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/report/index.html">1. Form library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html">2. Workflow library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/workflow/tool/index.html">3. Workflow definition data generation tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/etl/index.html">4. ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/etl/etl_maven_plugin.html">5. ETL Maven plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_tools/index.html">Nablarch development tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html">1. Efficient Java Static Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html#conduct-syntax-check">1.1. Conduct syntax check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html#unify-the-format">1.2. Unify the format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/java_static_analysis/index.html#check-if-unauthorized-apis-are-being-used">1.3. Check if unauthorized APIs are being used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/ui_dev/index.html">2. Front-end UI development platform for advanced users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/testing_framework/index.html">3. Testing framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/index.html">3.1. How to Execute Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/testing_framework/guide/development_guide/06_TestFWGuide/index.html">3.2. How to Use the Automated Test Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/testing_framework/guide/development_guide/08_TestTools/index.html">3.3. Tools Used in the Programming Phase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development_tools/toolbox/index.html">4. Useful Tools When Developing Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/toolbox/JspStaticAnalysis/index.html">4.1. JSP Static Analysis Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development_tools/toolbox/JspVerifier/JspVerifier.html">4.3. Job Screen JSP Validation Tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Nablarch Implementation Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/01/index.html">Sample Password Encryption Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/0101_PBKDF2PasswordEncryptor.html">Sample Password Encryption Function Using PBKDF2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/02/index.html">Extended Validation Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#email-address-validation">Email address validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#validation-of-japan-telephone-numbers">Validation of Japan telephone numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#code-value-validation">Code value validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/03/index.html">Display a List of Search Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-use">How to Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchinfo-class">ListSearchInfo class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-tag">listSearchResult tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#sort-search-results">Sort search results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-implement-displaying-a-list-of-all-search-results-on-a-single-screen">How to implement displaying a list of all search results on a single screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-implement-the-initial-display-of-search-results-with-the-default-search-conditions">How to implement the initial display of search results with the default search conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#default-settings-for-the-search-result-list-display-function">Default settings for the search result list display function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#how-to-import-a-sample-implementation-tag-file-into-the-business-application">How to import a sample implementation (tag file) into the business application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#tag-reference">Tag Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/04/index.html">Extended Formatter Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/04/0401_ExtendedDataFormatter.html">Data Formatter Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/04/0402_ExtendedFieldType.html">Field Type Expansion in the Data Formatter Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/05/index.html">Sample File Management Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/06/index.html">CAPTCHA Function Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/06_Captcha_guide.html">How to Incorporate the CAPTCHA Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/07/index.html">Sample UserAgent Information Acquisition Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#description-of-configuration">Description of configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#use-case">Use case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/08/index.html">Sample of HTML Email Send Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#implementation-examples">Implementation examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/09/index.html">How to Use a Sample to Send a Digitally Signed Email Using Bouncycastle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#environment-preparation">Environment preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#structure-of-digitally-signed-email-send-function">Structure of digitally signed email send function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#preparation-of-configuration-file">Preparation of configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/10/index.html">How to Use the Log Aggregation Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/10/index.html#list-of-samples-provided">List of samples provided</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/11/index.html">Messaging Platform Test Simulator Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#uses">Uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#how-to-use">How to use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#expansion-example">Expansion example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Nablarch Application Framework</a> &raquo;</li>
      
          <li><a href="../index.html">Application Framework</a> &raquo;</li>
      
          <li><a href="index.html">7. Libraries Provided by Nablarch</a> &raquo;</li>
      
    <li>7.19. JSP Custom Tags</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/index.html" class="ja">日本語</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="jsp-custom-tags">
<span id="tag"></span><h1>7.19. JSP Custom Tags<a class="headerlink" href="#jsp-custom-tags" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#function-overview" id="id1">Function overview</a><ul>
<li><a class="reference internal" href="#prevent-omission-of-html-escape" id="id2">Prevent omission of HTML escape</a></li>
<li><a class="reference internal" href="#reduce-implementation-by-having-common-jsp-for-input-screen-and-confirmation-screen" id="id3">Reduce implementation by having common JSP for input screen and confirmation screen</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-list" id="id4">Module list</a></li>
<li><a class="reference internal" href="#how-to-use" id="id5">How to use</a><ul>
<li><a class="reference internal" href="#configure-custom-tags" id="id6">Configure custom tags</a></li>
<li><a class="reference internal" href="#using-custom-tags-method-of-specifying-taglib-directive" id="id7">Using custom tags (method of specifying taglib directive)</a></li>
<li><a class="reference internal" href="#create-an-input-form" id="id8">Create an input form</a></li>
<li><a class="reference internal" href="#displaying-selection-items-pull-down-radio-button-check-box" id="id9">Displaying selection items (pull-down/radio button/check box)</a></li>
<li><a class="reference internal" href="#specify-the-value-for-unchecked-checkboxes" id="id10">Specify the value for unchecked checkboxes</a></li>
<li><a class="reference internal" href="#retaining-the-input-data-across-screens-window-scope" id="id11">Retaining the input data across screens (window scope)</a></li>
<li><a class="reference internal" href="#encryption-of-data-held-in-the-client-hidden-encryption" id="id12">Encryption of data held in the client (hidden encryption)</a></li>
<li><a class="reference internal" href="#creating-radio-buttons-and-checkboxes-associated-with-a-composite-key" id="id13">Creating radio buttons and checkboxes associated with a composite key</a></li>
<li><a class="reference internal" href="#submitting-a-form-from-multiple-buttons-links" id="id14">Submitting a form from multiple buttons/links</a></li>
<li><a class="reference internal" href="#adding-a-process-before-submission" id="id15">Adding a process before submission</a></li>
<li><a class="reference internal" href="#trigger-submit-on-screen-operations-such-as-changing-the-selection-in-a-pull-down" id="id16">Trigger submit on screen operations such as changing the selection in a pull-down</a></li>
<li><a class="reference internal" href="#adding-parameters-for-each-button-link" id="id17">Adding parameters for each button/link</a></li>
<li><a class="reference internal" href="#switching-between-display-no-display-of-the-button-link-depending-on-permission-check-service-availability" id="id18">Switching between display/no display of the button/link depending on permission check/service availability</a></li>
<li><a class="reference internal" href="#creating-a-button-link-to-open-a-separate-window-tab-pop-up" id="id19">Creating a button/link to open a separate window/tab (pop-up)</a></li>
<li><a class="reference internal" href="#creating-a-button-link-to-download-a-file" id="id20">Creating a button/link to download a file</a></li>
<li><a class="reference internal" href="#preventing-double-submission" id="id21">Preventing double submission</a><ul>
<li><a class="reference internal" href="#storing-server-side-tokens-in-the-database" id="id22">Storing server-side tokens in the database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#common-jsp-for-input-screen-and-confirmation-screen" id="id23">Common JSP for input screen and confirmation screen</a></li>
<li><a class="reference internal" href="#configuring-a-value-to-a-variable" id="id24">Configuring a value to a variable</a></li>
<li><a class="reference internal" href="#using-get-request" id="id25">Using GET request</a></li>
<li><a class="reference internal" href="#output-of-a-value" id="id26">Output of a value</a></li>
<li><a class="reference internal" href="#output-of-a-value-without-html-escape" id="id27">Output of a value without HTML escape</a></li>
<li><a class="reference internal" href="#output-of-values-after-formatting" id="id28">Output of values after formatting</a></li>
<li><a class="reference internal" href="#performing-error-display" id="id29">Performing error display</a></li>
<li><a class="reference internal" href="#display-code-values" id="id30">Display code values</a></li>
<li><a class="reference internal" href="#output-of-messages" id="id31">Output of messages</a></li>
<li><a class="reference internal" href="#switch-resource-path-for-each-language" id="id32">Switch resource path for each language</a></li>
<li><a class="reference internal" href="#prevent-browser-caching" id="id33">Prevent browser caching</a></li>
<li><a class="reference internal" href="#not-allowing-the-cache-in-the-client-to-be-referenced-when-static-content-is-changed" id="id34">Not allowing the cache in the client to be referenced when static content is changed</a></li>
<li><a class="reference internal" href="#specify-any-attribute" id="id35">Specify any attribute</a><ul>
<li><a class="reference internal" href="#handling-of-boolean-attributes" id="id36">Handling of Boolean attributes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#expansion-example" id="id37">Expansion example</a><ul>
<li><a class="reference internal" href="#adding-formatter" id="id38">Adding formatter</a></li>
<li><a class="reference internal" href="#change-the-judgment-process-used-for-button-link-display-control" id="id39">Change the judgment process used for button/link display control</a></li>
<li><a class="reference internal" href="#add-a-behavior-when-double-submission-occurs-with-a-double-submission-prevention-in-the-client" id="id40">Add a behavior when double submission occurs, with a double submission prevention in the client</a></li>
<li><a class="reference internal" href="#change-the-token-issuing-process-using-double-submission-prevention-in-the-server" id="id41">Change the token issuing process using double submission prevention in the server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-tag-rules" id="id42">Custom tag rules</a><ul>
<li><a class="reference internal" href="#naming-rules" id="id43">Naming rules</a></li>
<li><a class="reference internal" href="#rules-to-access-input-output-data" id="id44">Rules to access input/output data</a></li>
<li><a class="reference internal" href="#uri-specification-method" id="id45">URI specification method</a></li>
<li><a class="reference internal" href="#html-escape-line-feed-and-half-width-space-conversion" id="id46">HTML escape, line feed and half width space conversion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tag-reference" id="id47"><a class="reference internal" href="tag/tag_reference.html#tag-reference"><span>Tag Reference</span></a></a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
</div>
<p>This function provides custom tags supporting creation of screens for web applications.</p>
<p>Custom tags have the following limitations:</p>
<ul class="simple">
<li>They function in web containers supporting JSP 2.1 and above.</li>
<li>They use JSTL for controlling conditional branches and loops etc.</li>
<li>They support attributes compatible with XHTML 1.0 Transitional.</li>
<li>It is required to have JavaScript in the client. (See <a class="reference internal" href="#tag-onclick-override"><span>Adding a process before submission</span></a>)</li>
<li>Some custom tags cannot be used with GET request. (See <a class="reference internal" href="#tag-using-get"><span>Using GET request</span></a>)</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Attributes added in HTML5 can be described using <a class="reference internal" href="#dynamic-attribute"><span>dynamic attribute</span></a> .
However, the following attributes that are likely to be used frequently are defined as custom tag attributes in advance.
In addition, each input element added in HTML5 has the following tags added based on <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a> .
Since the attributes specific to each input element are not defined individually in the custom tag, they need to be specified by dynamic attributes.</p>
<ul class="simple">
<li>added attributes (Write the HTML tag name with the attribute added in the parentheses.)</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>autocomplete(input、password、form)</li>
<li>autofocus(input、textarea、select、button)</li>
<li>placeholder(text、password、textarea)</li>
<li>maxlength(textarea)</li>
<li>multiple(input)</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>added input elements</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-search-tag"><span>search tag</span></a> (search)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-tel-tag"><span>tel tag</span></a> (tel)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-url-tag"><span>url tag</span></a> (URL)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-email-tag"><span>email tag</span></a> (email)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-date-tag"><span>date tag</span></a> (date)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-month-tag"><span>month tag</span></a> (month)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-week-tag"><span>week tag</span></a> (week)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-time-tag"><span>time tag</span></a> (time)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-datetimelocal-tag"><span>datetimeLocal tag</span></a> (datetimeLocal)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-number-tag"><span>number tag</span></a> (number)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-range-tag"><span>range tag</span></a> (range)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-color-tag"><span>color tag</span></a> (color)</li>
</ul>
</div></blockquote>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Custom tags are meant for web applications in which simple screen transition as shown below is performed.
For this reason, custom tags are not compatible with creation of screens with rich content focusing on operability and SPAs (Single Page Application).</p>
<ul class="simple">
<li>Search screen → Search/Detail Display based on detail screen</li>
<li>Register/Update/Delete using Input Screen → Confirmation Screen → Completion Screen</li>
<li>Input assistance by pop-up (separate windows and separate tabs)</li>
</ul>
<p class="last">When JavaScript is frequently used in a project,
be careful so that JavaScript output by the custom tags and JavaScript created in the project do not produce any side effects.
Refer to <a class="reference internal" href="#tag-onclick-override"><span>Adding a process before submission</span></a> for JavaScript output by the custom tags.</p>
</div>
<div class="section" id="function-overview">
<h2><a class="toc-backref" href="#id1">7.19.2. Function overview</a><a class="headerlink" href="#function-overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prevent-omission-of-html-escape">
<h3><a class="toc-backref" href="#id2">7.19.2.1. Prevent omission of HTML escape</a><a class="headerlink" href="#prevent-omission-of-html-escape" title="Permalink to this headline">¶</a></h3>
<p>In HTML, characters such as &#8220;&lt;&#8221;, &#8220;&gt;&#8221; and &#8220;&#8221;&#8221; have a special meaning. Hence,
if values containing these characters are output as it is in JSP,
then a malicious user can easily inject a script, which leads to a vulnerability called Cross-Site Scripting (XSS).
Therefore, perform HTML escape when input values are output.</p>
<p>However, if values are output using EL expression in JSP, HTML escape is not performed.
For this reason, when values are output, it is always necessary that HTML escape is taken into consideration during implementation, which leads to reduced productivity.</p>
<p>Since HTML escape is performed by default in custom tags,
as long as custom tags are used for implementation, HTML escape cannot be skipped.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since escape processing is not provided for JavaScript,
dynamic values (input data, etc.) must not be embedded in the part where JavaScript is written, such as the script tag body and onclick attribute, etc.
When embedding dynamic values (such as input data, etc.) in the part where JavaScript is written, the escape process should be performed at a project level.</p>
</div>
<p>See below for details of HTML escape.</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-html-escape"><span>HTML escape, line feed and half width space conversion</span></a></li>
<li><a class="reference internal" href="#tag-html-unescape"><span>Output of a value without HTML escape</span></a></li>
</ul>
</div>
<div class="section" id="reduce-implementation-by-having-common-jsp-for-input-screen-and-confirmation-screen">
<h3><a class="toc-backref" href="#id3">7.19.2.2. Reduce implementation by having common JSP for input screen and confirmation screen</a><a class="headerlink" href="#reduce-implementation-by-having-common-jsp-for-input-screen-and-confirmation-screen" title="Permalink to this headline">¶</a></h3>
<p>In many systems, the layout is the same for input screen and confirmation screen,
and similar JSPs are created.</p>
<p>Since custom tags provide a function by which it is possible to have common JSP for input screen and confirmation screen,
confirmation screen can be created by adding only the features (e.g. buttons etc.) that are specific to the confirmation screen on the JSP
created for the input screen, and improvement in productivity can be expected.</p>
<p>See below for how to create a common JSP for input screen and confirmation screen.</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-make-common"><span>Common JSP for input screen and confirmation screen</span></a></li>
</ul>
</div>
</div>
<div class="section" id="module-list">
<h2><a class="toc-backref" href="#id4">7.19.3. Module list</a><a class="headerlink" href="#module-list" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-fw-web-tag<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!-- Only when using hidden encryption --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-common-encryption<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!-- Only when using file download --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-fw-web-extension<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-use">
<h2><a class="toc-backref" href="#id5">7.19.4. How to use</a><a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Since all attributes have not been described in the description of custom tags,
refer to <a class="reference internal" href="tag/tag_reference.html#tag-reference"><span>Tag Reference</span></a> for attributes that can be specified for each custom tag.</p>
</div>
<div class="section" id="configure-custom-tags">
<span id="tag-setting"></span><h3><a class="toc-backref" href="#id6">7.19.4.1. Configure custom tags</a><a class="headerlink" href="#configure-custom-tags" title="Permalink to this headline">¶</a></h3>
<p>Custom tags are configured
using <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a>
and <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html" title="nablarch.common.web.tag.CustomTagConfig">CustomTagConfig</a>.</p>
<dl class="docutils">
<dt><a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a></dt>
<dd><p class="first">Handler for pre-process that is required for the following functions when processing of requests that use custom tags.
Configuring this handler is required when using custom tags.</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-checkbox-off-value"><span>Specify the value for unchecked checkboxes</span></a></li>
<li><a class="reference internal" href="#tag-hidden-encryption"><span>Encryption of data held in the client (hidden encryption)</span></a></li>
<li><a class="reference internal" href="#tag-submit-change-parameter"><span>Adding parameters for each button/link</span></a></li>
<li><a class="reference internal" href="#tag-composite-key"><span>Creating radio buttons and checkboxes associated with a composite key</span></a></li>
</ul>
<p class="last">Refer to <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a> for values to be configured in this handler.</p>
</dd>
<dt><a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html" title="nablarch.common.web.tag.CustomTagConfig">CustomTagConfig</a></dt>
<dd><p class="first">Class in which default values of custom tags are configured.
Sometimes, for custom tag attributes such as label pattern etc. of a selection item,
default values that are standardized throughout the application rather than configuring the values each time on individual screens may be required.
Therefore, the default values of custom tags are configured in this class.</p>
<p class="last">For configuration of default values, add this class to component definition with the name <code class="docutils literal"><span class="pre">customTagConfig</span></code>.
For configuration items, refer to <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html" title="nablarch.common.web.tag.CustomTagConfig">CustomTagConfig</a>.</p>
</dd>
</dl>
</div>
<div class="section" id="using-custom-tags-method-of-specifying-taglib-directive">
<span id="tag-specify-taglib"></span><h3><a class="toc-backref" href="#id7">7.19.4.2. Using custom tags (method of specifying taglib directive)</a><a class="headerlink" href="#using-custom-tags-method-of-specifying-taglib-directive" title="Permalink to this headline">¶</a></h3>
<p>Since it is assumed that custom tags and JSTL will be used, specify the taglib directive for each.</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;c&quot;</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> <span class="k">%&gt;</span>
<span class="k">&lt;%@</span> <span class="n">taglib</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;n&quot;</span> <span class="n">uri</span><span class="o">=</span><span class="s">&quot;http://tis.co.jp/nablarch&quot;</span> <span class="k">%&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-an-input-form">
<span id="tag-input-form"></span><h3><a class="toc-backref" href="#id8">7.19.4.3. Create an input form</a><a class="headerlink" href="#create-an-input-form" title="Permalink to this headline">¶</a></h3>
<p>The input form is created using the following custom tags.
For more information on the custom tags listed below, see <a class="reference internal" href="tag/tag_reference.html#tag-reference"><span>Tag Reference</span></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a></li>
<li>Custom tag for input such as <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a></li>
<li>Custom tags to submit such as <a class="reference internal" href="tag/tag_reference.html#tag-submit-tag"><span>submit tag</span></a></li>
<li>Custom tag that displays error such as <a class="reference internal" href="tag/tag_reference.html#tag-error-tag"><span>error tag</span></a></li>
</ul>
<dl class="docutils">
<dt>Points for creating an input form</dt>
<dd><p class="first"></p>
<dl class="last docutils">
<dt>Restoration of input values</dt>
<dd>When the input form is redisplayed due to validation error etc., input values are restored from the request parameters associated with the custom tags.</dd>
<dt>Output of the initial value</dt>
<dd>To output the initial value in the input item, set the object with initial value set in the request scope of the action.
Specify the name attribute such that the name attribute of the custom tag corresponds to the variable name in the request scope.
Refer to <a class="reference internal" href="#tag-access-rule"><span>Rules to access input/output data</span></a> for details of the specification method and implementation example.</dd>
<dt>Specifying submit URI</dt>
<dd>In custom tags, each of the multiple buttons/links placed on a form can be submitted to a different URI.
URIs to which buttons/links are submitted, are specified to uri attribute.
Refer to <a class="reference internal" href="#tag-specify-uri"><span>URI specification method</span></a> for details of the specification method and implementation example.</dd>
</dl>
</dd>
<dt>Implementation examples</dt>
<dd><p class="first"></p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>User ID<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.userId&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.userId&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;n:password</span> <span class="na">name=</span><span class="s">&quot;form.password&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.password&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;padding: 8px 0;&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/login&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output result</dt>
<dd><p class="first"></p>
<img alt="../../../_images/login_form.png" class="last" src="../../../_images/login_form.png" />
</dd>
</dl>
<p></p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p id="tag-input-form-name-constraint">The name attribute of <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> has the following limitations:</p>
<ul class="simple">
<li>Specify a unique name for the name attribute within the screen</li>
<li>Specify a value in accordance with the variable name syntax of JavaScript</li>
</ul>
<dl class="last docutils">
<dt>Specify a unique name for the name attribute within the screen</dt>
<dd><p class="first">In custom tags, JavaScript is used for controlling Submit.
Refer to <a class="reference internal" href="#tag-onclick-override"><span>Adding a process before submission</span></a> for JavaScript.</p>
<p>In this JavaScript, name attribute of
<a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> is used for identifying the form to be submitted.
Therefore, when specifying the name attribute of <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>,
it is necessary to specify a unique name for the name attribute within the screen.</p>
<p class="last">If name attribute of <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> is not specified in the application,
then the custom tag configures a unique value for the name attribute.</p>
</dd>
<dt>Specify a value in accordance with the variable name syntax of JavaScript</dt>
<dd><p class="first">Since name attribute of <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> is used by JavaScript,
it is necessary to specify a value in accordance with the variable name syntax of JavaScript.</p>
<dl class="last docutils">
<dt>Variable name syntax</dt>
<dd><ul class="first last simple">
<li>Starts with an English alphabet</li>
<li>Subsequent values are alphanumeric or underscores</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div>
</div>
<div class="section" id="displaying-selection-items-pull-down-radio-button-check-box">
<span id="tag-selection"></span><h3><a class="toc-backref" href="#id9">7.19.4.4. Displaying selection items (pull-down/radio button/check box)</a><a class="headerlink" href="#displaying-selection-items-pull-down-radio-button-check-box" title="Permalink to this headline">¶</a></h3>
<p>The following custom tags are used for selection items:</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-select-tag"><span>select tag</span></a> (pull-down)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-radio-buttons-tag"><span>radioButtons tag</span></a> (multiple radio button)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-checkboxes-tag"><span>checkbox tag</span></a> (multiple checkboxes)</li>
</ul>
<p>Configure the options list (list of objects having the labels and values of options) in the request scope for the action
and display the options list using the custom tags.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Selection state is determined after performing <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="java.lang.Object.toString()">Object#toString</a>
for both selected value and option value.</p>
</div>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first"></p>
<dl class="last docutils">
<dt>Option class</dt>
<dd><p class="first"></p>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>

    <span class="c1">// Option values</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">planId</span><span class="o">;</span>

    <span class="c1">// Option labels</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">planName</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Plan</span><span class="o">(</span><span class="n">String</span> <span class="n">planId</span><span class="o">,</span> <span class="n">String</span> <span class="n">planName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">planId</span> <span class="o">=</span> <span class="n">planId</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">planName</span> <span class="o">=</span> <span class="n">planName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Custom tags acquire the option values from this property.</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getPlanId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">planId</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Custom tags acquire the option labels from this property.</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getPlanName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">planName</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</dd>
<dt>Action</dt>
<dd><p class="first"></p>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Configure the options list in the request scope.</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Plan</span><span class="o">&gt;</span> <span class="n">plans</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">Plan</span><span class="o">(</span><span class="s">&quot;A&quot;</span><span class="o">,</span> <span class="s">&quot;Free&quot;</span><span class="o">),</span>
                                 <span class="k">new</span> <span class="n">Plan</span><span class="o">(</span><span class="s">&quot;B&quot;</span><span class="o">,</span> <span class="s">&quot;Basic&quot;</span><span class="o">),</span>
                                 <span class="k">new</span> <span class="n">Plan</span><span class="o">(</span><span class="s">&quot;C&quot;</span><span class="o">,</span> <span class="s">&quot;Premium&quot;</span><span class="o">));</span>

<span class="c1">// Custom tags acquire the options list from the request scope using the name specified here.</span>
<span class="n">context</span><span class="o">.</span><span class="na">setRequestScopedVar</span><span class="o">(</span><span class="s">&quot;plans&quot;</span><span class="o">,</span> <span class="n">plans</span><span class="o">);</span>
</pre></div>
</div>
</dd>
<dt>Pull-down</dt>
<dd><dl class="first last docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Access the contents of the options by specifying the following attributes.</span>
<span class="c">  listName attribute: Name of the options list</span>
<span class="c">  elementLabelProperty attribute: Property name showing the label</span>
<span class="c">  elementValueProperty attribute: Property name showing the value</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:select</span> <span class="na">name=</span><span class="s">&quot;form.plan1&quot;</span>
          <span class="na">listName=</span><span class="s">&quot;plans&quot;</span>
          <span class="na">elementLabelProperty=</span><span class="s">&quot;planName&quot;</span>
          <span class="na">elementValueProperty=</span><span class="s">&quot;planId&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  When the value of &quot;form.plan1&quot; is &quot;A&quot;.</span>
<span class="c">--&gt;</span>
<span class="p">&lt;</span><span class="nt">select</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan1&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;A&quot;</span> <span class="na">selected</span><span class="o">=</span><span class="s">&quot;selected&quot;</span><span class="p">&gt;</span>Free<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;B&quot;</span><span class="p">&gt;</span>Basic<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;C&quot;</span><span class="p">&gt;</span>Premium<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Radio button</dt>
<dd><dl class="first last docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="cp">&lt;!—- Specification of the attribute is same as the select tag. --&gt;</span>
<span class="nt">&lt;n:radioButtons</span> <span class="na">name=</span><span class="s">&quot;form.plan2&quot;</span>
                <span class="na">listName=</span><span class="s">&quot;plans&quot;</span>
                <span class="na">elementLabelProperty=</span><span class="s">&quot;planName&quot;</span>
                <span class="na">elementValueProperty=</span><span class="s">&quot;planId&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c"> When the value of &quot;form.plan2&quot; is &quot;B&quot;.</span>
<span class="c"> Output using br tag if default.</span>
<span class="c"> listFormat attribute can be specified and changed to div tag, span tag, ul tag, ol tag and space delimiter.</span>
<span class="c">--&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nablarch_radio1&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan2&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;A&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;nablarch_radio1&quot;</span><span class="p">&gt;</span>Free<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nablarch_radio2&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan2&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;B&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;nablarch_radio2&quot;</span><span class="p">&gt;</span>Basic<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nablarch_radio3&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan2&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;C&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;nablarch_radio3&quot;</span><span class="p">&gt;</span>Premium<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Checkbox</dt>
<dd><dl class="first last docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="cp">&lt;!—- Specification of the attribute is same as the select tag. --&gt;</span>
<span class="nt">&lt;n:checkboxes</span> <span class="na">name=</span><span class="s">&quot;form.plan4&quot;</span>
              <span class="na">listName=</span><span class="s">&quot;plans&quot;</span>
              <span class="na">elementLabelProperty=</span><span class="s">&quot;planName&quot;</span>
              <span class="na">elementValueProperty=</span><span class="s">&quot;planId&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c"> When the value of &quot;form.plan4&quot; is &quot;C&quot;.</span>
<span class="c"> Output using br tag if default.</span>
<span class="c"> listFormat attribute can be specified and changed to div tag, span tag, ul tag, ol tag and space delimiter.</span>
<span class="c">--&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nablarch_checkbox1&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan4&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;A&quot;</span>
       <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;nablarch_checkbox1&quot;</span><span class="p">&gt;</span>Free<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nablarch_checkbox2&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan4&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;B&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;nablarch_checkbox2&quot;</span><span class="p">&gt;</span>Basic<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nablarch_checkbox3&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;form.plan4&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;C&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;nablarch_checkbox3&quot;</span><span class="p">&gt;</span>Premium<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>While on one hand, <a class="reference internal" href="tag/tag_reference.html#tag-radio-buttons-tag"><span>radioButtons tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-checkboxes-tag"><span>checkbox tag</span></a>
can easily output selection items, on the other hand, all options are output in the custom tags;
hence there is always a limitation on the HTML that is output.
When design cannot be controlled in the project, such as carrying out development based on the HTML created by a design company,
there are cases where the HTML output by <a class="reference internal" href="tag/tag_reference.html#tag-radio-buttons-tag"><span>radioButtons tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-checkboxes-tag"><span>checkbox tag</span></a> does not match with the design.</p>
<p>In such cases, if implementation is carried out using c:forEach tag of JSTL and <a class="reference internal" href="tag/tag_reference.html#tag-radio-tag"><span>radioButton tag</span></a> or <a class="reference internal" href="tag/tag_reference.html#tag-checkbox-tag"><span>checkbox tag</span></a>,
then HTML displaying the options can be implemented without restriction.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;c:forEach</span> <span class="na">items=</span><span class="s">&quot;${plans}&quot;</span> <span class="na">var=</span><span class="s">&quot;plan&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- HTML of users choice can be added before and after. --&gt;</span>
  <span class="nt">&lt;n:radioButton</span> <span class="na">name=</span><span class="s">&quot;form.plan3&quot;</span> <span class="na">label=</span><span class="s">&quot;${plan.planName}&quot;</span> <span class="na">value=</span><span class="s">&quot;${plan.planId}&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/c:forEach&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="specify-the-value-for-unchecked-checkboxes">
<span id="tag-checkbox-off-value"></span><h3><a class="toc-backref" href="#id10">7.19.4.5. Specify the value for unchecked checkboxes</a><a class="headerlink" href="#specify-the-value-for-unchecked-checkboxes" title="Permalink to this headline">¶</a></h3>
<p>In the HTML checkbox tag, request parameter is not sent when checkboxes are unchecked.
When using the checkbox tag for a single input item, the checkbox tag often corresponds to a data item expressed as a flag in the database,
and usually some value is configured to it even in the unchecked state.
Therefore, a function is provided in the <a class="reference internal" href="tag/tag_reference.html#tag-checkbox-tag"><span>checkbox tag</span></a>, which enables specification of a value corresponding to the unchecked state.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c"> By specifying the following attribute, actions in the case of unchecked state are controlled.</span>
<span class="c"> useOffValue attribute: Whether to use the value configuration without the checkmark. Default is true</span>
<span class="c">                        Specify false in the case of multiple selection for bulk deletion, etc.</span>
<span class="c"> offLabel attribute: The label used when there is no checkmark.</span>
<span class="c">                     The label displayed on the confirmation screen when a common JSP is used for the input and confirmation screens.</span>
<span class="c"> offValue attribute: The value used when there is no checkmark. Default is 0.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:checkbox</span> <span class="na">name=</span><span class="s">&quot;form.useMail&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="na">label=</span><span class="s">&quot;Used&quot;</span>
            <span class="na">offLabel=</span><span class="s">&quot;Not used&quot;</span> <span class="na">offValue=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This function is implemented using <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a> and <a class="reference internal" href="#tag-hidden-encryption"><span>hidden encryption</span></a>.
When the checkbox tag is output, the value corresponding to the unchecked state is output in the hidden tag,
and when <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a> receives the request, the value corresponding to the unchecked state is configured in the request parameter
only if the checkbox tag is unchecked.</p>
</div>
</div>
<div class="section" id="retaining-the-input-data-across-screens-window-scope">
<span id="tag-window-scope"></span><h3><a class="toc-backref" href="#id11">7.19.4.6. Retaining the input data across screens (window scope)</a><a class="headerlink" href="#retaining-the-input-data-across-screens-window-scope" title="Permalink to this headline">¶</a></h3>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>There are two methods to retain input data, the method explained here,
in which window scope is used, and the method in which <a class="reference internal" href="session_store.html#session-store"><span>Session Store</span></a> of library is used.
<a class="reference internal" href="session_store.html#session-store"><span>Session Store</span></a> should be used to retain input data across screens for the following reasons:</p>
<ul class="last">
<li><p class="first">In window scope, a Bean cannot be stored as it is, since data is retained in key/value pairs.
If data retained by a Bean is to be stored, the data will be fragmented, and implementation will become very complicated.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Let us assume such a Bean.</span>
<span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
<span class="n">person</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;Name&quot;</span><span class="o">);</span>
<span class="n">person</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="s">&quot;Age&quot;</span><span class="o">);</span>

<span class="c1">// Set to window scope (when done using action)</span>
<span class="n">request</span><span class="o">.</span><span class="na">setParam</span><span class="o">(</span><span class="s">&quot;person.name&quot;</span><span class="o">,</span> <span class="n">person</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">setParam</span><span class="o">(</span><span class="s">&quot;person.age&quot;</span><span class="o">,</span> <span class="n">person</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>

<span class="c1">// Set to window scope (when done using JSP)</span>
<span class="o">&lt;</span><span class="n">n</span><span class="o">:</span><span class="n">hidden</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;person.name&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">n</span><span class="o">:</span><span class="n">hidden</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;person.age&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Since input data is configured to the window scope by specifying custom tag attributes, movement of data is difficult to comprehend. (degree of difficulty of implementation is high)</p>
</li>
</ul>
</div>
<p>Input data is retained on the client as hidden tag.
Compared to retaining the data in the server (session), when data is retained on the client, there are less restrictions on using the browser,
such as use of multiple windows and use of the back button on the browser, and it becomes possible to have a flexible screen design.</p>
<p>The storage destination of data retained in the client is called a window scope.
The data in the window scope is encrypted using <a class="reference internal" href="#tag-hidden-encryption"><span>hidden encryption</span></a>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The data in the window scope is encrypted using <a class="reference internal" href="#tag-hidden-encryption"><span>hidden encryption</span></a> and output in the hidden tag.
Therefore, the contents of the window scope cannot be overwritten in the client, such as overwriting with the data acquired using Ajax.</p>
</div>
<p>Data is configured to the window scope by specifying windowScopePrefixes attribute of <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>When windowScopePrefixes attribute is specified, among the request parameters,
those with <strong>prefix match</strong> of the parameter name matching
with the value specified for this attribute are configured to the window scope.</p>
<p class="last">For example, if <code class="docutils literal"><span class="pre">windowScopePrefixes=&quot;user&quot;</span></code> is specified,
then the parameters that start with <code class="docutils literal"><span class="pre">users</span></code> are also configured to the window scope.</p>
</div>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">Search condition of search function and input data of update function are retained across screens.
Screen transition and movement of the data stored in hidden are as follows:</p>
<img alt="../../../_images/window_scope.png" src="../../../_images/window_scope.png" />
<p>The request parameter of the search condition is <code class="docutils literal"><span class="pre">searchCondition.*</span></code>
and that of the input data is <code class="docutils literal"><span class="pre">user.*</span></code>.</p>
<dl class="last docutils">
<dt>Search screen</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Data in the window scope is not sent. --&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
</pre></div>
</div>
</dd>
<dt>Update screen</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Only search condition is sent. --&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">windowScopePrefixes=</span><span class="s">&quot;searchCondition&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</dd>
<dt>Update confirmation screen</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Search condition and input data are sent.</span>
<span class="c">  When specifying more than one, separate by comma.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">windowScopePrefixes=</span><span class="s">&quot;searchCondition,user&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</dd>
<dt>Update completion screen</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Only search condition is sent. --&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">windowScopePrefixes=</span><span class="s">&quot;searchCondition&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Data in the database should be kept to the necessary minimum, such as the primary key for identifying the data to be updated, data for optimistic locking, etc.
Especially, data that is displayed on the input screen and confirmation screen (items only to be displayed and not the input items)
should be acquired from the database whenever required rather than passing the data using hidden.
If there is too much of data in hidden, communication speed will decrease and this can result in insufficient memory.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The data stored in the window scope is output in the hidden tag and passed across screens as request parameters.
Therefore, when using the data stored in the window scope for the action,
it is necessary to perform <a class="reference internal" href="validation.html#validation"><span>validation</span></a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">In <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, instead of uniform output of all request parameters in the hidden tag,
request parameters that have already been output as input items are excluded from the output in the hidden tag.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Information such as login information, that is necessary for all tasks is retained in the server (session).</p>
</div>
</div>
<div class="section" id="encryption-of-data-held-in-the-client-hidden-encryption">
<span id="tag-hidden-encryption"></span><h3><a class="toc-backref" href="#id12">7.19.4.7. Encryption of data held in the client (hidden encryption)</a><a class="headerlink" href="#encryption-of-data-held-in-the-client-hidden-encryption" title="Permalink to this headline">¶</a></h3>
<p>The values of <a class="reference internal" href="#tag-window-scope"><span>window scope</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-hidden-tag"><span>hidden tag</span></a>
can be tampered with in the client or can be easily referenced from the HTML source.
For this reason, hidden encryption function is provided in the custom tags with the goal to prevent the hidden tag from being tampered or referenced.</p>
<p>Encryption is performed for all <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, and decryption and tampering check are performed for all requests by default.
Therefore, the application programmer need not implement hidden encryption function.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since the specifications are complicated and cannot be used easily, and also, since the use of encrypted data,
such as the data in the <a class="reference internal" href="#tag-window-scope"><span>window scope</span></a> is deprecated, this function is also deprecated.
Therefore, <a class="reference internal" href="#tag-use-hidden-encryption"><span>useHiddenEncryption</span></a> should be configured to <code class="docutils literal"><span class="pre">false</span></code>, unless there is a particular reason.</p>
</div>
<dl class="docutils">
<dt>hidden encryption</dt>
<dd><p class="first">Hidden encryption is implemented via <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> and <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a>.
The image of hidden encryption process is shown below:
Encryption is performed through <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, and decryption and tampering check are performed via <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a>.</p>
<img alt="../../../_images/hidden_encryption.png" src="../../../_images/hidden_encryption.png" />
<p class="last"></p>
</dd>
<dt>Encryption process</dt>
<dd><p class="first">Encryption is performed by the class that implements <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/encryption/Encryptor.html" title="nablarch.common.encryption.Encryptor">Encryptor</a> interface.
In the framework, <code class="docutils literal"><span class="pre">AES</span> <span class="pre">(128bit)</span></code> is used as a default encryption algorithm.
To change the encryption algorithm, add the class that implements
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/encryption/Encryptor.html" title="nablarch.common.encryption.Encryptor">Encryptor</a>
to the component definition with the name <code class="docutils literal"><span class="pre">hiddenEncryptor</span></code>.</p>
<p>In encryption, for each <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, the following data contained in <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> is collectively encrypted
and output in 1 hidden tag.</p>
<ul class="simple">
<li>Hidden parameter specified explicitly using the custom tag <a class="reference internal" href="tag/tag_reference.html#tag-hidden-tag"><span>hidden tag</span></a></li>
<li>Value of the <a class="reference internal" href="#tag-window-scope"><span>window scope</span></a></li>
<li>Request ID specified in the <a class="reference internal" href="tag/tag_reference.html#tag-reference-submit"><span>custom tag that performs submit</span></a></li>
<li><a class="reference internal" href="#tag-submit-change-parameter"><span>Parameter</span></a> added in the <a class="reference internal" href="tag/tag_reference.html#tag-reference-submit"><span>custom tag that performs submit</span></a></li>
</ul>
<p>In encryption, a hash value generated from the above data is included to detect tampering.
The request ID is used to detect tampering when encrypted values are replaced across different input forms,
while the hash value is used for detecting tampering by overwriting of values.
The encrypted data is encoded using BASE64 and output in the hidden tag.</p>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Since the hidden parameter explicitly specified in the custom tag <a class="reference internal" href="tag/tag_reference.html#tag-hidden-tag"><span>hidden tag</span></a> is included in the encryption,
the value cannot be manipulated using JavaScript in the client.
To manipulate the hidden parameter using JavaScript in the client,
output the unencrypted hidden tag, using <a class="reference internal" href="tag/tag_reference.html#tag-plain-hidden-tag"><span>plainHidden tag</span></a>.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="tag-hidden-encryption-decryption">
<dt>Decryption process</dt>
<dd><p class="first">The decryption process is performed through <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a>.
The following cases are judged as tampering by the <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a>, and the screen is transitioned to the screen specified in the configuration.</p>
<ul class="last simple">
<li>Encrypted hidden parameter (nablarch_hidden) does not exist.</li>
<li>Decoding of BASE64 fails.</li>
<li>Decryption fails.</li>
<li>The hash value generated during encryption and hash value generated using the decrypted value do not match.</li>
<li>The request ID added during encryption and request ID of the received request do not match.</li>
</ul>
</dd>
<dt>Storage location of the key used for encryption</dt>
<dd>The key used for encryption is generated for each session to minimize the expiry interval of the key as much as possible.
Therefore, if the same user logs in again, the process cannot be continued from the screen used before the login.</dd>
<dt>hidden encryption configuration</dt>
<dd><p class="first">In hidden encryption, the following can be configured by <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a>:</p>
<dl class="docutils" id="tag-use-hidden-encryption">
<dt>useHiddenEncryption property</dt>
<dd>Whether to use hidden encryption.
Default is true.</dd>
<dt>noHiddenEncryptionRequestIds property</dt>
<dd>Request ID for which hidden encryption is not performed.</dd>
</dl>
<p>Specify the requests for which hidden encryption cannot be used, to noHiddenEncryptionRequestIds property, as shown below:</p>
<ul class="simple">
<li>Requests such as login screen, which serve as entry to an application</li>
<li>Requests transitioning from bookmarks</li>
<li>Requests transitioning from external sites</li>
</ul>
<p>Since these requests do not have the encrypted hidden parameter (nablarch_hidden)
or the key generated for each session, a tampering error will occur if noHiddenEncryptionRequestIds property is not configured.</p>
<p>The value configured in the noHiddenEncryptionRequestIds property is referenced by
<a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> and <a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a>
when performing the encryption and decryption process respectively.</p>
<dl class="last docutils">
<dt><a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a></dt>
<dd>Encryption is performed if at least one request ID to be encrypted is included in the <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>.
Conversely, if a request ID to be encrypted is not included, encryption is not performed for the <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>.</dd>
<dt><a class="reference internal" href="../handlers/web/nablarch_tag_handler.html#nablarch-tag-handler"><span>Nablarch Custom Tag Control Handler</span></a></dt>
<dd>Decryption is performed only when the requested request ID has been encrypted.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="creating-radio-buttons-and-checkboxes-associated-with-a-composite-key">
<span id="tag-composite-key"></span><h3><a class="toc-backref" href="#id13">7.19.4.8. Creating radio buttons and checkboxes associated with a composite key</a><a class="headerlink" href="#creating-radio-buttons-and-checkboxes-associated-with-a-composite-key" title="Permalink to this headline">¶</a></h3>
<p>When selecting data on the list screen, radio buttons and checkboxes are used.
If a single value identifies the data, then <a class="reference internal" href="tag/tag_reference.html#tag-radio-tag"><span>radioButton tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-checkbox-tag"><span>checkbox tag</span></a> can be used,
however, implementation is not easy in the case of a composite key.</p>
<p>In custom tags, radio buttons and checkboxes supporting composite keys are provided.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-composite-key-radio-button-tag"><span>compositeKeyRadioButton tag</span></a> (radio button supporting composite keys)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-composite-key-checkbox-tag"><span>compositeKeyCheckbox Tag</span></a> (checkbox supporting composite keys)</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To use this function, it is necessary to add
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/compositekey/CompositeKeyConvertor.html" title="nablarch.common.web.compositekey.CompositeKeyConvertor">CompositeKeyConvertor</a> and
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/compositekey/CompositeKeyArrayConvertor.html" title="nablarch.common.web.compositekey.CompositeKeyArrayConvertor">CompositeKeyArrayConvertor</a>
to the component definition.
For the configuration method, refer to <a class="reference internal" href="validation/nablarch_validation.html#nablarch-validation-definition-validator-convertor"><span>Configuring Validators and Convertors for Use</span></a>.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This function works only with <a class="reference internal" href="validation/nablarch_validation.html#nablarch-validation"><span>Nablarch Validation</span></a> as
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/compositekey/CompositeKeyConvertor.html" title="nablarch.common.web.compositekey.CompositeKeyConvertor">CompositeKeyConvertor</a> and
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/compositekey/CompositeKeyArrayConvertor.html" title="nablarch.common.web.compositekey.CompositeKeyArrayConvertor">CompositeKeyArrayConvertor</a>
are used.
Does not support <a class="reference internal" href="validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a>.</p>
</div>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">Implementation method is explained based on an example in which a checkbox with a composite key is used for list display.</p>
<dl class="last docutils">
<dt>Form</dt>
<dd><p class="first">In the form,
property that holds the composite key is defined as
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/compositekey/CompositeKey.html" title="nablarch.common.web.compositekey.CompositeKey">CompositeKey</a>.</p>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderItemsForm</span> <span class="o">{</span>

    <span class="c1">// This time, since a composite key for multiple data is received in the list display,</span>
    <span class="c1">// it is defined as a string.</span>
    <span class="kd">public</span> <span class="n">CompositeKey</span><span class="o">[]</span> <span class="n">orderItems</span><span class="o">;</span>

    <span class="c1">// Getter, constructor, etc. are omitted.</span>

    <span class="c1">// Specify the size of the composite key in the CompositeKeyType annotation.</span>
    <span class="nd">@CompositeKeyType</span><span class="o">(</span><span class="n">keySize</span> <span class="o">=</span> <span class="mi">2</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOrderItems</span><span class="o">(</span><span class="n">CompositeKey</span><span class="o">[]</span> <span class="n">orderItems</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderItems</span> <span class="o">=</span> <span class="n">orderItems</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;table&gt;</span>
  <span class="nt">&lt;thead&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="c">&lt;!-- Header output is omitted. --&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/thead&gt;</span>
  <span class="nt">&lt;tbody&gt;</span>
    <span class="nt">&lt;c:forEach</span> <span class="na">var=</span><span class="s">&quot;orderItem&quot;</span> <span class="na">items=</span><span class="s">&quot;${orderItems}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>
        <span class="c">&lt;!--</span>
<span class="c">          Specify the following attributes.</span>
<span class="c">          name attribute: Specify according to the property name of the form.</span>
<span class="c">          valueObject attribute: Specify the object having the value of the composite key.</span>
<span class="c">          keyNames attribute: Specify the property name used when getting the value of the composite key</span>
<span class="c">                              from the object specified in the valueObejct attribute.</span>
<span class="c">                              Set to the CompositeKey in the order specified here.</span>
<span class="c">          namePrefix attribute: Used when expanding the value of the composite key in request parameters</span>
<span class="c">                                Specify a prefix.</span>
<span class="c">                                It is necessary to specify a value that is different from the name attribute.</span>
<span class="c">        --&gt;</span>
        <span class="nt">&lt;n:compositeKeyCheckbox</span>
          <span class="na">name=</span><span class="s">&quot;form.orderItems&quot;</span>
          <span class="na">label=</span><span class="s">&quot;&quot;</span>
          <span class="na">valueObject=</span><span class="s">&quot;${orderItem}&quot;</span>
          <span class="na">keyNames=</span><span class="s">&quot;orderId,productId&quot;</span>
          <span class="na">namePrefix=</span><span class="s">&quot;orderItems&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/td&gt;</span>
      <span class="c">&lt;!-- Rest is omitted--&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/c:forEach&gt;</span>
  <span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="submitting-a-form-from-multiple-buttons-links">
<span id="tag-submit"></span><h3><a class="toc-backref" href="#id14">7.19.4.9. Submitting a form from multiple buttons/links</a><a class="headerlink" href="#submitting-a-form-from-multiple-buttons-links" title="Permalink to this headline">¶</a></h3>
<p>Form submission is supported by buttons and links, and is performed using the following custom tags:
Multiple buttons and links can be placed on one form.</p>
<dl class="docutils">
<dt>Submit form</dt>
<dd><div class="first last line-block">
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-submit-tag"><span>submit tag</span></a> (button of input tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-button-tag"><span>button tag</span></a> (button of button tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-submit-link-tag"><span>submitLink tag</span></a> (link)</div>
</div>
</dd>
<dt>Open another window and submit (pop-up)</dt>
<dd><div class="first last line-block">
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-popup-submit-tag"><span>popupSubmit tag</span></a> (button of input tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-popup-button-tag"><span>popupButton tag</span></a> (button of button tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-popup-link-tag"><span>popupLink tag</span></a> (link)</div>
</div>
</dd>
<dt>Submit for download</dt>
<dd><div class="first last line-block">
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-download-submit-tag"><span>downloadSubmit tag</span></a> (button of input tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-download-button-tag"><span>downloadButton tag</span></a> (button of button tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-download-link-tag"><span>downloadLink tag</span></a> (link)</div>
</div>
</dd>
</dl>
<p>Tags with the tag name starting with <code class="docutils literal"><span class="pre">popup</span></code> open a new window
and perform submit for the opened window.
Tags with the tag name starting with <code class="docutils literal"><span class="pre">download</span></code> perform submit for download.
See below for details of each.</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-submit-popup"><span>Creating a button/link to open a separate window/tab (pop-up)</span></a></li>
<li><a class="reference internal" href="#tag-submit-download"><span>Creating a button/link to download a file</span></a></li>
</ul>
<p>In these custom tags, name attribute and uri attribute are specified to link the buttons/links with URI.
name attribute specifies a unique name within a form.If name attribute is not specified, then a unique name is automatically output in the custom tag.
Refer to <a class="reference internal" href="#tag-specify-uri"><span>URI specification method</span></a> for the method to specify uri attribute.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="cp">&lt;!—- name attribute is automatically output and need not be specified. --&gt;</span>
<span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;login&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="adding-a-process-before-submission">
<span id="tag-onclick-override"></span><h3><a class="toc-backref" href="#id15">7.19.4.10. Adding a process before submission</a><a class="headerlink" href="#adding-a-process-before-submission" title="Permalink to this headline">¶</a></h3>
<p>Form submission is implemented by assembling the URI for each button/link using JavaScript.
The custom tags output this JavaScript function in the global area
and output the HTML with the function call configured to the onclick attribute of the button/link.</p>
<dl class="docutils" id="tag-submit-function">
<dt>Signature of the JavaScript function output by the custom tag</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @param event Event object</span>
<span class="cm"> * @param element Event source element (button or link)</span>
<span class="cm"> * @return Always false as the event is not propagated</span>
<span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">nablarch_submit</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>An output example is shown below.</p>
<dl class="docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:form&gt;</span>
  <span class="c">&lt;!-- Omitted --&gt;</span>
  <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;login&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
<dt>HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span>
<span class="kd">function</span> <span class="nx">nablarch_submit</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Omitted</span>
<span class="p">}</span>
<span class="o">--&gt;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">form</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;nablarch_form1&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- JavaScript function for submission control is set to the onclick attribute. --&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;nablarch_form1_1&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Login&quot;</span>
         <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;return window.nablarch_submit(event, this);&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>To add a process before submission, specify the JavaScript function created in the application to the onclick attribute.
When the onclick attribute is specified, the custom tag does not specify the JavaScript function for submission.
In such cases, it is necessary to call the <a class="reference internal" href="#tag-submit-function"><span>JavaScript function</span></a> configured by the custom tag, using the JavaScript created in the application.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">A confirmation dialog box is displayed before submission.</p>
<dl class="last docutils">
<dt>JavaScript</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">popUpConfirmation</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">confirm</span><span class="p">(</span><span class="s2">&quot;Will register. Are you sure?&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Explicitly call the JavaScript function output by the custom tag.</span>
    <span class="k">return</span> <span class="nx">nablarch_submit</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Cancel</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;register&quot;</span> <span class="na">value=</span><span class="s">&quot;Register&quot;</span>
          <span class="na">onclick=</span><span class="s">&quot;return popUpConfirmation(event, this);&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="trigger-submit-on-screen-operations-such-as-changing-the-selection-in-a-pull-down">
<span id="tag-onchange-submit"></span><h3><a class="toc-backref" href="#id16">7.19.4.11. Trigger submit on screen operations such as changing the selection in a pull-down</a><a class="headerlink" href="#trigger-submit-on-screen-operations-such-as-changing-the-selection-in-a-pull-down" title="Permalink to this headline">¶</a></h3>
<p>The custom tags use JavaScript for submission control,
and operate on the premise that the JavaScript function for submission control is specified in the event handler of a button or a link (onclick attribute).
Refer to <a class="reference internal" href="#tag-onclick-override"><span>Adding a process before submission</span></a> for JavaScript details.</p>
<p>Therefore, to trigger submit on a screen operation such as changing the selection in a pull-down, generate the click event of the corresponding submit button.</p>
<p>The implementation example of submission with change of a pull-down is shown.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Call the click function of the corresponding submit button element using the onchange attribute. --&gt;</span>
<span class="nt">&lt;n:select</span> <span class="na">name=</span><span class="s">&quot;form.plan&quot;</span>
          <span class="na">listName=</span><span class="s">&quot;plans&quot;</span>
          <span class="na">elementLabelProperty=</span><span class="s">&quot;planName&quot;</span>
          <span class="na">elementValueProperty=</span><span class="s">&quot;planId&quot;</span>
          <span class="na">onchange=</span><span class="s">&quot;window.document.getElementById(&#39;register&#39;).click(); return false;&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;n:submit</span> <span class="na">id=</span><span class="s">&quot;register&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;register&quot;</span> <span class="na">value=</span><span class="s">&quot;Register&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">In the above implementation example, JavaScript is written directly in the onchange event handler because it is easy to explain,
however, in a live project, it is recommended to dynamically bind the process by using the open source JavaScript library, etc.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="adding-parameters-for-each-button-link">
<span id="tag-submit-change-parameter"></span><h3><a class="toc-backref" href="#id17">7.19.4.12. Adding parameters for each button/link</a><a class="headerlink" href="#adding-parameters-for-each-button-link" title="Permalink to this headline">¶</a></h3>
<p>At the time of transition from the list screen to the details screen in the update function, etc.,
displaying links with the same URL but different parameters may be required.</p>
<p>Custom tags are provided for adding parameters for each button or link on the form.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-param-tag"><span>param tag</span></a> (specification of parameters to be added at the time of submission)</li>
</ul>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">Add parameters for each link on the list screen based on the search results.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;table&gt;</span>
    <span class="c">&lt;!-- Table header row is omitted  --&gt;</span>
    <span class="nt">&lt;c:forEach</span> <span class="na">var=</span><span class="s">&quot;person&quot;</span> <span class="na">items=</span><span class="s">&quot;${persons}&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span>
          <span class="nt">&lt;n:submitLink</span> <span class="na">uri=</span><span class="s">&quot;/action/person/show&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;n:write</span> <span class="na">name=</span><span class="s">&quot;person.personName&quot;</span> <span class="nt">/&gt;</span>
            <span class="c">&lt;!-- &quot;personId&quot; is specified in the parameter name. --&gt;</span>
            <span class="nt">&lt;n:param</span> <span class="na">paramName=</span><span class="s">&quot;personId&quot;</span> <span class="na">name=</span><span class="s">&quot;person.personId&quot;</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/n:submitLink&gt;</span>
        <span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/c:forEach&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">When adding parameters, the volume of request data increases depending on the number of parameters.
Therefore, when adding parameters for each link on the list screen to the details screen,
add only minimum required parameters, such as adding only the primary key as parameter, etc.</p>
</div>
</div>
<div class="section" id="switching-between-display-no-display-of-the-button-link-depending-on-permission-check-service-availability">
<span id="tag-submit-display-control"></span><h3><a class="toc-backref" href="#id18">7.19.4.13. Switching between display/no display of the button/link depending on permission check/service availability</a><a class="headerlink" href="#switching-between-display-no-display-of-the-button-link-depending-on-permission-check-service-availability" title="Permalink to this headline">¶</a></h3>
<p>A function is provided for switching the display of the <a class="reference internal" href="tag/tag_reference.html#tag-reference-submit"><span>button/link for submitting a form</span></a>,
depending on the result of <a class="reference internal" href="permission_check.html#permission-check"><span>Permission Check</span></a> and <a class="reference internal" href="service_availability.html#service-availability"><span>Service Availability Check</span></a>.
By doing this, it is possible to determine whether the said function can be used before the user selects the button/link, thereby improving usability.</p>
<p><a class="reference internal" href="permission_check.html#permission-check"><span>Permission Check</span></a> and <a class="reference internal" href="service_availability.html#service-availability"><span>Service Availability Check</span></a> are performed for the request ID
specified in the <a class="reference internal" href="tag/tag_reference.html#tag-reference-submit"><span>button/link for submitting a form</span></a>
and the display is switched when there is <code class="docutils literal"><span class="pre">no</span> <span class="pre">permission</span></code> or <code class="docutils literal"><span class="pre">service</span> <span class="pre">is</span> <span class="pre">unavailable</span></code>.</p>
<p>There are 3 patterns for switching the display method:</p>
<dl class="docutils">
<dt>No display</dt>
<dd>Tags are not output.</dd>
<dt>Disabled</dt>
<dd>Tags are disabled.
For buttons, disabled attribute is enabled.
For links, either only the label is displayed or JSP for displaying an inactive link is included.
To include JSP, specify
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setSubmitLinkDisabledJsp-java.lang.String-" title="nablarch.common.web.tag.CustomTagConfig.setSubmitLinkDisabledJsp(java.lang.String)">submitLinkDisabledJsp property</a>
in <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a>.</dd>
<dt>Normal display</dt>
<dd>Tags are output as usual.
Display method is not switched.</dd>
</dl>
<p>The default is <code class="docutils literal"><span class="pre">Normal</span> <span class="pre">display</span></code>.
Default can be changed by specifying
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setDisplayMethod-java.lang.String-" title="nablarch.common.web.tag.CustomTagConfig.setDisplayMethod(java.lang.String)">displayMethod property</a>
in <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a>.</p>
<p>To change the display method individually, specify in the displayMethod attribute.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Specify one of the NODISPLAY, DISABLED and NORMAL.</span>
<span class="c">  This tag is always displayed.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">uri=</span><span class="s">&quot;login&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="na">displayMethod=</span><span class="s">&quot;NORMAL&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To change the judgment process used for display control in the application,
refer to <a class="reference internal" href="#tag-submit-display-control-change"><span>Change the judgment process used for button/link display control</span></a>.</p>
</div>
</div>
<div class="section" id="creating-a-button-link-to-open-a-separate-window-tab-pop-up">
<span id="tag-submit-popup"></span><h3><a class="toc-backref" href="#id19">7.19.4.14. Creating a button/link to open a separate window/tab (pop-up)</a><a class="headerlink" href="#creating-a-button-link-to-open-a-separate-window-tab-pop-up" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, multiple windows are required to be opened for improving operability.
For example, there are cases where the search screen is opened in a separate window to perform input assistance such as searching a mailing address from the zip code input field.</p>
<p>There are custom tags that support opening of multiple windows (hereinafter referred to as pop-up tags).</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-popup-submit-tag"><span>popupSubmit tag</span></a> (button of input tag)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-popup-button-tag"><span>popupButton tag</span></a> (button of button tag)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-popup-link-tag"><span>popupLink tag</span></a> (link)</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>These tags are not recommended due to the following problems:</p>
<ul class="last">
<li><p class="first">When a link or button is created to an external site, the page is not opened in a new window in some browsers. (for example, this occurs when IE protection mode is enabled)</p>
<p>This problem can be avoided by using <a class="reference internal" href="tag/tag_reference.html#tag-a-tag"><span>a tag</span></a> or HTML tags.</p>
</li>
<li><p class="first">Screen transition using a sub-window is less convenient.</p>
<p>The architecture of displaying a pop-up window on a page is common, and search using a sub-window is now obsolete.
Display process of a pop-up window on a page can be handled by using an open source library.</p>
</li>
</ul>
</div>
<p>The pop-up tags differ from the custom tags that are associated with submit of the form on the screen, in the following aspects:</p>
<ul class="simple">
<li>A new window is opened and submit is performed for the opened window.</li>
<li>Parameter names of input items can be changed.</li>
</ul>
<p>Popups are implemented using the JavaScript window.open function.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">A search button that opens a window in a specified style is created.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  The operation to open the window is controlled by the following attribute specifications.</span>
<span class="c">  popupWindowName attribute: Window name of pop-up:</span>
<span class="c">                             Specified to the second argument of the window.open function when opening a new window.</span>
<span class="c">  popupOption attribute: Pop-up option information.</span>
<span class="c">                         Specify to the third argument of the window.open function when opening a new window.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:popupButton</span> <span class="na">uri=</span><span class="s">&quot;/action/person/list&quot;</span>
               <span class="na">popupWindowName=</span><span class="s">&quot;postalCodeSupport&quot;</span>
               <span class="na">popupOption=</span><span class="s">&quot;width=400, height=300, menubar=no, toolbar=no, scrollbars=yes&quot;</span><span class="nt">&gt;</span>
  Search
<span class="nt">&lt;/n:popupButton&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>If the popupWindowName attribute is not specified, then the default value specified in
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setPopupWindowName-java.lang.String-" title="nablarch.common.web.tag.CustomTagConfig.setPopupWindowName(java.lang.String)">popupWindowName property</a>
by the <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a> is used.
If no default value is configured, the custom tag uses the current time (milliseconds) acquired from the JavaScript date function for the name of the new window.
The default action of a pop-up is determined as follows depending on whether the default value is specified.</p>
<blockquote>
<div><dl class="docutils">
<dt>When a default value is specified</dt>
<dd>Only one window is opened since the same window name is always used.</dd>
<dt>When a default value is not specified</dt>
<dd>Always a new window is opened since every time a different window name is used.</dd>
</dl>
</div></blockquote>
<dl class="docutils" id="tag-submit-change-param-name">
<dt>Parameter name change</dt>
<dd><p class="first">The pop-up tags dynamically add and submit all input elements contained in the form of the source screen.
The parameter names do not always match in the action of the window opened by the pop-up tag and action of the source screen.
Therefore, the following custom tags are provided to change the parameter names of input items on the source screen.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-change-param-name-tag"><span>changeParamName tag</span></a> (change parameter name when submitting for pop-up)</li>
</ul>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><p class="first">The screen image is shown below.</p>
<img alt="../../../_images/popup_postal_code.png" src="../../../_images/popup_postal_code.png" />
<p></p>
<p>When the search button is selected, a different window is opened for searching the mailing address corresponding to the number entered in the zip code field.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Postal code<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.postalCode&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;n:popupButton</span> <span class="na">uri=</span><span class="s">&quot;/action/postalCode/show&quot;</span><span class="nt">&gt;</span>
      Search
      <span class="c">&lt;!--</span>
<span class="c">        Change the zip code parameter name &quot;form.postalCode&quot; to &quot;condition.postalCode&quot;.</span>
<span class="c">      --&gt;</span>
      <span class="nt">&lt;n:changeParamName</span> <span class="na">inputName=</span><span class="s">&quot;form.postalCode&quot;</span> <span class="na">paramName=</span><span class="s">&quot;condition.postalCode&quot;</span> <span class="nt">/&gt;</span>
      <span class="c">&lt;!--</span>
<span class="c">        Parameters can also be added.</span>
<span class="c">      --&gt;</span>
      <span class="nt">&lt;n:param</span> <span class="na">paramName=</span><span class="s">&quot;condition.max&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/n:popupButton&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-submit-access-open-window">
<dt>How to access open windows</dt>
<dd><p class="first">When there is a screen transition from the source screen while other windows are open, access the window opened by the application may be required,
by closing all windows that are unnecessary at the time of source screen transition.
Therefore, custom tags hold a reference to the opened windows in a JavaScript global variable.
The variable name in which the opened windows are retained is shown below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// key is the window name</span>
<span class="kd">var</span> <span class="nx">nablarch_opened_windows</span> <span class="o">=</span> <span class="p">{};</span>
</pre></div>
</div>
<p>The implementation example when closing all windows that become unnecessary during source screen transition, is shown below.</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Bind to the onunload event handler.</span>
<span class="c1">// Call close function of the windows held in nablarch_opened_windows variable.</span>
<span class="nx">onunload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">nablarch_opened_windows</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">openedWindow</span> <span class="o">=</span> <span class="nx">nablarch_opened_windows</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">openedWindow</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">openedWindow</span><span class="p">.</span><span class="nx">closed</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">openedWindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="creating-a-button-link-to-download-a-file">
<span id="tag-submit-download"></span><h3><a class="toc-backref" href="#id20">7.19.4.15. Creating a button/link to download a file</a><a class="headerlink" href="#creating-a-button-link-to-download-a-file" title="Permalink to this headline">¶</a></h3>
<p>To create a button/link for file download,
the custom tags that submit exclusively for download (hereinafter referred to as download tags)
and the <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/fw/web/HttpResponse.html" title="nablarch.fw.web.HttpResponse">HttpResponse</a> subclass
that facilitates the implementation of the action (hereinafter referred to as download utility) are provided.</p>
<dl class="docutils">
<dt>Download tags</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-download-submit-tag"><span>downloadSubmit tag</span></a> (button of input tag)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-download-button-tag"><span>downloadButton tag</span></a> (button of button tag)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-download-link-tag"><span>downloadLink tag</span></a> (link)</li>
</ul>
</dd>
<dt>Download utility</dt>
<dd><dl class="first last docutils">
<dt><a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/download/StreamResponse.html" title="nablarch.common.web.download.StreamResponse">StreamResponse</a></dt>
<dd>This class generates HTTP response message from stream.
Used to download binary data stored in a file in the file system or in a BLOB column of a database.
Supports download of <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/io/File.html" title="java.io.File">File</a> or <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/sql/Blob.html" title="java.sql.Blob">Blob</a>.</dd>
<dt><a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/download/DataRecordResponse.html" title="nablarch.common.web.download.DataRecordResponse">DataRecordResponse</a></dt>
<dd>This class generates HTTP response message from a data record.
Used to download data used in the application, such as search result etc.
The downloaded data is formatted using <a class="reference internal" href="data_io/data_format.html#data-format"><span>General Data Format</span></a>.
Supports download of Map&lt;String, ?&gt; type data (<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/db/statement/SqlRow.html" title="nablarch.core.db.statement.SqlRow">SqlRow</a>, etc.)</dd>
</dl>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since custom tags use JavaScript for form submission control,
if downloaded by submitting the form (<a class="reference internal" href="tag/tag_reference.html#tag-submit-tag"><span>submit tag</span></a>, etc.) on the screen,
other submissions in the same form stop functioning.
For this reason, download tags are provided in the custom tags for submitting without affecting the form on the screen.
Make sure to use the download tags for download buttons and links.</p>
</div>
<p>The download tags differ from the custom tags that submit the form on the screen, in the following aspects:</p>
<ul class="simple">
<li>A new form is created and submit is performed for the newly created form.</li>
<li>Parameter names of input items can be changed.</li>
</ul>
<p><a class="reference internal" href="tag/tag_reference.html#tag-change-param-name-tag"><span>changeParamName tag</span></a> is used to change parameter names.
Since the method of using <a class="reference internal" href="tag/tag_reference.html#tag-change-param-name-tag"><span>changeParamName tag</span></a> is same as that of the pop-up tags,
refer to <a class="reference internal" href="#tag-submit-change-param-name"><span>Change parameter names for pop-up</span></a>.</p>
<dl class="docutils">
<dt>Implementation example of file download</dt>
<dd><p class="first">Download a file on the server by clicking a button.</p>
<dl class="last docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Create the download button using downloadButton tag. --&gt;</span>
<span class="nt">&lt;n:downloadButton</span> <span class="na">uri=</span><span class="s">&quot;/action/download/tempFile&quot;</span><span class="nt">&gt;</span>Download<span class="nt">&lt;/n:downloadButton&gt;</span>
</pre></div>
</div>
</dd>
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">HttpResponse</span> <span class="nf">doTempFile</span><span class="o">(</span><span class="n">HttpRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// The process of acquiring a file follows the project implementation architecture.</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">getTempFile</span><span class="o">();</span>

    <span class="c1">// Use StreamResponse for file download.</span>
    <span class="c1">// In the constructor argument, specify true to delete</span>
    <span class="c1">//  the file to be downloaded and the file at the end of request process, otherwise specify false to not delete the file.</span>
    <span class="c1">// The file is deleted by the framework.</span>
    <span class="c1">// Configure to true as files for download are not usually required after downloading.</span>
    <span class="n">StreamResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StreamResponse</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

    <span class="c1">// Configure Content-Type header and Content-Disposition header.</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">&quot;application/pdf&quot;</span><span class="o">);</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentDisposition</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Implementation example of downloading a BLOB column</dt>
<dd><p class="first">Display a link for each row data in the table
and download the data corresponding to a selected link.</p>
<dl class="last docutils">
<dt>Table</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="28%" />
<col width="29%" />
<col width="19%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Column (logical name)</td>
<td>Column (physical name)</td>
<td>Data type</td>
<td>Supplementary notes</td>
</tr>
<tr class="row-even"><td>File ID</td>
<td>FILE_ID</td>
<td>CHAR(3)</td>
<td>PK</td>
</tr>
<tr class="row-odd"><td>File name</td>
<td>FILE_NAME</td>
<td>NVARCHAR2(100)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>File data</td>
<td>FILE_DATA</td>
<td>BLOB</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Assume that a list of row data</span>
<span class="c">  is configured in the request scope with the name records.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;c:forEach</span> <span class="na">var=</span><span class="s">&quot;record&quot;</span> <span class="na">items=</span><span class="s">&quot;${records}&quot;</span> <span class="na">varStatus=</span><span class="s">&quot;status&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;n:set</span> <span class="na">var=</span><span class="s">&quot;fileId&quot;</span> <span class="na">name=</span><span class="s">&quot;record.fileId&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="c">&lt;!-- Create a link using downloadLink tag. --&gt;</span>
    <span class="nt">&lt;n:downloadLink</span> <span class="na">uri=</span><span class="s">&quot;/action/download/tempFile&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;n:write</span> <span class="na">name=</span><span class="s">&quot;record.fileName&quot;</span> <span class="nt">/&gt;</span>(<span class="nt">&lt;n:write</span> <span class="na">name=</span><span class="s">&quot;fileId&quot;</span> <span class="nt">/&gt;</span>)
      <span class="c">&lt;!-- Configure the fileId parameter in the param tag to distinguish the selected link. --&gt;</span>
      <span class="nt">&lt;n:param</span> <span class="na">paramName=</span><span class="s">&quot;fileId&quot;</span> <span class="na">name=</span><span class="s">&quot;fileId&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/n:downloadLink&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/c:forEach&gt;</span>
</pre></div>
</div>
</dd>
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">HttpResponse</span> <span class="nf">tempFile</span><span class="o">(</span><span class="n">HttpRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// Acquire row data corresponding to the link selected using fileId parameter.</span>
    <span class="n">SqlRow</span> <span class="n">record</span> <span class="o">=</span> <span class="n">getRecord</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="c1">// Use StreamResponse class for downloading BLOB.</span>
    <span class="n">StreamResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StreamResponse</span><span class="o">((</span><span class="n">Blob</span><span class="o">)</span> <span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;FILE_DATA&quot;</span><span class="o">));</span>

    <span class="c1">// Configure Content-Type header and Content-Disposition header.*/</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">&quot;image/jpeg&quot;</span><span class="o">);</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentDisposition</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;FILE_NAME&quot;</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Implementation example of downloading a data record</dt>
<dd><p class="first">Download all the data in a table in CSV format.</p>
<dl class="last docutils">
<dt>Table</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="28%" />
<col width="29%" />
<col width="19%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Column (logical name)</td>
<td>Column (physical name)</td>
<td>Data type</td>
<td>Supplementary notes</td>
</tr>
<tr class="row-even"><td>Message ID</td>
<td>MESSAGE_ID</td>
<td>CHAR(8)</td>
<td>PK</td>
</tr>
<tr class="row-odd"><td>Language</td>
<td>LANG</td>
<td>CHAR(2)</td>
<td>PK</td>
</tr>
<tr class="row-even"><td>Message</td>
<td>MESSAGE</td>
<td>NVARCHAR2(200)</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</dd>
<dt>Format definition</dt>
<dd><div class="first last highlight-bash"><div class="highlight"><pre><span></span><span class="c1">#-------------------------------------------------------------------------------</span>
<span class="c1"># Message list in CSV file format</span>
<span class="c1"># Place in the location specified in the project with the file name N11AA001.fmt.</span>
<span class="c1">#-------------------------------------------------------------------------------</span>
file-type:        <span class="s2">&quot;Variable&quot;</span>
text-encoding:    <span class="s2">&quot;Shift_JIS&quot;</span> <span class="c1"># Character encoding of string type field</span>
record-separator: <span class="s2">&quot;\n&quot;</span>        <span class="c1"># Record delimiting character</span>
field-separator:  <span class="s2">&quot;,&quot;</span>         <span class="c1"># Field delimiting character</span>

<span class="o">[</span>header<span class="o">]</span>
<span class="m">1</span>   messageId    N <span class="s2">&quot;Message ID&quot;</span>
<span class="m">2</span>   lang         N <span class="s2">&quot;Language&quot;</span>
<span class="m">3</span>   message      N <span class="s2">&quot;Message&quot;</span>

<span class="o">[</span>data<span class="o">]</span>
<span class="m">1</span>   messageId    X <span class="c1"># Message ID</span>
<span class="m">2</span>   lang         X <span class="c1"># Language</span>
<span class="m">3</span>   message      N <span class="c1"># Message</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Implement the download button using downloadSubmit tag. --&gt;</span>
<span class="nt">&lt;n:downloadSubmit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/download/tempFile&quot;</span> <span class="na">value=</span><span class="s">&quot;Download&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">HttpResponse</span> <span class="nf">doCsvDataRecord</span><span class="o">(</span><span class="n">HttpRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// Acquire the record.</span>
    <span class="n">SqlResultSet</span> <span class="n">records</span> <span class="o">=</span> <span class="n">getRecords</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="c1">// Use DataRecordResponse class for downloading data records.</span>
    <span class="c1">// Specify the logical name of base path and</span>
    <span class="c1">//  file name of the format definition to the constructor argument.</span>
    <span class="n">DataRecordResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataRecordResponse</span><span class="o">(</span><span class="s">&quot;format&quot;</span><span class="o">,</span> <span class="s">&quot;N11AA001&quot;</span><span class="o">);</span>

    <span class="c1">// Write the header using DataRecordResponse#write method.</span>
    <span class="c1">// To use the default header information specified in the format definition,</span>
    <span class="c1">// specify an empty map.</span>
    <span class="n">response</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;header&quot;</span><span class="o">,</span> <span class="n">Collections</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span><span class="n">emptyMap</span><span class="o">());</span>

    <span class="c1">// Write the record using DataRecordResponse#write method.</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">SqlRow</span> <span class="n">record</span> <span class="o">:</span> <span class="n">records</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// Edit the record here.</span>

        <span class="n">response</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;data&quot;</span><span class="o">,</span> <span class="n">record</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Configure Content-Type header and Content-Disposition header.*/</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">&quot;text/csv; charset=Shift_JIS&quot;</span><span class="o">);</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setContentDisposition</span><span class="o">(</span><span class="s">&quot;Message list.csv&quot;</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="preventing-double-submission">
<span id="tag-double-submission"></span><h3><a class="toc-backref" href="#id21">7.19.4.16. Preventing double submission</a><a class="headerlink" href="#preventing-double-submission" title="Permalink to this headline">¶</a></h3>
<p>Double submission prevention is used on screens requesting processes that result in a commit to the database.
There are two methods for preventing double submission, in the client method and in the server method, which are used in combination.</p>
<p>In the client, if the user double-clicks a button by mistake,
or if the user sends a request but clicks the button again because no response is returned from the server,
then the request is prevented from being sent more than once.</p>
<p>In the server, the application is prevented from receiving requests that are already processed so that the requests are not processed redundantly by the application,
for example, when the screen navigates from the completion screen to the confirmation screen using the back button of the browser and is submitted again.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>On the screen that prevents double submission, there are the following concerns if only the client method or the server method is used:</p>
<ul class="last simple">
<li>If only the client method is used, then there is a risk that the request will be processed redundantly.</li>
<li>If only the server method is used, and if a request is sent twice by double-clicking the button,
then a double submission error may be returned depending on the processing order in the server, and the process result may not be returned to the user.</li>
</ul>
</div>
<dl class="docutils" id="tag-double-submission-client-side">
<dt>Preventing double submission in the client</dt>
<dd><p class="first">This is implemented by using JavaScript in the client.
When the user submits for the first time, the onclick attribute of the element associated with submit is overwritten, and the subsequent submissions are prevented by not sending the requests to the server .
In the case of a button, the disabled attribute is configured so that the button cannot be clicked on the screen.</p>
<p>The following custom tags can be used:</p>
<dl class="docutils">
<dt>Submit form</dt>
<dd><div class="first last line-block">
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-submit-tag"><span>submit tag</span></a> (button of input tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-button-tag"><span>button tag</span></a> (button of button tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-submit-link-tag"><span>submitLink tag</span></a> (link)</div>
</div>
</dd>
<dt>Submit for download</dt>
<dd><div class="first last line-block">
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-download-submit-tag"><span>downloadSubmit tag</span></a> (button of input tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-download-button-tag"><span>downloadButton tag</span></a> (button of button tag)</div>
<div class="line"><a class="reference internal" href="tag/tag_reference.html#tag-download-link-tag"><span>downloadLink tag</span></a> (link)</div>
</div>
</dd>
</dl>
<p>By configuring the allowDoubleSubmission attribute of the above custom tags to <code class="docutils literal"><span class="pre">false</span></code>,
double submission is prevented only for specific buttons and links.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">Since the register button commits to the database, prevent double submission only for the register button.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  allowDoubleSubmission attribute: Whether to allow double submission.</span>
<span class="c">                                   Configure to true when allowing double submission; otherwise configure to false.</span>
<span class="c">                                   Default is true.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;back&quot;</span> <span class="na">value=</span><span class="s">&quot;Back&quot;</span> <span class="na">uri=</span><span class="s">&quot;./back&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;register&quot;</span> <span class="na">value=</span><span class="s">&quot;Register&quot;</span> <span class="na">uri=</span><span class="s">&quot;./register&quot;</span>
          <span class="na">allowDoubleSubmission=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">In a client screen where double submission is prevented,
if the user clicks the stop button of the browser because there is no response returned from the server following a submission
(when there is significant processing load in the server, etc.),
the button becomes disabled (inactive due to disabled attribute) and the user cannot submit again.
In such cases, the user can continue the process by using a button or a link other than the button used for submission.</p>
</div>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To add a behavior following an occurrence of double submission in the application,
refer to <a class="reference internal" href="#tag-double-submission-client-side-change"><span>Add a behavior when double submission occurs, with a double submission prevention in the client</span></a>.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="tag-double-submission-server-side">
<dt>Preventing double submission in the server</dt>
<dd><p class="first">In the server, a unique token is issued, which is retained in the server (session) and client (hidden tag)
and double submission is prevented by matching in the server. This token is valid for one check only.</p>
<p>For preventing double submission in the server, work is required for both,
configuration of the token using JSP or action, and checking the token using action.</p>
<dl class="docutils" id="tag-double-submission-token-setting">
<dt>Configure the token using JSP</dt>
<dd><p class="first">The token is configured by specifying useToken attribute of <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>.</p>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  useToken attribute: Whether to configure the token.</span>
<span class="c">                      Configure to true when configuring the token; otherwise configure to false.</span>
<span class="c">                      Default is false.</span>
<span class="c">                      When having a common JSP for the input and confirmation screens, default is configured to true for the confirmation screen.</span>
<span class="c">                      Hence, there is no need to configure when having a common JSP for the input and confirmation screens.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">useToken=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Configure the token using action</dt>
<dd>This configuration method is used when a template engine other than JSP is used.
Configure the token using <a class="reference internal" href="../handlers/web_interceptor/use_token.html#use-token-interceptor"><span>UseToken Interceptor</span></a>.
Refer to <a class="reference internal" href="../handlers/web_interceptor/use_token.html#use-token-interceptor"><span>UseToken Interceptor</span></a> for the detailed method of use.</dd>
<dt>Token check</dt>
<dd>To check the token, use <a class="reference internal" href="../handlers/web_interceptor/on_double_submission.html#on-double-submission-interceptor"><span>OnDoubleSubmission Interceptor</span></a>.
Refer to <a class="reference internal" href="../handlers/web_interceptor/on_double_submission.html#on-double-submission-interceptor"><span>OnDoubleSubmission Interceptor</span></a> for the detailed method of use.</dd>
<dt>Change the key stored in the session scope</dt>
<dd><p class="first">The issued token is saved with the key &#8220;/nablarch_session_token&#8221; in the session scope.
This key can be changed in the component configuration file.</p>
<dl class="last docutils">
<dt>Configuration example</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;webConfig&quot;</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.WebConfig&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Change the key to &quot;sessionToken&quot; --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;doubleSubmissionTokenSessionAttributeName&quot;</span> <span class="na">value=</span><span class="s">&quot;sessionToken&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Change the key stored in the request scope</dt>
<dd><p class="first">The issued token is stored with the key &#8220;nablarch_request_token&#8221; in the request scope so that it can be used when embedding in a template such as Thymeleaf.
This key can be changed in the component configuration file.</p>
<dl class="last docutils">
<dt>Configuration example</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;webConfig&quot;</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.WebConfig&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Change the key to &quot;requestToken&quot; --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;doubleSubmissionTokenRequestAttributeName&quot;</span> <span class="na">value=</span><span class="s">&quot;requestToken&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Change the name attribute when embedding in hidden</dt>
<dd><p class="first">When embedding the token in hidden, the value &#8220;nablarch_token&#8221; is configured to the name attribute.
This name attribute value can be changed in the component configuration file.</p>
<dl class="last docutils">
<dt>Configuration example</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;webConfig&quot;</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.WebConfig&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Change the value configured to the name attribute to &quot;hiddenToken&quot; --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;doubleSubmissionTokenParameterName&quot;</span> <span class="na">value=</span><span class="s">&quot;hiddenToken&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>When preventing double submission in the server, since the token is stored in the session on the server,
the token cannot be checked separately for multiple requests from the same user.</p>
<p>Only the transition of screens where double submission is prevented in the server
(Registration confirmation → Registration completion and Update confirmation → Update completion) cannot be performed in parallel
using multiple windows and multiple tabs by the same user.</p>
<p class="last">When the screen transitions are performed in parallel, the process is continued only for the screen that transitions to the confirmation screen later,
and for the screen that transitions to the confirmation screen first, double submission error occurs as the token is old.</p>
</div>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Token is issued by <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/token/UUIDV4TokenGenerator.html" title="nablarch.common.web.token.UUIDV4TokenGenerator">UUIDV4TokenGenerator</a>.
Random character strings of 36 characters are generated by
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/token/UUIDV4TokenGenerator.html" title="nablarch.common.web.token.UUIDV4TokenGenerator">UUIDV4TokenGenerator</a>.
To change the token issuing process, refer to <a class="reference internal" href="#tag-double-submission-server-side-change"><span>Change the token issuing process using double submission prevention in the server</span></a>.</p>
</div>
</dd>
</dl>
<div class="section" id="storing-server-side-tokens-in-the-database">
<h4><a class="toc-backref" href="#id22">7.19.4.16.1. Storing server-side tokens in the database</a><a class="headerlink" href="#storing-server-side-tokens-in-the-database" title="Permalink to this headline">¶</a></h4>
<p>In the default implementation, server-side tokens are stored in an HTTP session.
Therefore, sticky sessions and session replication must be used when scaling out the application server.</p>
<p>By using an implementation that stores server-side tokens in a database,
tokens can be shared among multiple application servers without the need for any particular application server configuration.</p>
<p>See <a class="reference internal" href="db_double_submit.html#db-double-submit"><span>Double submission prevention using the database</span></a> for details.</p>
<img alt="../../../_images/db-double-submit.png" src="../../../_images/db-double-submit.png" />
</div>
</div>
<div class="section" id="common-jsp-for-input-screen-and-confirmation-screen">
<span id="tag-make-common"></span><h3><a class="toc-backref" href="#id23">7.19.4.17. Common JSP for input screen and confirmation screen</a><a class="headerlink" href="#common-jsp-for-input-screen-and-confirmation-screen" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="tag/tag_reference.html#tag-reference-input"><span>custom tag for input items</span></a> can be used to perform output
for the confirmation screen using exactly the same JSP written for the input screen.</p>
<p>Use the following custom tags on the common JSP for input screen and confirmation screen.</p>
<dl class="docutils">
<dt><a class="reference internal" href="tag/tag_reference.html#tag-confirmation-page-tag"><span>confirmationPage tag</span></a></dt>
<dd>Used for specifying the path to the JSP of the input screen on the JSP of the confirmation screen, thus enabling the use of a common JSP for the input screen and the confirmation screen.</dd>
<dt><a class="reference internal" href="tag/tag_reference.html#tag-for-input-page-tag"><span>forInputPage tag</span></a></dt>
<dd>Used for specifying the part to be displayed only on the input screen.</dd>
<dt><a class="reference internal" href="tag/tag_reference.html#tag-for-confirmation-page-tag"><span>forConfirmationPage tag</span></a></dt>
<dd>Used for specifying the part to be displayed only on the confirmation screen.</dd>
<dt><a class="reference internal" href="tag/tag_reference.html#tag-ignore-confirmation-tag"><span>ignoreConfirmation tag</span></a></dt>
<dd>Used for specifying the part of the display for the Confirmation screen to be disabled on the confirmation screen.
For example, this is used when there is an item that uses checkbox and for this item a check field is to be displayed on the confirmation screen.</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Display control of the input and confirmation screens is performed for the input tags.
However, the operation is different for the following tags:</p>
<dl class="last docutils">
<dt><a class="reference internal" href="tag/tag_reference.html#tag-plain-hidden-tag"><span>plainHidden tag</span></a></dt>
<dd>This tag is output on both the input and confirmation screens, assuming that the tag is used for passing on the screen transition status etc. across screens.</dd>
<dt><a class="reference internal" href="tag/tag_reference.html#tag-hidden-store-tag"><span>hiddenStore tag</span></a></dt>
<dd>This tag is output on both the input and confirmation screens since the tag is used for passing on the data stored in <a class="reference internal" href="session_store.html#session-store"><span>Session Store</span></a> across screens.</dd>
</dl>
</div>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">Implementation example of a JSP that outputs the following screen, is shown.</p>
<img alt="../../../_images/make_common_input_confirm.png" src="../../../_images/make_common_input_confirm.png" />
<p></p>
<dl class="last docutils">
<dt>JSP of the Input screen</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:form&gt;</span>
  <span class="c">&lt;!--</span>
<span class="c">    For input fields, the same JSP is written for the input and confirmation screens.</span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.name&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;n:checkbox</span> <span class="na">name=</span><span class="s">&quot;form.useMail&quot;</span> <span class="na">label=</span><span class="s">&quot;Used&quot;</span> <span class="na">offLabel=</span><span class="s">&quot;Not used&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Plan<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;n:select</span> <span class="na">name=</span><span class="s">&quot;form.plan&quot;</span>
              <span class="na">listName=</span><span class="s">&quot;plans&quot;</span>
              <span class="na">elementLabelProperty=</span><span class="s">&quot;planName&quot;</span>
              <span class="na">elementValueProperty=</span><span class="s">&quot;planId&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="c">&lt;!--</span>
<span class="c">   Since the button display differs between the input and confirmation screens,</span>
<span class="c">   use forInputPage tag and forConfirmationPage tag.</span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;padding: 8px 0;&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;n:forInputPage&gt;</span>
      <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/sample/confirm&quot;</span> <span class="na">value=</span><span class="s">&quot;Confirm&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/n:forInputPage&gt;</span>
    <span class="nt">&lt;n:forConfirmationPage&gt;</span>
      <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/sample/showNew&quot;</span> <span class="na">value=</span><span class="s">&quot;Back&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/sample/register&quot;</span> <span class="na">value=</span><span class="s">&quot;Register&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/n:forConfirmationPage&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
<dt>JSP of the confirmation screen</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Specify the path to the JSP of the input screen.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:confirmationPage</span> <span class="na">path=</span><span class="s">&quot;./input.jsp&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="configuring-a-value-to-a-variable">
<span id="tag-set-variable"></span><h3><a class="toc-backref" href="#id24">7.19.4.18. Configuring a value to a variable</a><a class="headerlink" href="#configuring-a-value-to-a-variable" title="Permalink to this headline">¶</a></h3>
<p>For values output with the same content to multiple places within a page, such as screen title, maintainability
can be improved by referencing a value stored in a variable in the JSP.</p>
<p>The custom tag <a class="reference internal" href="tag/tag_reference.html#tag-set-tag"><span>set tag</span></a> is provided for configuring a value to a variable.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">Screen title is used by configuring to a variable.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify the variable name for the var attribute. --&gt;</span>
<span class="nt">&lt;n:set</span> <span class="na">var=</span><span class="s">&quot;title&quot;</span> <span class="na">value=</span><span class="s">&quot;User information registration&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="c">&lt;!-- Use write tag to output the variable. --&gt;</span>
  <span class="nt">&lt;title&gt;&lt;n:write</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="nt">/&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;h1&gt;&lt;n:write</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="nt">/&gt;&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since HTML escape process is not implemented with <a class="reference internal" href="tag/tag_reference.html#tag-set-tag"><span>set tag</span></a> when output using the variable configured using <a class="reference internal" href="tag/tag_reference.html#tag-set-tag"><span>set tag</span></a>,
<a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a> should be used for output as shown in the implementation example.</p>
</div>
<dl class="docutils">
<dt>Specify the scope for storing the variable</dt>
<dd><p class="first">The scope for storing the variable is specified with the scope attribute.
Specify “request” or “page” for the scope attribute.</p>
<p>When the scope attribute is not specified, the variable is configured in the request scope.</p>
<p class="last">Page scope is used when creating UI widgets that are shared throughout the application, and to prevent conflict with other JSP variables.</p>
</dd>
<dt>Set an array or a collection value to a variable</dt>
<dd><p class="first"><a class="reference internal" href="tag/tag_reference.html#tag-set-tag"><span>set tag</span></a> acquires the value as a single value by default when name attribute is specified.
In single value acquisition, if the value corresponding to the name attribute is an array or collection, the first element is returned.</p>
<p>In many cases, there is no problem if single value is returned by default,
however, when UI widgets that are shared throughout the application are created, sometimes the array or collection may have to be acquired without any changes.</p>
<p class="last">In such cases, by configuring the bySingleValue attribute of <a class="reference internal" href="tag/tag_reference.html#tag-set-tag"><span>set tag</span></a> to <code class="docutils literal"><span class="pre">false</span></code>,
it is possible to acquire the array or collection without any change.</p>
</dd>
</dl>
</div>
<div class="section" id="using-get-request">
<span id="tag-using-get"></span><h3><a class="toc-backref" href="#id25">7.19.4.19. Using GET request</a><a class="headerlink" href="#using-get-request" title="Permalink to this headline">¶</a></h3>
<p>In some cases, it is necessary to use GET request to support search engines crawlers, etc. and make it possible for users to bookmark URLs.</p>
<p>Custom tags output and use the hidden parameter since they implement functions
such as <a class="reference internal" href="#tag-hidden-encryption"><span>hidden encryption</span></a>
and <a class="reference internal" href="#tag-submit-change-parameter"><span>parameter addition</span></a>.
Therefore, if GET request is performed using <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>,
this hidden parameter is added to the URL in addition to the parameters required for the business function.
As a result, in addition to unnecessary parameters getting added, the request may not be performed properly due to the limitation on the length of the URL.</p>
<p>If GET is specified in the <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, the custom tag does not output the hidden parameter.
As a result, even if GET request is used in <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, the above problem does not occur.
However, due to the fact that the hidden parameter is not output, the use of the custom tag becomes restricted or the custom tag becomes unusable.
Here, the method of handling such custom tags is explained.</p>
<dl class="docutils">
<dt>Custom tags with usage restriction</dt>
<dd><p class="first">Custom tags with usage restriction are shown below:</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-checkbox-tag"><span>checkbox tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-code-checkbox-tag"><span>codeCheckbox tag</span></a></li>
</ul>
<p>These custom tags have a <a class="reference internal" href="#tag-checkbox-off-value"><span>function to configure a request parameter for the unchecked state</span></a>,
however, this function cannot be used for GET request since custom tags use <a class="reference internal" href="#tag-hidden-encryption"><span>hidden encryption</span></a> for processing.</p>
<dl class="last docutils">
<dt>Handling method</dt>
<dd>For GET request, determination of the unchecked state when checkboxes are used
is done by checking for null value of the said item after <a class="reference internal" href="validation.html#validation"><span>validation</span></a>.
Then, it is decided whether the checkboxes are checked or not based on the result of null check and the value for unchecked state is configured for the action.</dd>
</dl>
</dd>
<dt>Unusable custom tags</dt>
<dd><p class="first">Unusable custom tags are shown below:</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-using-get-hidden-tag"><span>hidden tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-submit-tag"><span>submit tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-button-tag"><span>button tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-submit-link-tag"><span>submitLink tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-popup-submit-tag"><span>popupSubmit tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-popup-button-tag"><span>popupButton tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-popup-link-tag"><span>popupLink tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-param-tag"><span>param tag</span></a></li>
<li><a class="reference internal" href="#tag-using-get-change-param-name-tag"><span>changeParamName tag</span></a></li>
</ul>
<p>The method of handling and an implementation example of unusable tags is shown below:</p>
<dl class="docutils" id="tag-using-get-hidden-tag">
<dt>hidden tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use <a class="reference internal" href="tag/tag_reference.html#tag-plain-hidden-tag"><span>plainHidden tag</span></a>.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:hidden</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:plainHidden</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-submit-tag">
<dt>submit tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use HTML input tag (type=”submit”).
For the action attribute of the <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, specify the URI corresponding to submit.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">method=</span><span class="s">&quot;GET&quot;</span> <span class="na">action=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-button-tag">
<dt>button tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use HTML button tag (type=”submit”).
For the action attribute of the <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a>, specify the URI corresponding to submit.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">method=</span><span class="s">&quot;GET&quot;</span> <span class="na">action=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-submit-link-tag">
<dt>submitLink tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use <a class="reference internal" href="tag/tag_reference.html#tag-a-tag"><span>a tag</span></a> and specify the JavaScript function that performs screen transition for the onclick attribute.
Write the function performing screen transition within the <a class="reference internal" href="tag/tag_reference.html#tag-script-tag"><span>script tag</span></a>.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:submitLink</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="na">id=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;n:a</span> <span class="na">href=</span><span class="s">&quot;javascript:void(0);&quot;</span> <span class="na">onclick=</span><span class="s">&quot;searchTest();&quot;</span><span class="nt">&gt;</span>Search <span class="nt">&lt;/n:a&gt;</span>
<span class="nt">&lt;n:script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  var searchTest = function() {
    var test = document.getElementById(&#39;test&#39;).value;
    location.href = &#39;search?test=&#39; + test;
  }
<span class="nt">&lt;/n:script&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-popup-submit-tag">
<dt>popupSubmit tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use the HTML input tag (type=”button”) and specify the JavaScript window.open() function for the onclick attribute.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:popupSubmit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span>
    <span class="na">popupWindowName=</span><span class="s">&quot;popupWindow&quot;</span> <span class="na">popupOption=</span><span class="s">&quot;width=700,height=500&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">method=</span><span class="s">&quot;GET&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span>
    <span class="na">onclick=</span><span class="s">&quot;window.open(&#39;search&#39;, &#39;popupWindow&#39;, &#39;width=700,height=500&#39;)&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-popup-button-tag">
<dt>popupButton tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use the HTML button tag (type=”submit”) and specify the JavaScript window.open() function for the onclick attribute.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:popupButton</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span>
    <span class="na">popupWindowName=</span><span class="s">&quot;popupWindow&quot;</span> <span class="na">popupOption=</span><span class="s">&quot;width=700,height=500&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">method=</span><span class="s">&quot;GET&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span>
    <span class="na">onclick=</span><span class="s">&quot;window.open(&#39;search&#39;, &#39;popupWindow&#39;, &#39;width=700,height=500&#39;)&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-popup-link-tag">
<dt>popupLink tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Use <a class="reference internal" href="tag/tag_reference.html#tag-a-tag"><span>a tag</span></a> and specify the JavaScript function that displays a pop-up window for the onclick attribute.
Write the function performing screen transition within the <a class="reference internal" href="tag/tag_reference.html#tag-script-tag"><span>script tag</span></a>.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:popupLink</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span>
    <span class="na">popupWindowName=</span><span class="s">&quot;popupWindow&quot;</span> <span class="na">popupOption=</span><span class="s">&quot;width=700,height=500&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="na">id=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;n:a</span> <span class="na">href=</span><span class="s">&quot;javascript:void(0);&quot;</span> <span class="na">onclick=</span><span class="s">&quot;openTest();&quot;</span> <span class="nt">&gt;</span>Search<span class="nt">&lt;/n:a&gt;</span>
<span class="nt">&lt;n:script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  var openTest = function() {
    var test = document.getElementById(&#39;test&#39;).value;
    window.open(&#39;search?test=&#39; + test,
                &#39;popupWindow&#39;, &#39;width=700,height=500&#39;)
  }
<span class="nt">&lt;/n:script&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-using-get-param-tag">
<dt>param tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>Write <a class="reference internal" href="tag/tag_reference.html#tag-form-tag"><span>form tag</span></a> for each button or link for which a parameter is to be added and configure each parameter within the form.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;n:param</span> <span class="na">paramName=</span><span class="s">&quot;changeParam&quot;</span> <span class="na">value=</span><span class="s">&quot;Test 1&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/n:submit&gt;</span>
  <span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;n:param</span> <span class="na">paramName=</span><span class="s">&quot;changeParam&quot;</span> <span class="na">value=</span><span class="s">&quot;Test 2&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/n:submit&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form</span> <span class="na">method=</span><span class="s">&quot;GET&quot;</span> <span class="na">action=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;n:set</span> <span class="na">var=</span><span class="s">&quot;test&quot;</span> <span class="na">value=</span><span class="s">&quot;Test 1&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;changeParam&quot;</span> <span class="na">value=</span><span class="s">&quot;&lt;n:write name=&#39;test&#39; /&gt;&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="nt">&lt;n:form</span> <span class="na">method=</span><span class="s">&quot;GET&quot;</span> <span class="na">action=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;n:set</span> <span class="na">var=</span><span class="s">&quot;test&quot;</span> <span class="na">value=</span><span class="s">&quot;Test 2&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;changeParam&quot;</span> <span class="na">value=</span><span class="s">&quot;&lt;n:write name=&#39;test&#39; /&gt;&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="last docutils" id="tag-using-get-change-param-name-tag">
<dt>changeParamName tag</dt>
<dd><dl class="first last docutils">
<dt>Handling method</dt>
<dd>The basic method of handling is the same as the <a class="reference internal" href="#tag-using-get-popup-link-tag"><span>popupLink tag</span></a>.
Specify the query string key with the parameter name to changed in the first argument of window.open()
within the function that displays a pop-up window.</dd>
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">POST</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;n:form&gt;</span>
  <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:popupSubmit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="na">uri=</span><span class="s">&quot;search&quot;</span>
      <span class="na">popupWindowName=</span><span class="s">&quot;popupWindow&quot;</span> <span class="na">popupOption=</span><span class="s">&quot;width=700,height=500&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;n:changeParamName</span> <span class="na">inputName=</span><span class="s">&quot;test&quot;</span> <span class="na">paramName=</span><span class="s">&quot;changeParam&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/n:popupSubmit&gt;</span>
<span class="nt">&lt;/n:form&gt;</span>

<span class="k">&lt;%-</span><span class="o">-</span> <span class="n">For</span> <span class="n">GET</span> <span class="o">--</span><span class="k">%&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="na">id=</span><span class="s">&quot;test&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span> <span class="na">onclick=</span><span class="s">&quot;openTest();&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;n:script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  var openTest = function() {
    var test = document.getElementById(&#39;test&#39;).value;
    window.open(&#39;search?changeParam=&#39; + test,
                &#39;popupWindow&#39;, &#39;width=700,height=500&#39;);
  }
<span class="nt">&lt;/n:script&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="output-of-a-value">
<span id="tag-write-value"></span><h3><a class="toc-backref" href="#id26">7.19.4.20. Output of a value</a><a class="headerlink" href="#output-of-a-value" title="Permalink to this headline">¶</a></h3>
<p>Use <a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a> to output a value.</p>
<p>Access the object set in the request scope for the action, by specifying the name attribute.
Refer to <a class="reference internal" href="#tag-access-rule"><span>Rules to access input/output data</span></a> for the method of specifying the name attribute.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><dl class="first last docutils">
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Configure an object in the request scope with the name &quot;person&quot;.</span>
<span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
<span class="n">person</span><span class="o">.</span><span class="na">setPersonName</span><span class="o">(</span><span class="s">&quot;Name&quot;</span><span class="o">);</span>
<span class="n">context</span><span class="o">.</span><span class="na">setRequestScopedVar</span><span class="o">(</span><span class="s">&quot;person&quot;</span><span class="o">,</span> <span class="n">person</span><span class="o">);</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Access the personName property of the object by specifying the name attribute. --&gt;</span>
<span class="nt">&lt;n:write</span> <span class="na">name=</span><span class="s">&quot;person.personName&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="output-of-a-value-without-html-escape">
<span id="tag-html-unescape"></span><h3><a class="toc-backref" href="#id27">7.19.4.21. Output of a value without HTML escape</a><a class="headerlink" href="#output-of-a-value-without-html-escape" title="Permalink to this headline">¶</a></h3>
<p>Use <a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a> to output a value set in the action etc. on the page.
However, to directly output the HTML tag in the variable without performing HTML escape, use the following custom tags.</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-html-unescape-pretty-print-tag"><span>prettyPrint tag</span></a></li>
<li><a class="reference internal" href="#tag-html-unescape-raw-write-tag"><span>rawWrite tag</span></a></li>
</ul>
<p>These custom tags are supposed to be used in a system that allows system administrators to configure maintenance information,
and only for specific screens and display areas.</p>
<dl class="docutils" id="tag-html-unescape-pretty-print-tag">
<dt><a class="reference internal" href="tag/tag_reference.html#tag-pretty-print-tag"><span>prettyPrint tag</span></a></dt>
<dd><p class="first">Custom tags that output HTML text formatting tags such as <code class="docutils literal"><span class="pre">&lt;b&gt;</span></code> and <code class="docutils literal"><span class="pre">&lt;del&gt;</span></code> without performing escape.
For usable HTML tags and attributes, arbitrary tags can be configured in
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setSafeTags-java.lang.String:A-" title="nablarch.common.web.tag.CustomTagConfig.setSafeTags(java.lang.String:A)">safeTags property</a> /
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setSafeAttributes-java.lang.String:A-" title="nablarch.common.web.tag.CustomTagConfig.setSafeAttributes(java.lang.String:A)">safeAttributes property</a>
in <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a>.
Refer to the link for tags and attributes that can be used by default.</p>
<blockquote>
<div></div></blockquote>
<div class="admonition important" id="tag-pretty-print-tag-deprecated">
<p class="first admonition-title">Important</p>
<p>This tag is not recommended due to the following problems:</p>
<ul class="simple">
<li>Not only the usable tags but also the attributes used with those tags must be configured in <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html" title="nablarch.common.web.tag.CustomTagConfig">CustomTagConfig</a>.
For example, to make <code class="docutils literal"><span class="pre">a</span></code> tag usable, it is not sufficient to add <code class="docutils literal"><span class="pre">a</span></code> tag to <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setSafeTags-java.lang.String:A-" title="nablarch.common.web.tag.CustomTagConfig.setSafeTags(java.lang.String:A)">CustomTagConfig#safeTags</a>&gt;,
but all the attributes such as <code class="docutils literal"><span class="pre">href</span></code> that are used with <code class="docutils literal"><span class="pre">a</span></code> tag in <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setSafeAttributes-java.lang.String:A-" title="nablarch.common.web.tag.CustomTagConfig.setSafeAttributes(java.lang.String:A)">CustomTagConfig#safeAttributes</a> must be defined.</li>
<li>Whether a character string that is input uses only the tags and attributes that are configured in <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html" title="nablarch.common.web.tag.CustomTagConfig">CustomTagConfig</a> is checked,
however whether the correct HTML has been output is not checked.</li>
</ul>
<p>Therefore, to implement a function that outputs a character string that the user has formatted according to their choice on the screen,
the implementation must be according to the PJ requirements by referring to the following procedure.</p>
<ol class="arabic simple">
<li>Using the HTML parser of OSS to parse the value input and validating that it contains no unusable HTML tags</li>
<li>Output to screen using <a class="reference internal" href="#tag-html-unescape-raw-write-tag"><span>rawWrite tag</span></a></li>
</ol>
<p class="last">In addition, for simple formatting, there is a method in which the user inputs using Markdown,
and the Markdown is converted to HTML using the JavaScript library of OSS.</p>
</div>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If the contents of a variable output by <a class="reference internal" href="tag/tag_reference.html#tag-pretty-print-tag"><span>prettyPrint tag</span></a> can be configured arbitrarily by an unspecified user,
it may result in a vulnerability.
Therefore, care must be taken with the selection when configuring usable HTML tags and attributes.
For example, &lt;script&gt; tag and onclick attribute must not be made usable as doing so directly leads to cross-site scripting (XSS) vulnerability.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="tag-html-unescape-raw-write-tag">
<dt><a class="reference internal" href="tag/tag_reference.html#tag-raw-write-tag"><span>rawWrite tag</span></a></dt>
<dd><p class="first">Custom tags that output the contents of a character string in a variable as it is without performing escape.</p>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If the contents of a variable output by <a class="reference internal" href="tag/tag_reference.html#tag-raw-write-tag"><span>rawWrite tag</span></a> can be configured arbitrarily by an unspecified user,
it will directly lead to cross-site scripting (XSS) vulnerability.
Therefore, careful consideration is required when using <a class="reference internal" href="tag/tag_reference.html#tag-raw-write-tag"><span>rawWrite tag</span></a>.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="output-of-values-after-formatting">
<span id="tag-format-value"></span><h3><a class="toc-backref" href="#id28">7.19.4.22. Output of values after formatting</a><a class="headerlink" href="#output-of-values-after-formatting" title="Permalink to this headline">¶</a></h3>
<p>The custom tags provide a function to format and output values such as date and amount in an easy-to-see format.</p>
<p>There are two methods of formatting, namely, the method that uses <a class="reference internal" href="format.html#format"><span>Formatter</span></a> and the method that uses valueFormat attribute.
The method of formatting that uses <a class="reference internal" href="format.html#format"><span>Formatter</span></a> is recommended for the following reasons:</p>
<blockquote>
<div><ul class="simple">
<li>In the method of formatting that uses <a class="reference internal" href="format.html#format"><span>Formatter</span></a>, the configuration can be consolidated at one place since this method shares the components
that are used for format processing in other output functions such as file output and messaging. Also, there are no limitations on the tags that can be used.</li>
<li>The method of formatting that uses valueFormat attribute is implemented independently by the custom tags and can be used only with the custom tags.
Hence, the separate configuration is required for formatting in other output functions.
Due to this, the configuration related to formatting exists at multiple places and the management becomes complicated.
In addition, valueFormat attribute can be used only with <a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a>.</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt><a class="reference internal" href="format.html#format"><span>Formatter</span></a></dt>
<dd><p class="first">When using <a class="reference internal" href="format.html#format"><span>Formatter</span></a>, use <code class="docutils literal"><span class="pre">n:formatByDefault</span></code> or <code class="docutils literal"><span class="pre">n:format</span></code> in the EL expression and configure the formatted character string for the value attribute.</p>
<p>EL expression is a writing method that makes it possible to output an operation result using a simple syntax in JSP. The evaluation result is output as it is using <code class="docutils literal"><span class="pre">${&lt;Expression</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">evaluated&gt;}</span></code> syntax.</p>
<p>By using <code class="docutils literal"><span class="pre">n:formatByDefault</span></code> and <code class="docutils literal"><span class="pre">n:format</span></code> within the EL expression, the value can be formatted by calling <code class="docutils literal"><span class="pre">FormatterUtil</span></code> of <a class="reference internal" href="format.html#format"><span>Formatter</span></a>.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="c">&lt;!-- When formatted using the default formatter pattern</span>
<span class="c">  The name of the formatter used is specified in the first argument</span>
<span class="c">  The value to be formatted is specified in the second argument</span>
<span class="c">  For the value attribute, n:formatByDefault call is written using EL expression--&gt;</span>
<span class="p">&lt;</span><span class="nt">n:write</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;${n:formatByDefault(&#39;dateTime&#39;, project.StartDate)}&quot;</span> <span class="p">/&gt;</span>

<span class="c">&lt;!-- When formatted using the specified pattern</span>
<span class="c">  The name of the formatter used is specified in the first argument</span>
<span class="c">  The value to be formatted is specified in the second argument</span>
<span class="c">  The formatting pattern is specified in the third argument</span>
<span class="c">  For the value attribute, n:format call in written using EL expression --&gt;</span>
<span class="p">&lt;</span><span class="nt">n:text</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;project.StartDate&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;${n:format(&#39;dateTime&#39;, project.StartDate, &#39;yyyy年MM月dd日&#39;)}&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p>Request parameters cannot be referenced in EL expression.
Therefore, when checking the value input by the web application user using <a class="reference internal" href="validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a>,
the following must be configured:</p>
<p><a class="reference internal" href="validation/bean_validation.html#bean-validation-onerror"><span>Request parameters are to be obtained from the request scope even when there is a validation error</span></a></p>
<p>If the above configuration cannot be used, then the value must be acquiredfrom the request parameter using <code class="docutils literal"><span class="pre">n:set</span></code> and output after setting in the page scope.</p>
<p>Implementation examples</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:set</span> <span class="na">var=</span><span class="s">&quot;projectEndDate&quot;</span> <span class="na">name=</span><span class="s">&quot;form.projectEndDate&quot;</span> <span class="na">scope=</span><span class="s">&quot;page&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.projectEndDate&quot;</span> <span class="na">nameAlias=</span><span class="s">&quot;form.date&quot;</span>
  <span class="na">value=</span><span class="s">&quot;${n:formatByDefault(&#39;dateTime&#39;, projectEndDate)}&quot;</span>
  <span class="na">cssClass=</span><span class="s">&quot;form-control datepicker&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;input-error&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
</dd>
<dt>valueFormat attribute</dt>
<dd><p class="first">The formatted value is output by specifying valueFormat attribute.When valueFormat attribute is not specified, the value is output without formatting.
The only usable tags are <a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a>.</p>
<p>The format is specified using <code class="docutils literal"><span class="pre">data</span> <span class="pre">type{pattern}</span></code> format.
The data types provided by default in the custom tags are shown below:</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-format-yyyymmdd"><span>yyyymmdd (date)</span></a></li>
<li><a class="reference internal" href="#tag-format-yyyymm"><span>yyyymm (year month)</span></a></li>
<li><a class="reference internal" href="#tag-format-datetime"><span>dateTime (date and time)</span></a></li>
<li><a class="reference internal" href="#tag-format-decimal"><span>decimal (decimal number)</span></a></li>
</ul>
<dl class="docutils" id="tag-format-yyyymmdd">
<dt>yyyymmdd</dt>
<dd><p class="first">Date format.</p>
<p>For the value, specify a character string in yyyyMMdd format or the pattern format.
For the pattern, specify the syntax specified by <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" title="java.text.SimpleDateFormat">SimpleDateFormat</a>.
For pattern characters, only y (year), M (month) and d (date of a month) can be specified.
When the pattern character string is omitted, default pattern configured in the <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a> (yyyymmddPattern property) is used.</p>
<p>Also, locale of the format can be specified using the delimiting character <code class="docutils literal"><span class="pre">|</span></code> after the pattern.
When locale is not specified explicitly, the language in
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/ThreadContext.html" title="nablarch.core.ThreadContext">ThreadContext</a> is used.
When <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/ThreadContext.html" title="nablarch.core.ThreadContext">ThreadContext</a> is not configured,
default locale value of the system is used.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-properties"><div class="highlight"><pre><span></span><span class="c"># Default pattern and the locale configured in the thread context are used.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;yyyymmdd&quot;</span>

<span class="c"># Explicitly specified pattern and the locale configured in the thread context are used.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;yyyymmdd{yyyy/MM/dd}&quot;</span>

<span class="c"># When using default pattern and specifying only the locale.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;yyyymmdd{|ja}&quot;</span>

<span class="c"># When explicitly specifying both the pattern and the locale.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;yyyymmdd{yyyyMMd|ja}&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>When valueFormat attribute of <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a> is specified,
the formatted value is output also on the input screen.
When the input date is acquired by action, <a class="reference internal" href="#tag-window-scope"><span>window scope</span></a> and
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/date/YYYYMMDDConvertor.html" title="nablarch.common.date.YYYYMMDDConvertor">date converter provided by the Nablarch original validation</a>
are used.
<a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a>, <a class="reference internal" href="#tag-window-scope"><span>window scope</span></a>
and <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/date/YYYYMMDDConvertor.html" title="nablarch.common.date.YYYYMMDDConvertor">date converter</a>
work together to perform value conversion and validation using the pattern specified for the valueFormat attribute.</p>
<p class="last">Further, <a class="reference internal" href="validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> is not supported for the valueFormat attribute of <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a>.</p>
</div>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p class="last">When <a class="reference internal" href="#tag-window-scope"><span>window scope</span></a> is not used, validation error occurs as the value of the valueFormat attribute
is not sent to the server even if valueFormat attribute of <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a> is specified.
In that case, input value can be checked by specifying the allowFormat attribute of
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/date/YYYYMMDD.html" title="nablarch.common.date.YYYYMMDD">YYYYMMDD</a> annotation.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="tag-format-yyyymm">
<dt>yyyymm</dt>
<dd><p class="first">Year and month format.</p>
<p class="last">Specify a character string in yyyyMM format or pattern format for the value.
Method of use is the same as <a class="reference internal" href="#tag-format-yyyymmdd"><span>yyyymmdd (date)</span></a>.</p>
</dd>
</dl>
<dl class="docutils" id="tag-format-datetime">
<dt>dateTime</dt>
<dd><p class="first">Date and time format.</p>
<p>Specify <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/util/Date.html" title="java.util.Date">Date</a> type for the value.
For the pattern,
specify the syntax specified by
<a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" title="java.text.SimpleDateFormat">SimpleDateFormat</a>.
The date and time according to the language and time zone configured in <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/ThreadContext.html" title="nablarch.core.ThreadContext">ThreadContext</a>
are output by default.
The locale and time zone can be specified explicitly by using the delimiting character <code class="docutils literal"><span class="pre">|</span></code> after the pattern character string.</p>
<p>By using <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a> (dateTimePattern property, patternSeparator property),
it is possible to configure the pattern default value and change the delimiting character <code class="docutils literal"><span class="pre">|</span></code>.</p>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-properties"><div class="highlight"><pre><span></span><span class="c"># When using default patten and the locale and time zone configured in ThreadContext.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;dateTime&quot;</span>

<span class="c"># When using default pattern and specifying only the locale and time zone.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;dateTime{|ja|Asia/Tokyo}&quot;</span>

<span class="c"># When using default pattern and specifying only the time zone.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;dateTime{||Asia/Tokyo}&quot;</span>

<span class="c"># When specifying the pattern, locale, as well as time zone.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;dateTime{yyyyMMMd(E) a hh:mm|ja|America/New_York}}&quot;</span>

<span class="c"># When specifying the pattern and time zone.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;dateTime{yy/MM/dd HH:mm:ss||Asia/Tokyo}&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="last docutils" id="tag-format-decimal">
<dt>decimal</dt>
<dd><p class="first">Decimal format</p>
<p>Specify the <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/lang/Number.html" title="java.lang.Number">Number</a> type or a character string of numerals for the value.
Character strings are formatted after removing the thousands separator (commas in 1,000,000).
For the pattern, specify the syntax specified by <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html" title="java.text.DecimalFormat">DecimalFormat</a>.</p>
<p>By default, the value is output in the language-specific format
using the language configured in <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/ThreadContext.html" title="nablarch.core.ThreadContext">ThreadContext</a>.
By directly specifying the language, the value can be output in the format corresponding to the specified language.
The language is specified by adding a language after the delimiting character <code class="docutils literal"><span class="pre">|</span></code> at the end of the pattern.</p>
<p>The delimiting character <code class="docutils literal"><span class="pre">|</span></code> can be changed using the <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a> (patternSeparator property).</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-properties"><div class="highlight"><pre><span></span><span class="c"># When using the language configured in ThreadContext and specifying only the pattern.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;decimal{###,###,###.000}&quot;</span>

<span class="c"># When specifying the pattern and the language</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;decimal{###,###,###.000|ja}&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Since only formatting of values is performed in this function, the configuration for the rounding operation is not performed. (default of <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html" title="java.text.DecimalFormat">DecimalFormat</a> is used.)</p>
<p class="last">To perform the rounding process, it should be performed in the application, and formatting should be performed using this function.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>When the valueFormat attribute of <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a> is specified, the formatted value is output also on the input screen.
To acquire the input numeric value by action, use the numeric converter (
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/validation/convertor/BigDecimalConvertor.html" title="nablarch.core.validation.convertor.BigDecimalConvertor">BigDecimalConvertor</a>,
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/validation/convertor/IntegerConvertor.html" title="nablarch.core.validation.convertor.IntegerConvertor">IntegerConvertor</a> and
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/validation/convertor/LongConvertor.html" title="nablarch.core.validation.convertor.LongConvertor">LongConvertor</a>
).
<a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a> and numeric converter work together to perform value conversion and validation corresponding to the language specified for the valueFormat attribute.</p>
<p class="last">Further, <a class="reference internal" href="validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> is not supported for the valueFormat attribute of <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a>.</p>
</div>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p>When specifying the thousands separator and decimal point in the pattern, always use a comma for the thousands separator and a dot for the decimal point, regardless of the language.</p>
<div class="last highlight-properties"><div class="highlight"><pre><span></span><span class="c"># For es (Spanish), the thousands separator is formatted to a dot and the decimal point is formatted to a comma.</span>
<span class="c"># In pattern specification, always specify a comma as the thousands delimiter and a dot as the decimal point.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;decimal{###,###,###.000|es}&quot;</span>

<span class="c"># The following will throw a runtime exception due to an invalid pattern specification.</span>
<span class="na">valueFormat</span><span class="o">=</span><span class="s">&quot;decimal{###.###.###,000|es}&quot;</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="performing-error-display">
<span id="tag-write-error"></span><h3><a class="toc-backref" href="#id29">7.19.4.23. Performing error display</a><a class="headerlink" href="#performing-error-display" title="Permalink to this headline">¶</a></h3>
<p>The error display provides the following functions:</p>
<ul class="simple">
<li><a class="reference internal" href="#tag-write-error-errors-tag"><span>List of error messages</span></a></li>
<li><a class="reference internal" href="#tag-write-error-error-tag"><span>Individual display of error messages</span></a></li>
<li><a class="reference internal" href="#tag-write-error-css"><span>Highlight display of input items</span></a></li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">In the custom tags used for error display,
error messages are output by acquiring <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/message/ApplicationException.html" title="nablarch.core.message.ApplicationException">ApplicationException</a>
from the request scope.
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/core/message/ApplicationException.html" title="nablarch.core.message.ApplicationException">ApplicationException</a> is configured in the request scope
using <a class="reference internal" href="../handlers/web_interceptor/on_error.html#on-error-interceptor"><span>OnError Interceptor</span></a>.</p>
</div>
<dl class="docutils" id="tag-write-error-errors-tag">
<dt>List of error messages</dt>
<dd><p class="first">Use <a class="reference internal" href="tag/tag_reference.html#tag-errors-tag"><span>errors tag</span></a> to display error messages in a list format at the top of the screen.</p>
<dl class="last docutils">
<dt>Display all error messages</dt>
<dd><p class="first"></p>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify “all” for the filter attribute. --&gt;</span>
<span class="nt">&lt;n:errors</span> <span class="na">filter=</span><span class="s">&quot;all&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output result</dt>
<dd><img alt="../../../_images/errors_all.png" class="first last" src="../../../_images/errors_all.png" />
</dd>
</dl>
</dd>
<dt>Display only the error messages not corresponding to the input items</dt>
<dd><p class="first"></p>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><dl class="first last docutils">
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="c1">// ApplicationException is thrown by correlation validation with the database, etc.</span>
<span class="k">throw</span> <span class="k">new</span> <span class="n">ApplicationException</span><span class="o">(</span>
  <span class="n">MessageUtil</span><span class="o">.</span><span class="na">createMessage</span><span class="o">(</span><span class="n">MessageLevel</span><span class="o">.</span><span class="na">ERROR</span><span class="o">,</span> <span class="s">&quot;errors.duplicateName&quot;</span><span class="o">));</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify &quot;global&quot; for the filter attribute. --&gt;</span>
<span class="nt">&lt;n:errors</span> <span class="na">filter=</span><span class="s">&quot;global&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Output result</dt>
<dd><img alt="../../../_images/errors_global.png" class="first last" src="../../../_images/errors_global.png" />
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-write-error-error-tag">
<dt>Individual display of error messages</dt>
<dd><p class="first">Use <a class="reference internal" href="tag/tag_reference.html#tag-error-tag"><span>error tag</span></a> to display an error message for each input item.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;label&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.userName&quot;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!-- Specify the same name as the input item for the name attribute. --&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.userName&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output result</dt>
<dd><img alt="../../../_images/error.png" class="first last" src="../../../_images/error.png" />
</dd>
</dl>
<p>Use <a class="reference internal" href="tag/tag_reference.html#tag-error-tag"><span>error tag</span></a>
also for displaying <a class="reference internal" href="validation/bean_validation.html#bean-validation-correlation-validation"><span>Performing Correlation Validation</span></a> error messages near specific items.</p>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><dl class="first last docutils">
<dt>Form</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Method for performing correlation validation</span>
<span class="c1">// Error messages are configured with this property name.</span>
<span class="nd">@AssertTrue</span><span class="o">(</span><span class="n">message</span> <span class="o">=</span> <span class="s">&quot;The password does not match.&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isComparePassword</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">password</span><span class="o">,</span> <span class="n">confirmPassword</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;label&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;n:password</span> <span class="na">name=</span><span class="s">&quot;form.password&quot;</span> <span class="na">nameAlias=</span><span class="s">&quot;form.comparePassword&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.password&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!--</span>
<span class="c">    Specify the property name specified in correlation validation for the name attribute.</span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.comparePassword&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;label&gt;</span>Password (for confirmation)<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;n:password</span> <span class="na">name=</span><span class="s">&quot;form.confirmPassword&quot;</span> <span class="na">nameAlias=</span><span class="s">&quot;form.comparePassword&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.confirmPassword&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Output result</dt>
<dd><img alt="../../../_images/error_correlation_validation.png" class="first last" src="../../../_images/error_correlation_validation.png" />
</dd>
</dl>
</dd>
</dl>
<dl class="docutils" id="tag-write-error-css">
<dt>Highlight display of input items</dt>
<dd><p class="first">In the custom tag for input items, add the CSS class name (default is “nablarch_error”)
for the original value of the class attribute of the input item that caused the error.</p>
<p>By specifying the style for this class name using CSS, the input item for which an error has occurred is highlighted.</p>
<p>Further, multiple input items can be linked by
specifying the nameAlias attribute in the custom tags for input items,
and multiple input items can be highlighted
when an error occurs during <a class="reference internal" href="validation/bean_validation.html#bean-validation-correlation-validation"><span>Performing Correlation Validation</span></a>.</p>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><dl class="first last docutils">
<dt>CSS</dt>
<dd><div class="first last highlight-css"><div class="highlight"><pre><span></span><span class="c">/* Specify background color of the input item for which error occurs. */</span>
<span class="nt">input</span><span class="p">.</span><span class="nc">nablarch_error</span><span class="o">,</span><span class="nt">select</span><span class="p">.</span><span class="nc">nablarch_error</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#FFFFB3</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;label&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
  <span class="c">&lt;!-- Specify correlation validation property name for the nameAlias attribute. --&gt;</span>
  <span class="nt">&lt;n:password</span> <span class="na">name=</span><span class="s">&quot;form.password&quot;</span> <span class="na">nameAlias=</span><span class="s">&quot;form.comparePassword&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.password&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.comparePassword&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;label&gt;</span>Password (for confirmation)<span class="nt">&lt;/label&gt;</span>
  <span class="c">&lt;!-- Specify correlation validation property name for the nameAlias attribute. --&gt;</span>
  <span class="nt">&lt;n:password</span> <span class="na">name=</span><span class="s">&quot;form.confirmPassword&quot;</span> <span class="na">nameAlias=</span><span class="s">&quot;form.comparePassword&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;n:error</span> <span class="na">name=</span><span class="s">&quot;form.confirmPassword&quot;</span> <span class="na">messageFormat=</span><span class="s">&quot;span&quot;</span> <span class="na">errorCss=</span><span class="s">&quot;alert alert-danger&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>Output result</dt>
<dd><img alt="../../../_images/error_css.png" class="first last" src="../../../_images/error_css.png" />
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="display-code-values">
<span id="tag-code-input-output"></span><h3><a class="toc-backref" href="#id30">7.19.4.24. Display code values</a><a class="headerlink" href="#display-code-values" title="Permalink to this headline">¶</a></h3>
<p>There are custom tags dedicated to code values
that output selection items and display items for code values acquired from <a class="reference internal" href="code.html#code"><span>Code Management</span></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-code-tag"><span>code tag</span></a> (code values)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-code-select-tag"><span>codeSelect tag</span></a> (pull-down for code values)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-code-checkbox-tag"><span>codeCheckbox tag</span></a> (checkbox for code values)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-code-radio-buttons-tag"><span>codeRadioButtons tag</span></a> (multiple radio buttons for code values)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-code-checkboxes-tag"><span>codeCheckboxes tag</span></a> (multiple checkboxes for code values)</li>
</ul>
<p>An implementation example of <a class="reference internal" href="tag/tag_reference.html#tag-code-tag"><span>code tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-code-select-tag"><span>codeSelect tag</span></a> is shown.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><p class="first">The <a class="reference internal" href="code.html#code"><span>Code Management</span></a> table is as follows:</p>
<dl class="last docutils">
<dt>Code pattern table</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="20%" />
<col width="26%" />
<col width="23%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ID</th>
<th class="head">VALUE</th>
<th class="head">PATTERN1</th>
<th class="head">PATTERN2</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GENDER</td>
<td>MALE</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>GENDER</td>
<td>FEMALE</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-even"><td>GENDER</td>
<td>OTHER</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
</dd>
<dt>Code name table</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="14%" />
<col width="18%" />
<col width="8%" />
<col width="20%" />
<col width="20%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ID</th>
<th class="head">VALUE</th>
<th class="head">LANG</th>
<th class="head">SORT_ORDER</th>
<th class="head">NAME</th>
<th class="head">SHORT_NAME</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GENDER</td>
<td>MALE</td>
<td>en</td>
<td>1</td>
<td>Male</td>
<td>M</td>
</tr>
<tr class="row-odd"><td>GENDER</td>
<td>FEMALE</td>
<td>en</td>
<td>2</td>
<td>Female</td>
<td>F</td>
</tr>
<tr class="row-even"><td>GENDER</td>
<td>OTHER</td>
<td>en</td>
<td>3</td>
<td>Other</td>
<td>O</td>
</tr>
</tbody>
</table>
</dd>
<dt><a class="reference internal" href="tag/tag_reference.html#tag-code-tag"><span>code tag</span></a> (code values)</dt>
<dd><dl class="first last docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Output of code values is controlled by specifying the following attributes.</span>
<span class="c">  codeId attribute: Code ID.</span>
<span class="c">  pattern attribute: Column name of the pattern used.</span>
<span class="c">                     Default is not specified.</span>
<span class="c">  optionColumnName attribute: Column name of option name to acquire.</span>
<span class="c">  labelPattern attribute: Pattern to format the label.</span>
<span class="c">                          The following placeholder can be used:</span>
<span class="c">                          $NAME$: Code name corresponding to code value</span>
<span class="c">                          $SHORTNAME$: Abbreviation of code corresponding to code value</span>
<span class="c">                          $OPTIONALNAME$: Option name of code corresponding to code value</span>
<span class="c">                                          When using this placeholder,</span>
<span class="c">                                          the optionColumnName attribute is required.</span>
<span class="c">                          $VALUE$: Code value</span>
<span class="c">                          Default is $NAME$.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:code</span> <span class="na">name=</span><span class="s">&quot;user.gender&quot;</span>
        <span class="na">codeId=</span><span class="s">&quot;GENDER&quot;</span> <span class="na">pattern=</span><span class="s">&quot;PATTERN1&quot;</span>
        <span class="na">labelPattern=</span><span class="s">&quot;$VALUE$:$NAME$($SHORTNAME$)&quot;</span>
        <span class="na">listFormat=</span><span class="s">&quot;div&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  If &quot;user.gender&quot; is &quot;FEMALE&quot;,</span>
<span class="c">  it is output with div tag as div is specified in listFormat attribute.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;div&gt;</span>FEMALE:Female(F)<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt><a class="reference internal" href="tag/tag_reference.html#tag-code-select-tag"><span>codeSelect tag</span></a> (pull-down for code values)</dt>
<dd><dl class="first last docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!--</span>
<span class="c">  Specification of attribute is the same as select tag.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;n:codeSelect</span> <span class="na">name=</span><span class="s">&quot;form.gender&quot;</span>
              <span class="na">codeId=</span><span class="s">&quot;GENDER&quot;</span> <span class="na">pattern=</span><span class="s">&quot;PATTERN2&quot;</span>
              <span class="na">labelPattern=</span><span class="s">&quot;$VALUE$-$SHORTNAME$&quot;</span>
              <span class="na">listFormat=</span><span class="s">&quot;div&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- If &quot;form.gender&quot; is &quot;FEMALE&quot; --&gt;</span>

<span class="c">&lt;!-- Input screen --&gt;</span>
<span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">&quot;form.gender&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;MALE&quot;</span><span class="nt">&gt;</span>MALE-M<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;FEMALE&quot;</span> <span class="na">selected=</span><span class="s">&quot;selected&quot;</span><span class="nt">&gt;</span>FEMALE-F<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>

<span class="c">&lt;!-- Confirm screen --&gt;</span>
<span class="nt">&lt;div&gt;</span>FEMALE-F<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">In custom tags, it is not possible to acquire code values according to the specified language.
In custom tags, an API is used in which the locale of <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/code/CodeUtil.html" title="nablarch.common.code.CodeUtil">CodeUtil</a> is not specified.
To acquire a code value using the language specification,
use <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/code/CodeUtil.html" title="nablarch.common.code.CodeUtil">CodeUtil</a>
in the action.</p>
</div>
</div>
<div class="section" id="output-of-messages">
<span id="tag-write-message"></span><h3><a class="toc-backref" href="#id31">7.19.4.25. Output of messages</a><a class="headerlink" href="#output-of-messages" title="Permalink to this headline">¶</a></h3>
<p>There are custom tags that output messages acquired using <a class="reference internal" href="message.html#message"><span>Message Management</span></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-message-tag"><span>message tag</span></a> (message)</li>
</ul>
<p>When multiple languagesare supported by one JSP file in the application that performs internationalization,
the text on the screen can be switched according to the language selected by the user, by using <a class="reference internal" href="tag/tag_reference.html#tag-message-tag"><span>message tag</span></a>.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify the message ID for the messageId attribute. --&gt;</span>
<span class="nt">&lt;n:message</span> <span class="na">messageId=</span><span class="s">&quot;page.not.found&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">  To specify option</span>
<span class="c">--&gt;</span>

<span class="c">&lt;!-- Specify the var attribute to acquire the text for embedding. --&gt;</span>
<span class="nt">&lt;n:message</span> <span class="na">var=</span><span class="s">&quot;title&quot;</span> <span class="na">messageId=</span><span class="s">&quot;title.user.register&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;n:message</span> <span class="na">var=</span><span class="s">&quot;appName&quot;</span> <span class="na">messageId=</span><span class="s">&quot;title.app&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- Configure the text for embedding for the option attribute. --&gt;</span>
<span class="nt">&lt;n:message</span> <span class="na">messageId=</span><span class="s">&quot;title.template&quot;</span> <span class="na">option0=</span><span class="s">&quot;${title}&quot;</span> <span class="na">option1=</span><span class="s">&quot;${appName}&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">  To change the language only for some messages within the screen</span>
<span class="c">--&gt;</span>

<span class="c">&lt;!-- Specify a language for the language attribute. --&gt;</span>
<span class="nt">&lt;n:message</span> <span class="na">messageId=</span><span class="s">&quot;page.not.found&quot;</span> <span class="na">language=</span><span class="s">&quot;ja&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">  If HTML escape is not required</span>
<span class="c">--&gt;</span>

<span class="c">&lt;!-- Specify false in the secure attribute. --&gt;</span>
<span class="nt">&lt;n:message</span> <span class="na">messageId=</span><span class="s">&quot;page.not.found&quot;</span> <span class="na">htmlEscape=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="switch-resource-path-for-each-language">
<span id="tag-change-resource-path-of-lang"></span><h3><a class="toc-backref" href="#id32">7.19.4.26. Switch resource path for each language</a><a class="headerlink" href="#switch-resource-path-for-each-language" title="Permalink to this headline">¶</a></h3>
<p>The custom tags that handle resource path have a function to dynamically switch the resource path based on the language configuration.
The following custom tags support resource path switching for each language.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-a-tag"><span>a tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-img-tag"><span>img tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-link-tag"><span>link tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-script-tag"><span>script tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-confirmation-page-tag"><span>confirmationPage tag</span></a> (common input and confirmation screen)</li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-include-tag"><span>include tag</span></a> (include)</li>
</ul>
<p>In these custom tags, switching is performed by acquiring the resource path
for each language using the subclass of
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/fw/web/i18n/ResourcePathRule.html" title="nablarch.fw.web.i18n.ResourcePathRule">ResourcePathRule</a>.
Refer to <a class="reference internal" href="../handlers/web/http_response_handler.html#http-response-handler-change-content-path"><span>Switching the content path for each language</span></a> for the subclass provided by default.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p><a class="reference internal" href="tag/tag_reference.html#tag-include-tag"><span>include tag</span></a> is provided to associate the dynamic include of JSP with resource path switching for each language.
Use <a class="reference internal" href="tag/tag_reference.html#tag-include-param-tag"><span>includeParam tag</span></a> to specify the parameter to be added at the time of dynamic include.</p>
<div class="last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- For the path attribute, specify the resource path to be included. --&gt;</span>
<span class="nt">&lt;n:include</span> <span class="na">path=</span><span class="s">&quot;/app_header.jsp&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--</span>
<span class="c">      Specify parameter name for the paramName attribute and value for the value attribute.</span>
<span class="c">      Specify the name attribute when using the value configured in the scope.</span>
<span class="c">      Specify either name attribute or value attribute.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;n:includeParam</span> <span class="na">paramName=</span><span class="s">&quot;title&quot;</span> <span class="na">value=</span><span class="s">&quot;User information details&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/n:include&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="prevent-browser-caching">
<h3><a class="toc-backref" href="#id33">7.19.4.27. Prevent browser caching</a><a class="headerlink" href="#prevent-browser-caching" title="Permalink to this headline">¶</a></h3>
<p>By preventing browser caching,
it is possible to prevent the previous screen from being displayed when the back button of the browser is clicked.
As a result, in an environment where multiple users use the same terminal,
leakage of personal information and confidential information by browser operation is prevented.</p>
<p><a class="reference internal" href="tag/tag_reference.html#tag-no-cache-tag"><span>noCache tag</span></a> is used to prevent browser caching.
Since the back button of the browser redisplays the cached screen during screen display,
use <a class="reference internal" href="tag/tag_reference.html#tag-no-cache-tag"><span>noCache tag</span></a> in the JSP of the screen that should not be cached.</p>
<dl class="docutils">
<dt>Implementation examples</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify a noCache tag within the head tag. --&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;n:noCache/&gt;</span>
  <span class="c">&lt;!-- Rest is omitted. --&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>When <a class="reference internal" href="tag/tag_reference.html#tag-no-cache-tag"><span>noCache tag</span></a> is specified, the following response header and HTML are returned to the browser.</p>
<dl class="docutils">
<dt>Response header</dt>
<dd><div class="first last highlight-bash"><div class="highlight"><pre><span></span>Expires Thu, <span class="m">01</span> Jan <span class="m">1970</span> <span class="m">00</span>:00:00 GMT
Cache-Control no-store, no-cache, must-revalidate, post-check<span class="o">=</span><span class="m">0</span>, pre-check<span class="o">=</span><span class="m">0</span>
Pragma no-cache
</pre></div>
</div>
</dd>
<dt>HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;pragma&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;no-cache&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;cache-control&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;no-cache&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;expires&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since the <a class="reference internal" href="tag/tag_reference.html#tag-no-cache-tag"><span>noCache tag</span></a> cannot be specified in the JSP included in <a class="reference internal" href="tag/tag_reference.html#tag-include-tag"><span>include tag</span></a> (&lt;jsp: include&gt;),
it must be specified in the forwarded JSP.
However, when preventing browser caching for the entire system,
create a <a class="reference internal" href="../nablarch/architecture.html#nablarch-architecture-handler-queue"><span>handler</span></a> in the project
and configure it uniformly so that implementation is not omitted in any JSP.
In the <a class="reference internal" href="../nablarch/architecture.html#nablarch-architecture-handler-queue"><span>handler</span></a>, configure the contents of the above response header example in the response header.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">According to the HTTP specification, only the response header should be specified,
but a meta tag is also specified for older browsers that do not conform to this specification.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Prevention of browser caching is not enabled for the communication on the following browsers where HTTP/1.0 and SSL (https) are not used.
Therefore, screens that prevent browser caching must be designed to use SSL communication.</p>
<p class="last">Browsers with problems: IE6, IE7, IE8</p>
</div>
</div>
<div class="section" id="not-allowing-the-cache-in-the-client-to-be-referenced-when-static-content-is-changed">
<h3><a class="toc-backref" href="#id34">7.19.4.28. Not allowing the cache in the client to be referenced when static content is changed</a><a class="headerlink" href="#not-allowing-the-cache-in-the-client-to-be-referenced-when-static-content-is-changed" title="Permalink to this headline">¶</a></h3>
<p>When caching is enabled in the client (browser),
even if the static content placed on the server is replaced,
the cached old content may be displayed in the client instead of the latest content.</p>
<p>To avoid this problem, a function is provided in which a version is appended to the URI of the static content specified in the <code class="docutils literal"><span class="pre">href</span></code> attribute and <code class="docutils literal"><span class="pre">src</span></code> attribute of the following custom tags, using parameters.</p>
<ul class="simple">
<li><a class="reference internal" href="tag/tag_reference.html#tag-link-tag"><span>link tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-img-tag"><span>img tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-script-tag"><span>script tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-submit-tag"><span>submit tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-popup-submit-tag"><span>popupSubmit tag</span></a></li>
<li><a class="reference internal" href="tag/tag_reference.html#tag-download-submit-tag"><span>downloadSubmit tag</span></a></li>
</ul>
<p>As a result, the latest static content can be referenced instead of the cache in the client when the static content is replaced.</p>
<p>The version of the static content that is added using parameters is configured in the <a class="reference internal" href="repository.html#repository-environment-configuration"><span>configuration file (properties file)</span></a>.
This function is disabled if the version of the static content is not configured in the configuration file.</p>
<p>The version of the static content is specified with the key name <code class="docutils literal"><span class="pre">static_content_version</span></code>.</p>
<dl class="docutils">
<dt>Configuration example</dt>
<dd><div class="first last highlight-properties"><div class="highlight"><pre><span></span><span class="c"># Version of the static content</span>
<span class="na">static_content_version</span><span class="o">=</span><span class="s">1.0</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>This function is deprecated because of the following reasons:</p>
<ul class="simple">
<li>Since only one version of the static content can be defined in the application using <code class="docutils literal"><span class="pre">static_content_version</span></code>,
if the value of <code class="docutils literal"><span class="pre">static_content_version</span></code> is changed, all static content (including unchanged static content)
in the application references the latest static content instead of the cache.</li>
</ul>
<p class="last">The file name of the static content should be changed instead of using this function
so that the cache is not referenced when the static content is changed.</p>
</div>
</div>
<div class="section" id="specify-any-attribute">
<span id="dynamic-attribute"></span><h3><a class="toc-backref" href="#id35">7.19.4.29. Specify any attribute</a><a class="headerlink" href="#specify-any-attribute" title="Permalink to this headline">¶</a></h3>
<p>Dynamic attributes are handled in custom tags using the <code class="docutils literal"><span class="pre">javax.servlet.jsp.tagext.DynamicAttributes</span></code> interface.
This makes it possible to output arbitrary attributes including attributes added in HTML5 with custom tags.
For tags that output HTML, dynamic attributes can be used.</p>
<div class="section" id="handling-of-boolean-attributes">
<h4><a class="toc-backref" href="#id36">7.19.4.29.1. Handling of Boolean attributes</a><a class="headerlink" href="#handling-of-boolean-attributes" title="Permalink to this headline">¶</a></h4>
<p>As with the existing custom tags, the Boolean attributes of dynamic attributes can be controlled by specifying <cite>true</cite> / <cite>false</cite> for the value to output or not.
By default, the following attributes are regarded as logical attributes.</p>
<ul class="simple">
<li>async</li>
<li>autofocus</li>
<li>checked</li>
<li>disabled</li>
<li>formnovalidate</li>
<li>hidden</li>
<li>ismap</li>
<li>itemscope</li>
<li>multiple</li>
<li>nomodule</li>
<li>novalidate</li>
<li>readonly</li>
<li>required</li>
<li>reversed</li>
<li>selected</li>
</ul>
<p>An example implementation of async is shown below.</p>
<blockquote>
<div><dl class="docutils">
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify true for Boolean attribute --&gt;</span>
<span class="nt">&lt;n:script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/javascripts/lib/jquery-ui.min.js&quot;</span> <span class="na">async=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Boolean attributes will be output --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/javascripts/lib/jquery-ui.min.js&quot;</span> <span class="na">async</span><span class="o">=</span><span class="s">&quot;async&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify false for Boolean attribute --&gt;</span>
<span class="nt">&lt;n:script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/javascripts/lib/jquery-ui.min.js&quot;</span> <span class="na">async=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
<dt>Output HTML</dt>
<dd><div class="first last highlight-html"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Boolean attributes will not be output --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/javascripts/lib/jquery-ui.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
<p>Attributes that are regarded as Boolean attributes can be modified.
To do so, configure the list of Boolean attributes to <a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setDynamicBooleanAttributes-java.util.List-" title="nablarch.common.web.tag.CustomTagConfig.setDynamicBooleanAttributes(java.util.List)">dynamicBooleanAttributes property</a> of <code class="docutils literal"><span class="pre">CustomTagConfig</span></code> .</p>
</div>
</div>
</div>
<div class="section" id="expansion-example">
<h2><a class="toc-backref" href="#id37">7.19.5. Expansion example</a><a class="headerlink" href="#expansion-example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adding-formatter">
<h3><a class="toc-backref" href="#id38">7.19.5.1. Adding formatter</a><a class="headerlink" href="#adding-formatter" title="Permalink to this headline">¶</a></h3>
<p>For the method of adding a formatter when using <a class="reference internal" href="format.html#format"><span>Formatter</span></a>,
refer to the section on adding a formatter of <a class="reference internal" href="format.html#format"><span>Formatter</span></a>.</p>
<p>When using the valueFormat attribute,
formatting is performed by the class that implements the
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/ValueFormatter.html" title="nablarch.common.web.tag.ValueFormatter">ValueFormatter</a>
interface.
The format can be changed by adding the implementation class to the component definition.</p>
<p>To add to the component definition, specify the class that implements
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/ValueFormatter.html" title="nablarch.common.web.tag.ValueFormatter">ValueFormatter</a>
as the value, and the data type name as the key in the Map type.</p>
<p>A configuration example for the default format supported by the framework is shown below.</p>
<p>The formatter map is added to the component definition with the name <code class="docutils literal"><span class="pre">valueFormatters</span></code>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;map</span> <span class="na">name=</span><span class="s">&quot;valueFormatters&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;yyyymmdd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value-component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.tag.YYYYMMDDFormatter&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;yyyymm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value-component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.tag.YYYYMMFormatter&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;dateTime&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value-component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.tag.DateTimeFormatter&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;decimal&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value-component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.tag.DecimalFormatter&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/map&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="change-the-judgment-process-used-for-button-link-display-control">
<span id="tag-submit-display-control-change"></span><h3><a class="toc-backref" href="#id39">7.19.5.2. Change the judgment process used for button/link display control</a><a class="headerlink" href="#change-the-judgment-process-used-for-button-link-display-control" title="Permalink to this headline">¶</a></h3>
<p>The judgment process used in the <a class="reference internal" href="#tag-submit-display-control"><span>Switching between display/no display of the button/link depending on permission check/service availability</span></a> can be changed by implementing the
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/DisplayControlChecker.html" title="nablarch.common.web.tag.DisplayControlChecker">DisplayControlChecker</a>
interface.
Specify the implementation class to
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setDisplayControlCheckers-java.util.List-" title="nablarch.common.web.tag.CustomTagConfig.setDisplayControlCheckers(java.util.List)">displayControlCheckers property</a>
in the <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a>.</p>
<dl class="docutils">
<dt>Configuration example</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;list</span> <span class="na">name=</span><span class="s">&quot;displayControlCheckers&quot;</span> <span class="nt">&gt;</span>
  <span class="c">&lt;!-- Configure the default DisplayControlChecker for service availability --&gt;</span>
  <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.common.web.tag.ServiceAvailabilityDisplayControlChecker&quot;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!-- For permission check, specify customized DisplayControlChecker in the project --&gt;</span>
  <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;com.sample.app.CustomPermissionDisplayControlChecker&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/list&gt;</span>

<span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;customTagConfig&quot;</span>
           <span class="na">class=</span><span class="s">&quot;nablarch.common.web.tag.CustomTagConfig&quot;</span><span class="nt">&gt;</span>
   <span class="c">&lt;!-- Configure the the judgment criteria. --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;displayControlCheckers&quot;</span> <span class="na">ref=</span><span class="s">&quot;displayControlCheckers&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="add-a-behavior-when-double-submission-occurs-with-a-double-submission-prevention-in-the-client">
<span id="tag-double-submission-client-side-change"></span><h3><a class="toc-backref" href="#id40">7.19.5.3. Add a behavior when double submission occurs, with a double submission prevention in the client</a><a class="headerlink" href="#add-a-behavior-when-double-submission-occurs-with-a-double-submission-prevention-in-the-client" title="Permalink to this headline">¶</a></h3>
<p>For adding a behavior during occurrence of double submission in the application,
using <a class="reference internal" href="#tag-double-submission-client-side"><span>double submission prevention on the client side</span></a>, implement the callback function in JavaScript.</p>
<p>The JavaScript function of the framework calls a callback function
if the callback function exists, when the second or subsequent submission request occurs.
The signature of the callback function is shown below:</p>
<div class="highlight-js"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * @param element Target element (button or link) for which double submission was performed</span>
<span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">nablarch_handleDoubleSubmission</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Describe the process here.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="change-the-token-issuing-process-using-double-submission-prevention-in-the-server">
<span id="tag-double-submission-server-side-change"></span><h3><a class="toc-backref" href="#id41">7.19.5.4. Change the token issuing process using double submission prevention in the server</a><a class="headerlink" href="#change-the-token-issuing-process-using-double-submission-prevention-in-the-server" title="Permalink to this headline">¶</a></h3>
<p>To change the token issuing process using
<a class="reference internal" href="#tag-double-submission-server-side"><span>double submission prevention in the server</span></a>,
implement the
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/token/TokenGenerator.html" title="nablarch.common.web.token.TokenGenerator">TokenGenerator</a> interface.
Add the implementation class to the component definition with the name <code class="docutils literal"><span class="pre">tokenGenerator</span></code>.</p>
</div>
</div>
<div class="section" id="custom-tag-rules">
<h2><a class="toc-backref" href="#id42">7.19.6. Custom tag rules</a><a class="headerlink" href="#custom-tag-rules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="naming-rules">
<span id="tag-naming-rule"></span><h3><a class="toc-backref" href="#id43">7.19.6.1. Naming rules</a><a class="headerlink" href="#naming-rules" title="Permalink to this headline">¶</a></h3>
<p>In the custom tags, the prefix <code class="docutils literal"><span class="pre">nablarch_</span></code> is used for the names prescribed by the custom tags,
such as CSS class name and JavaScript function name, to avoid duplication with individual applications.
Therefore, names starting with <code class="docutils literal"><span class="pre">nablarch_</span></code> should not be used in individual applications.</p>
<p>The naming rules are applicable to the following:</p>
<ul class="simple">
<li>HTML attribute value</li>
<li>CSS class name</li>
<li>JavaScript function name and global variable name</li>
<li>Page scope, request scope and session scope variable names</li>
</ul>
</div>
<div class="section" id="rules-to-access-input-output-data">
<span id="tag-access-rule"></span><h3><a class="toc-backref" href="#id44">7.19.6.2. Rules to access input/output data</a><a class="headerlink" href="#rules-to-access-input-output-data" title="Permalink to this headline">¶</a></h3>
<p>The custom tags (such as <a class="reference internal" href="tag/tag_reference.html#tag-text-tag"><span>text tag</span></a> and <a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a>) that output the input items and output items,
access the data to be output based on the value of the name attribute.</p>
<p>Specify the following for the name attribute according to the type of object:</p>
<ul class="simple">
<li>When accessing the object/map properties, specify the dot separator.</li>
<li>When accessing the list/array elements, specify square brackets (index in parentheses).</li>
</ul>
<p>The search order is as follows, and the first value is used. If the value cannot be acquired, an empty string is output.</p>
<ol class="arabic simple">
<li>Page scope</li>
<li>Request scope</li>
<li>Request parameters</li>
<li>Session scope</li>
</ol>
<dl class="docutils">
<dt>Object implementation example</dt>
<dd><p class="first"></p>
<dl class="last docutils">
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Configure the object in the request scope.</span>
<span class="n">PersonForm</span> <span class="n">form</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PersonForm</span><span class="o">();</span>
<span class="n">form</span><span class="o">.</span><span class="na">setPersonName</span><span class="o">(</span><span class="s">&quot;Name&quot;</span><span class="o">);</span>
<span class="n">context</span><span class="o">.</span><span class="na">setRequestScopedVar</span><span class="o">(</span><span class="s">&quot;form&quot;</span><span class="o">,</span> <span class="n">form</span><span class="o">);</span>
<span class="k">return</span> <span class="k">new</span> <span class="n">HttpResponse</span><span class="o">(</span><span class="s">&quot;/WEB-INF/view/sample/accessRuleObject.jsp&quot;</span><span class="o">);</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Use the dot delimiter. --&gt;</span>
<span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.personName&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
<dt>List implementation example</dt>
<dd><p class="first"></p>
<dl class="last docutils">
<dt>Action</dt>
<dd><div class="first last highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Configure the object with list in the request scope.</span>
<span class="n">PersonsForm</span> <span class="n">form</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PersonsForm</span><span class="o">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">persons</span> <span class="o">=</span> <span class="n">UniversalDao</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">form</span><span class="o">.</span><span class="na">setPersons</span><span class="o">(</span><span class="n">persons</span><span class="o">);</span>
<span class="n">context</span><span class="o">.</span><span class="na">setRequestScopedVar</span><span class="o">(</span><span class="s">&quot;form&quot;</span><span class="o">,</span> <span class="n">form</span><span class="o">);</span>
</pre></div>
</div>
</dd>
<dt>JSP</dt>
<dd><div class="first last highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Loop to acquire to the index. --&gt;</span>
<span class="nt">&lt;c:forEach</span> <span class="na">items=</span><span class="s">&quot;${form.persons}&quot;</span> <span class="na">varStatus=</span><span class="s">&quot;status&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!--</span>
<span class="c">    Access the elements using square brackets.</span>
<span class="c">    Access the element values using dots.</span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;n:text</span> <span class="na">name=</span><span class="s">&quot;form.persons[${status.index}].personName&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/c:forEach&gt;</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>The request parameter is included in the search target to restore the input value
when the input form is redisplayed with the custom tag for input items.</p>
<p class="last">Since this behavior differs between Nablarch custom tags and JSTL (c: forEach, c: out, etc.), take adequate care during implementation.
Since the JSTL tag cannot access the value of the request parameter, when using the JSTL tag,
it is necessary to explicitly configured the value in the request scope for the action.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>The request scope is searched before the request parameter is accessed
so that the input value can be changed when the input form is redisplayed.</p>
<p>A common example is when a user wants to return a radio button to the unselected state
when redisplaying the input form and guarantee that the system has registered the radio button selected by the user.</p>
<p class="last">In such cases, if an empty string is configured in the request scope for the action,
the radio button can be returned to the unselected state.</p>
</div>
</div>
<div class="section" id="uri-specification-method">
<span id="tag-specify-uri"></span><h3><a class="toc-backref" href="#id45">7.19.6.3. URI specification method</a><a class="headerlink" href="#uri-specification-method" title="Permalink to this headline">¶</a></h3>
<p>In the custom tags, use one of the following methods to specify the URI</p>
<blockquote>
<div><dl class="docutils">
<dt>Absolute URL</dt>
<dd><p class="first">Path starting with http/https</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:a</span> <span class="na">href=</span><span class="s">&quot;https://github.com/coastland&quot;</span><span class="nt">&gt;</span>coastland<span class="nt">&lt;/n:a&gt;</span>
</pre></div>
</div>
<p class="last">Used when a different URI is specified for the application and host, such as by linkage with other systems.
The custom tags use the specified path without any change.</p>
</dd>
<dt>Relative path from the context</dt>
<dd><p class="first">Path starting with a / (slash)</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/person/register&quot;</span> <span class="na">value=</span><span class="s">&quot;Register&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p class="last">Used when specifying the path within the application.
The custom tags use the specified path by adding the context path in the beginning.</p>
</dd>
<dt>Relative path from the current path</dt>
<dd><p class="first">Path that does not start with a / (slash) (except absolute URL)</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">uri=</span><span class="s">&quot;login&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p class="last">Used when specifying the path within the application.
The custom tags use the specified path without any change.</p>
</dd>
</dl>
</div></blockquote>
<p></p>
<dl class="docutils">
<dt>Switching between https and http</dt>
<dd><p class="first">When relative path from the context is specified, switching between https and http can be performed
for a URI by specifying the secure attribute of the custom tag.</p>
<p>When the secure attribute is specified,
a URI is assembled using the configured values of the custom tags
(port number for http, port number for https and host) and the context path.
Therefore, in applications that use the secure attribute, specify
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setPort-int-" title="nablarch.common.web.tag.CustomTagConfig.setPort(int)">port property</a> /
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setSecurePort-int-" title="nablarch.common.web.tag.CustomTagConfig.setSecurePort(int)">securePort property</a> /
<a class="reference external" href="https://nablarch.github.io/docs/LATEST/javadoc/nablarch/common/web/tag/CustomTagConfig.html#setHost-java.lang.String-" title="nablarch.common.web.tag.CustomTagConfig.setHost(java.lang.String)">host property</a>
with <a class="reference internal" href="#tag-setting"><span>Configure custom tags</span></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The secure attribute is used only for buttons and links that switch the protocol of the transition destination.
Do not specify the secure attribute when the protocol of the transition destination is the same (http→http、https→https).</p>
</div>
<dl class="last docutils">
<dt>Implementation examples</dt>
<dd><p class="first">An example of using the secure attribute is shown.</p>
<dl class="last docutils">
<dt>Configuration values of custom tags</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Port number for http:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">8080</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Port number for https:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">443</td>
</tr>
<tr class="field-odd field"><th class="field-name">host:</th><td class="field-body">sample.co.jp</td>
</tr>
</tbody>
</table>
</dd>
<dt>Switch from http to https</dt>
<dd><p class="first"></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify true in secure attribute. --&gt;</span>
<span class="nt">&lt;n:submit</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;login&quot;</span> <span class="na">value=</span><span class="s">&quot;Login&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/login&quot;</span> <span class="na">secure=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="last highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># URI to be assembled</span>
https://sample.co.jp:443/&lt;Context path&gt;/action/login
</pre></div>
</div>
</dd>
<dt>Switch from https to http</dt>
<dd><p class="first"></p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Specify false in secure attribute. --&gt;</span>
<span class="nt">&lt;n:submitLink</span> <span class="na">name=</span><span class="s">&quot;logout&quot;</span> <span class="na">uri=</span><span class="s">&quot;/action/logout&quot;</span> <span class="na">secure=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/n:submitLink&gt;</span>
</pre></div>
</div>
<div class="last highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># URI to be assembled</span>
https://sample.co.jp:8080/&lt;Context path&gt;/action/logout

<span class="c1"># If the port number for http in the custom tag configuration is not specified</span>
<span class="c1"># Port number is not output.</span>
https://sample.co.jp/&lt;Context&gt;/action/logout
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="html-escape-line-feed-and-half-width-space-conversion">
<span id="tag-html-escape"></span><h3><a class="toc-backref" href="#id46">7.19.6.4. HTML escape, line feed and half width space conversion</a><a class="headerlink" href="#html-escape-line-feed-and-half-width-space-conversion" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>HTML escape</dt>
<dd><p class="first">In the custom tags, as a general rule, HTML escape is performed for all HTML attributes during output.
The content that is converted is shown below:</p>
<dl class="docutils">
<dt>Conversion during HTML escape</dt>
<dd><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">&amp;</span></code> → <code class="docutils literal"><span class="pre">&amp;amp;</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">&lt;</span></code> → <code class="docutils literal"><span class="pre">&amp;lt;</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">&gt;</span></code> → <code class="docutils literal"><span class="pre">&amp;gt;</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">“</span></code> → <code class="docutils literal"><span class="pre">&amp;#034;</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">‘</span></code> → <code class="docutils literal"><span class="pre">&amp;#039;</span></code></div>
</div>
</dd>
</dl>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p>Since the EL expression does not perform HTML escape processing, the values should not be output using the EL expression.
Use custom tags such as <a class="reference internal" href="tag/tag_reference.html#tag-write-tag"><span>write tag</span></a> to output the values.</p>
<p class="last">However, there is no problem if the EL expression is used at places where there is no direct output,
such as when configuring an object for JSTL forEach tag or a custom tag attribute.</p>
</div>
</dd>
<dt>Line feed and half-width space conversion</dt>
<dd><p class="first">When input data is output on the Confirmation screen, etc., in addition to HTML escape, line feed and half-width space are converted.
The content that is converted is shown below:</p>
<dl class="last docutils">
<dt>Contents of line feed and half-width space conversion</dt>
<dd><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">Line</span> <span class="pre">feed</span> <span class="pre">code(\n、\r、\r\n)</span></code> → <code class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">Half-width</span></code> → <code class="docutils literal"><span class="pre">&amp;nbsp;</span></code></div>
</div>
</dd>
</dl>
</dd>
</dl>
</div>
</div>
<div class="section" id="tag-reference">
<h2><a class="toc-backref" href="#id47">7.19.7. <a class="reference internal" href="tag/tag_reference.html#tag-reference"><span>Tag Reference</span></a></a><a class="headerlink" href="#tag-reference" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="tag/tag_reference.html#tag-reference"><span>Tag Reference</span></a>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'5u20',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>