


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.20. How to Execute a Request Unit Test (Sending Synchronous Message) &mdash; ∇Nablarch  5u20 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/02_RequestUnitTest/http_send_sync.html" />
  
    <link rel="top" title="∇Nablarch  5u20 documentation" href="../../../../../../index.html"/>
        <link rel="up" title="3.1. How to Execute Unit Tests" href="../index.html"/>
        <link rel="next" title="3.1.21. How to Execute a Request Unit Test (Email Send)" href="mail.html"/>
        <link rel="prev" title="3.1.19. How to Conduct a Subfunction Unit Test (Sending Asynchronous Message Process)" href="../03_DealUnitTest/delayed_send.html"/>
 

  
  <script src="../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u20</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_nablarch/index.html">What is the Nablarch?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../about_nablarch/concept.html">Nablarch Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../about_nablarch/mvn_module.html">Module List of Nablarch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../about_nablarch/license.html">Information on Nablarch License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../application_framework/index.html">Nablarch Application Framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../application_framework/application_framework/index.html">Application Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/nablarch/index.html">1. What is Nablarch Application Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/web/index.html">2. Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/web_service/index.html">3. Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/batch/index.html">4. Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/messaging/index.html">5. Messaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/handlers/index.html">6. Standard Handler Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/libraries/index.html">7. Libraries Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/blank_project/index.html">8. Blank Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/setting_guide/index.html">9. Nablarch Application Framework Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/configuration/index.html">10. Default Configuration List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/cloud_native/index.html">11. Nablarch Cloud Native Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../application_framework/adaptors/index.html">Adaptor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/log_adaptor.html">log Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/router_adaptor.html">Routing Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/webspheremq_adaptor.html">IBM WebSphere MQ Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/jaxrs_adaptor.html">JAX-RS Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/doma_adaptor.html">Doma Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/jsr310_adaptor.html">JSR310(Date and Time API)Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarker Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/mail_sender_velocity_adaptor.html">E-mail Velocity Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/web_thymeleaf_adaptor.html">Web Application Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/lettuce_adaptor.html">Lettuce Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/slf4j_adaptor.html">SLF4J Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/micrometer_adaptor.html">Micrometer Adapter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../application_framework/example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/example/index.html#procedure-to-build-the-environment">Procedure to build the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/example/index.html#application-execution-procedure">Application execution procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extension_components/index.html">Nablarch extension component</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/report/index.html">1. Form library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html">2. Workflow library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/workflow/tool/index.html">3. Workflow definition data generation tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/etl/index.html">4. ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/etl/etl_maven_plugin.html">5. ETL Maven plugin</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../index.html">Nablarch development tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../java_static_analysis/index.html">1. Efficient Java Static Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../java_static_analysis/index.html#conduct-syntax-check">1.1. Conduct syntax check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../java_static_analysis/index.html#unify-the-format">1.2. Unify the format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../java_static_analysis/index.html#check-if-unauthorized-apis-are-being-used">1.3. Check if unauthorized APIs are being used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../ui_dev/index.html">2. Front-end UI development platform for advanced users</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../index.html">3. Testing framework</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">3.1. How to Execute Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../06_TestFWGuide/index.html">3.2. How to Use the Automated Test Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../08_TestTools/index.html">3.3. Tools Used in the Programming Phase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../toolbox/index.html">4. Useful Tools When Developing Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../toolbox/JspStaticAnalysis/index.html">4.1. JSP Static Analysis Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../toolbox/JspVerifier/JspVerifier.html">4.3. Job Screen JSP Validation Tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../examples/index.html">Nablarch Implementation Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/01/index.html">Sample Password Encryption Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/0101_PBKDF2PasswordEncryptor.html">Sample Password Encryption Function Using PBKDF2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/02/index.html">Extended Validation Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#email-address-validation">Email address validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#validation-of-japan-telephone-numbers">Validation of Japan telephone numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#code-value-validation">Code value validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/03/index.html">Display a List of Search Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#how-to-use">How to Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchinfo-class">ListSearchInfo class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-tag">listSearchResult tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#sort-search-results">Sort search results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#how-to-implement-displaying-a-list-of-all-search-results-on-a-single-screen">How to implement displaying a list of all search results on a single screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#how-to-implement-the-initial-display-of-search-results-with-the-default-search-conditions">How to implement the initial display of search results with the default search conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#default-settings-for-the-search-result-list-display-function">Default settings for the search result list display function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#how-to-import-a-sample-implementation-tag-file-into-the-business-application">How to import a sample implementation (tag file) into the business application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#tag-reference">Tag Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/04/index.html">Extended Formatter Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/04/0401_ExtendedDataFormatter.html">Data Formatter Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/04/0402_ExtendedFieldType.html">Field Type Expansion in the Data Formatter Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/05/index.html">Sample File Management Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/06/index.html">CAPTCHA Function Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/06_Captcha_guide.html">How to Incorporate the CAPTCHA Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/07/index.html">Sample UserAgent Information Acquisition Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#description-of-configuration">Description of configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#use-case">Use case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/08/index.html">Sample of HTML Email Send Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#implementation-examples">Implementation examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/09/index.html">How to Use a Sample to Send a Digitally Signed Email Using Bouncycastle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#environment-preparation">Environment preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#structure-of-digitally-signed-email-send-function">Structure of digitally signed email send function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#preparation-of-configuration-file">Preparation of configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/10/index.html">How to Use the Log Aggregation Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/10/index.html#list-of-samples-provided">List of samples provided</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/11/index.html">Messaging Platform Test Simulator Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#uses">Uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#how-to-use">How to use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#expansion-example">Expansion example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../../index.html">Nablarch development tools</a> &raquo;</li>
      
          <li><a href="../../../../index.html">3. Testing framework</a> &raquo;</li>
      
          <li><a href="../index.html">3.1. How to Execute Unit Tests</a> &raquo;</li>
      
    <li>3.1.20. How to Execute a Request Unit Test (Sending Synchronous Message)</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/index.html" class="ja">日本語</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-execute-a-request-unit-test-sending-synchronous-message">
<span id="message-httpsendsyncmessage-test"></span><h1>3.1.20. How to Execute a Request Unit Test (Sending Synchronous Message)<a class="headerlink" href="#how-to-execute-a-request-unit-test-sending-synchronous-message" title="Permalink to this headline">¶</a></h1>
<p>For information on how to execute a request unit test, see <a class="reference internal" href="send_sync.html#message-sendsyncmessage-test"><span>How to Execute a Request Unit Test (Sending Synchronous Message Process)</span></a>.</p>
<p>However, &#8220;send queue&#8221; and &#8220;receive queue&#8221; should be read as &#8220;communication destination&#8221;.</p>
<p>In this section, the differences with <a class="reference internal" href="send_sync.html#message-sendsyncmessage-test"><span>How to Execute a Request Unit Test (Sending Synchronous Message Process)</span></a>.</p>
<div class="section" id="how-to-write-test-data">
<span id="http-send-sync-request-write-test-data"></span><h2>3.1.20.1. How to write test data<a class="headerlink" href="#how-to-write-test-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="an-example-of-the-expected-value-of-a-request-message-when-a-message-is-sent-once-and-the-response-message-response-message-that-is-returned">
<h3>3.1.20.1.1. An example of the expected value of a request message when a message is sent once and the response message (response message) that is returned<a class="headerlink" href="#an-example-of-the-expected-value-of-a-request-message-when-a-message-is-sent-once-and-the-response-message-response-message-that-is-returned" title="Permalink to this headline">¶</a></h3>
<p>The following is an example of the description of a response message that is returned when a message is sent once.</p>
<a class="reference internal image-reference" href="../../../../../../_images/http_send_sync_response.png"><img alt="../../../../../../_images/http_send_sync_response.png" src="../../../../../../_images/http_send_sync_response.png" /></a>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>RESPONSE_BODY_MESSAGES (and EXPECTED_REQUEST_BODY_MESSAGES used in the examples below) can be described by dividing into multiple fields.</p>
<p>When a string is long and cannot be read if written in one cell, the string is divided and written.</p>
<p class="last">When dividing, &#8220;field name&#8221; can be an arbitrary string. In the above example, <code class="docutils literal"><span class="pre">XML1</span></code>, <code class="docutils literal"><span class="pre">XML2</span></code> and <code class="docutils literal"><span class="pre">XML3</span></code> is used.</p>
</div>
<p>The following is a description example of the expected value of a request message that is returned when a message is sent once.</p>
<a class="reference internal image-reference" href="../../../../../../_images/http_send_sync_expected.png"><img alt="../../../../../../_images/http_send_sync_expected.png" src="../../../../../../_images/http_send_sync_expected.png" /></a>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>When using JSON or XML data format, only one test case should be written in one Excel sheet.</p>
<p class="last">This is due to the limitation of NTF, which expects the string length of each Excel line to be the same for the message body. In JSON and XML data formats, the request message length is generally different for each request, so only one test case can be described in practice.</p>
</div>
</div>
<div class="section" id="an-example-of-the-expected-value-of-a-request-message-when-a-message-is-sent-more-than-once-and-the-response-message-response-message-that-is-returned">
<h3>3.1.20.1.2. An example of the expected value of a request message when a message is sent more than once and the response message (response message) that is returned<a class="headerlink" href="#an-example-of-the-expected-value-of-a-request-message-when-a-message-is-sent-more-than-once-and-the-response-message-response-message-that-is-returned" title="Permalink to this headline">¶</a></h3>
<p>When sending a message multiple times, the test should be written with attention to the following specifications of the testing framework.</p>
<ul class="simple">
<li>The same data types (<code class="docutils literal"><span class="pre">RESPONSE_HEADER_MESSAGES</span></code> and <code class="docutils literal"><span class="pre">RESPONSE_BODY_MESSAGES</span></code> in the following example) are described together, respectively. For more information, see <a class="reference internal" href="../../06_TestFWGuide/03_Tips.html#tips-groupid"><span>To describe the data of multiple test cases on a single sheet</span></a> and <a class="reference internal" href="../../06_TestFWGuide/01_Abstract.html#auto-test-framework-multi-datatype"><span>Describing data by grouping together based on data types when using multiple data types</span></a>.</li>
<li>For messages with the same request ID, the value of no is changed and the messages are described together.</li>
<li>If the message has the same request ID, the length of the message is matched (The limitations are the same as for sending a single message. If the test case does not allow for the same length, then perform the test manually)</li>
</ul>
<p>The following is a description example of the response message that is returned when the message is sent multiple times.</p>
<a class="reference internal image-reference" href="../../../../../../_images/http_send_sync_ok_pattern_response.png"><img alt="../../../../../../_images/http_send_sync_ok_pattern_response.png" src="../../../../../../_images/http_send_sync_ok_pattern_response.png" /></a>
<p>The following is a description example of the expected value of a request message that is returned when a message is sent multiple times.</p>
<a class="reference internal image-reference" href="../../../../../../_images/http_send_sync_ok_pattern_expected.png"><img alt="../../../../../../_images/http_send_sync_ok_pattern_expected.png" src="../../../../../../_images/http_send_sync_ok_pattern_expected.png" /></a>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If there are multiple request IDs to be sent, testing the order is not possible. In the above example, the test is successful even if <code class="docutils literal"><span class="pre">ProjectSaveMessage2</span></code> is sent before <code class="docutils literal"><span class="pre">ProjectSaveMessage</span></code>.</p>
</div>
<div class="section" id="failure-pattern-test">
<h4>3.1.20.1.2.1. Failure pattern test<a class="headerlink" href="#failure-pattern-test" title="Permalink to this headline">¶</a></h4>
<p>The failure pattern can be tested by configuring a specific value starting with &#8220;errorMode:&#8221; in the table of the response message.<a class="footnote-reference" href="#http-send-sync-abnormal-test" id="id1">[1]</a></p>
<p>The correspondence between the configuration values and failure pattern tests is shown below.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="33%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value to be configured for the first field</th>
<th class="head">Failure description</th>
<th class="head">Operation of the automated test framework</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">errorMode:timeout</span></code></td>
<td>Test if timeout error occurs while sending the message</td>
<td>Throws <strong>HttpMessagingTimeoutException</strong>
(subclass of <strong>MessagingException</strong>) <a class="footnote-reference" href="#http-send-sync-abnormal-test-behavior" id="id2">[2]</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">errorMode:msgException</span></code></td>
<td>Test when a message send and receive error occurs</td>
<td>Throws <strong>MessagingException</strong></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>This value should be in the <strong>first field, excluding &#8220;no&#8221;, in both the header and the body</strong> of the table in the response message.</p>
<table class="docutils footnote" frame="void" id="http-send-sync-abnormal-test" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>If the business action does not explicitly control <strong>MessagingException</strong>,
there is no need to perform fault testing in individual request unit tests.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="http-send-sync-abnormal-test-behavior" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>It throws out a different class than <a class="reference internal" href="send_sync.html#message-sendsyncmessage-test"><span>How to Execute a Request Unit Test (Sending Synchronous Message Process)</span></a>.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="description-for-using-the-mockup">
<h3>3.1.20.1.3. Description for using the mockup<a class="headerlink" href="#description-for-using-the-mockup" title="Permalink to this headline">¶</a></h3>
<p>Configure <code class="docutils literal"><span class="pre">expectedMessageByClient</span></code> in testShots and group ID in <code class="docutils literal"><span class="pre">responseMessageByClient</span></code>. For information on mockup, see <a class="reference internal" href="../03_DealUnitTest/send_sync.html#dealunittest-send-sync"><span>How to Perform a Subfunction Unit Test with Sending Synchronous Message Process</span></a>.</p>
<p>The relevance of group IDs is the same as for <code class="docutils literal"><span class="pre">expectedMessage</span></code> and  <code class="docutils literal"><span class="pre">responseMessage</span></code> in <a class="reference internal" href="send_sync.html#message-sendsyncmessage-test"><span>How to Execute a Request Unit Test (Sending Synchronous Message Process)</span></a>, and is therefore omitted.</p>
<a class="reference internal image-reference" href="../../../../../../_images/http_send_sync_shot.png"><img alt="../../../../../../_images/http_send_sync_shot.png" src="../../../../../../_images/http_send_sync_shot.png" /></a>
<div class="line-block">
<div class="line">If sending synchronous messages by MOM and HTTP sending synchronous message take place simultaneously in the same action,</div>
<div class="line">the group ID used in the sending synchronous message process by MOM is configured to &#8220;expectedMessage&#8221; and &#8220;responseMessage&#8221;,</div>
<div class="line">and the group ID used in the HTTP sending synchronous message process is configured to</div>
<div class="line">&#8220;expectedMessageByClient&#8221; and &#8220;responseMessageByClient&#8221; respectively.</div>
</div>
<a class="reference internal image-reference" href="../../../../../../_images/http_mom_send_sync_shot.png"><img alt="../../../../../../_images/http_mom_send_sync_shot.png" src="../../../../../../_images/http_mom_send_sync_shot.png" /></a>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The Group ID should be configured to a different value in the sending synchronous message process by MOM and HTTP sending synchronous message process.
Note that if the same group ID is specified, the result verification will not be performed correctly.</p>
</div>
</div>
<div class="section" id="asserting-the-request-message">
<h3>3.1.20.1.4. Asserting the request message<a class="headerlink" href="#asserting-the-request-message" title="Permalink to this headline">¶</a></h3>
<p>The value of the file-type set in the directive line of the test data changes the way in which the request message is asserted.</p>
<p>For details on how to configure and the assert details, refer to response message section of <a class="reference internal" href="real.html#real-request-test"><span>How to Execute a Request Unit Test (Receiving Synchronous Message Process)</span></a>.</p>
</div>
</div>
<div class="section" id="configuring-the-classes-to-be-used-in-the-framework">
<h2>3.1.20.2. Configuring the classes to be used in the framework<a class="headerlink" href="#configuring-the-classes-to-be-used-in-the-framework" title="Permalink to this headline">¶</a></h2>
<p>Usually, the classes are configured by the architect and do not need to be set by the application programmer.</p>
<div class="section" id="mockup-class-configuration">
<h3>3.1.20.2.1. Mockup class configuration<a class="headerlink" href="#mockup-class-configuration" title="Permalink to this headline">¶</a></h3>
<p>Configure mockup class to be used in request unit test in the component configuration file.</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Client for HTTP communication --&gt;</span>
<span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;defaultMessageSenderClient&quot;</span>
           <span class="na">class=</span><span class="s">&quot;nablarch.test.core.messaging.RequestTestingMessagingClient&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;charset&quot;</span> <span class="na">value=</span><span class="s">&quot;Shift-JIS&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>The character code output to the log can be changed by specifying the character code name in the <code class="docutils literal"><span class="pre">charset</span></code> field.
Normally character code is optional, and UTF-8 will be used if omitted.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../',
            VERSION:'5u20',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../../../_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>