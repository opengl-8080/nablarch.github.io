


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.1.1. Form/Entityのクラス単体テスト &mdash; ∇Nablarch  5u20 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/01_ClassUnitTest/01_entityUnitTest.html" />
  
    <link rel="top" title="∇Nablarch  5u20 ドキュメント" href="../../../../../../index.html"/>
        <link rel="up" title="3.1.1. クラス単体テストの実施方法" href="index.html"/>
        <link rel="next" title="3.1.1.2. Action/Componentのクラス単体テスト" href="02_componentUnitTest.html"/>
        <link rel="prev" title="3.1.1. クラス単体テストの実施方法" href="index.html"/>
 

  
  <script src="../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u20</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_nablarch/index.html">Nablarchについて</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../about_nablarch/concept.html">Nablarchのコンセプト</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../about_nablarch/mvn_module.html">Nablarch のモジュール一覧</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../about_nablarch/license.html">Nablarchのライセンスについて</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../application_framework/index.html">Nablarchアプリケーションフレームワーク</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../application_framework/application_framework/index.html">アプリケーションフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/nablarch/index.html">1. Nablarchアプリケーションフレームワークとは</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/web/index.html">2. ウェブアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/web_service/index.html">3. ウェブサービス編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/batch/index.html">4. バッチアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/messaging/index.html">5. メッセージング編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/handlers/index.html">6. Nablarchの提供する標準ハンドラ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/libraries/index.html">7. Nablarchが提供するライブラリ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/blank_project/index.html">8. ブランクプロジェクト</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/setting_guide/index.html">9. Nablarchアプリケーションフレームワーク設定ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/configuration/index.html">10. デフォルト設定一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/application_framework/cloud_native/index.html">11. Nablarchクラウドネイティブ対応</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../application_framework/adaptors/index.html">アダプタ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/log_adaptor.html">logアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/router_adaptor.html">ルーティングアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/webspheremq_adaptor.html">IBM WebSphere MQアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/jaxrs_adaptor.html">JAX-RSアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/doma_adaptor.html">Domaアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/jsr310_adaptor.html">JSR310(Date and Time API)アダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarkerアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/mail_sender_velocity_adaptor.html">E-mail Velocityアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/web_thymeleaf_adaptor.html">ウェブアプリケーション Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/lettuce_adaptor.html">Lettuceアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/slf4j_adaptor.html">SLF4Jアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/adaptors/micrometer_adaptor.html">Micrometerアダプタ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../application_framework/example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/example/index.html#id1">環境構築手順について</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../application_framework/example/index.html#id2">アプリケーションの実行手順について</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extension_components/index.html">Nablarch拡張コンポーネント</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/report/index.html">1. 帳票ライブラリ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/report/index.html#id2">1.1. 概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/report/index.html#id3">1.2. 要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/report/index.html#id7">1.3. 構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/report/index.html#report-template">1.4. 実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html">2. ワークフローライブラリ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html#id3">2.1. 機能概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html#id6">2.2. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html#id7">2.3. 使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html#xor">2.4. XORゲートウェイの進行先ノードの判定方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/doc/index.html#workflow-multi-completion">2.5. マルチインスタンスの完了条件の判定方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/workflow/tool/index.html">3. ワークフロー定義データ生成ツール</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/tool/index.html#id3">3.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/workflow/tool/index.html#id4">3.2. 使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/etl/index.html">4. ETL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/index.html#id3">4.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/index.html#etl-phase">4.2. ETLの各フェーズの仕様</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/index.html#id5">4.3. ETLを使用するバッチの設計ポイント</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/index.html#id9">4.4. 使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/index.html#id18">4.5. 拡張例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../extension_components/etl/etl_maven_plugin.html">5. ETL Mavenプラグイン</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/etl_maven_plugin.html#id2">5.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../extension_components/etl/etl_maven_plugin.html#id3">5.2. 使用方法</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../index.html">Nablarch開発ツール</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../java_static_analysis/index.html">1. 効率的なJava静的チェック</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../java_static_analysis/index.html#code-analysis">1.1. 構文チェックを行う</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../java_static_analysis/index.html#code-format">1.2. フォーマットを統一する</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../java_static_analysis/index.html#api">1.3. 許可していないAPIが使用されていないかチェックする</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../ui_dev/index.html">2. フロントエンド上級者向けのUI開発基盤</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../ui_dev/doc/index.html">2.1. Nablarch UI開発基盤 解説書</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../ui_dev/guide/index.html">2.2. JSP/HTML作成ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../ui_dev/guide/widget_usage/widget_list.html">2.3. UI部品の実装サンプルで提供しているウィジェットの一覧</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../index.html">3. テスティングフレームワーク</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">3.1. 単体テスト実施方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../06_TestFWGuide/index.html">3.2. 自動テストフレームワークの使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../08_TestTools/index.html">3.3. プログラミング工程で使用するツール</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../toolbox/index.html">4. アプリケーション開発時に使える便利なツール</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../toolbox/JspStaticAnalysis/index.html">4.1. JSP静的解析ツール</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../toolbox/JspVerifier/JspVerifier.html">4.3. 業務画面JSP検証ツール</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../examples/index.html">Nablarch実装例集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/01/index.html">データベースを用いたパスワード認証機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/0101_PBKDF2PasswordEncryptor.html">PBKDF2を用いたパスワード暗号化機能サンプル</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/01/index.html#id12">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/02/index.html">バリデーション機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#extendedvalidation-mailaddressvalidator">メールアドレスバリデーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#extendedvalidation-japanesetelnumbervalidator">日本電話番号バリデーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/02/index.html#id12">コード値精査</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/03/index.html">検索結果の一覧表示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#id5">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#id8">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchinfo">ListSearchInfoクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult">listSearchResultタグ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-sort">検索結果の並び替え</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-nopaging">1画面にすべての検索結果を一覧表示する場合の実装方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-defaultcondition">デフォルトの検索条件で検索した結果を初期表示する場合の実装方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-setting">検索結果の一覧表示機能のデフォルト値設定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-customize">業務アプリケーションへのサンプル実装(タグファイル)の取り込み方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/03/index.html#listsearchresult-tagreference">タグリファレンス</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/04/index.html">フォーマッタ機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/04/0401_ExtendedDataFormatter.html">データフォーマッタの拡張</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/04/0402_ExtendedFieldType.html">データフォーマッタ機能におけるフィールドタイプの拡張</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/05/index.html">データベースを用いたファイル管理機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#id2">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#id6">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#id7">機能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#id10">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/05/index.html#id15">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/06/index.html">CAPTCHA機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/06_Captcha_guide.html">CAPTCHA機能の組み込み手順</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/06/index.html#id21">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/07/index.html">UserAgent情報取得機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#id3">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#id8">設定の記述</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/07/index.html#id11">使用例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/08/index.html">HTMLメール送信機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#id3">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/08/index.html#id14">実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/09/index.html">bouncycastleを使用した電子署名つきメールの送信サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#id3">環境準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#id4">電子署名付きメール送信機能の構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#id5">設定ファイルの準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/09/index.html#id7">実行方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/10/index.html">ログ集計サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/10/index.html#id3">提供サンプル一覧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../examples/11/index.html">メッセージング基盤テストシミュレータサンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#id4">用途</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#id8">特徴</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#id12">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#id15">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../examples/11/index.html#id18">拡張例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../../index.html">Nablarch開発ツール</a> &raquo;</li>
      
          <li><a href="../../../../index.html">3. テスティングフレームワーク</a> &raquo;</li>
      
          <li><a href="../index.html">3.1. 単体テスト実施方法</a> &raquo;</li>
      
          <li><a href="index.html">3.1.1. クラス単体テストの実施方法</a> &raquo;</li>
      
    <li>3.1.1.1. Form/Entityのクラス単体テスト</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/en/index.html" class="en">English</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="form-entity">
<span id="entityunittest"></span><h1>3.1.1.1. Form/Entityのクラス単体テスト<a class="headerlink" href="#form-entity" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>本項では、FormおよびFormの一種であるEntityのクラス単体テスト(以下Form単体テストまたはEntity単体テスト)について説明する。
両者はほぼ同じように単体テストを行えるため、共通する内容についてはEntity単体テストをベースに説明し、特有の処理については個別に説明する。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">Entityとは、テーブルのカラムと1対1に対応するプロパティを持つFormのことである。</p>
</div>
<div class="section" id="id1">
<h2>3.1.1.1.1. Form/Entity単体テストの書き方<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本項で例として使用したテストクラスとテストデータは以下のとおり(右クリック-&gt;保存でダウンロード)。</p>
<ul class="simple">
<li><a class="reference download internal" href="../../../../../../_downloads/SystemAccountEntityTest.java" download=""><code class="xref download docutils literal"><span class="pre">テストクラス(SystemAccountEntityTest.java)</span></code></a></li>
<li><a class="reference download internal" href="../../../../../../_downloads/SystemAccountEntityTest.xlsx" download=""><code class="xref download docutils literal"><span class="pre">テストデータ(SystemAccountEntityTest.xlsx)</span></code></a></li>
<li><a class="reference download internal" href="../../../../../../_downloads/SystemAccountEntity.java" download=""><code class="xref download docutils literal"><span class="pre">テスト対象クラス(SystemAccountEntity.java)</span></code></a></li>
</ul>
<div class="section" id="id2">
<h3>3.1.1.1.1.1. テストデータの作成<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>テストデータを記載したExcelファイルそのものの作成方法を説明する。テストデータを記載したExcelファイルは、テストソースコードと同じディレクトリに同じ名前で格納する(拡張子のみ異なる)。なお、後述する<a class="reference internal" href="#entityunittest-validationcase"><span>精査のテストケース</span></a>、<a class="reference internal" href="#entityunittest-constructorcase"><span>コンストラクタのテストケース</span></a>、<a class="reference internal" href="#entityunittest-settergettercase"><span>setter、getterに対するテストケース</span></a>のそれぞれが、1シートずつ使用する前提である。</p>
<p>テストデータの記述方法詳細については、<a class="reference internal" href="../../06_TestFWGuide/01_Abstract.html"><em>自動テストフレームワーク</em></a>、<a class="reference internal" href="../../06_TestFWGuide/02_DbAccessTest.html"><em>データベースを使用するクラスのテスト</em></a>を参照。</p>
<p>なお、メッセージデータやコードマスタなどの、データベースに格納する静的マスタデータは、プロジェクトで管理されたデータがあらかじめ投入されている(これらのデータを個別のテストデータとして作成しない)前提である。</p>
</div>
<div class="section" id="id3">
<h3>3.1.1.1.1.2. テストクラスの作成<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Form/Entity単体テストのテストクラスは、以下の条件を満たすように作成する。</p>
<ul class="simple">
<li>テストクラスのパッケージは、テスト対象のForm/Entityと同じとする。</li>
<li>&lt;Form/Entityクラス名&gt;Testというクラス名でテストクラスを作成する。</li>
<li>nablarch.test.core.db.EntityTestSupportを継承する。</li>
</ul>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">nablarch.sample.management.user</span><span class="o">;</span> <span class="c1">// 【説明】パッケージはSystemAccountEntityと同じ</span>

<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">nablarch.test.core.db.EntityTestSupport</span><span class="o">;</span>

<span class="kn">import static</span> <span class="nn">org.junit.Assert.assertArrayEquals</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.junit.Assert.assertEquals</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * SystemAccountEntityクラスに対するテストを実行するクラス。&lt;br/&gt;</span>
<span class="cm"> * テスト内容はエクセルシート参照のこと。</span>
<span class="cm"> *</span>
<span class="cm"> * @author Miki Habu</span>
<span class="cm"> * @since 1.0</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SystemAccountEntityTest</span> <span class="kd">extends</span> <span class="n">EntityTestSupport</span> <span class="o">{</span>
<span class="c1">// 【説明】クラス名はSystemAccountEntityTestで、EntityTestSupportを継承する</span>


<span class="c1">// ～後略～</span>
</pre></div>
</div>
<p>テストメソッドの記述方法は本項以降に記載されているコード例を参照。</p>
</div>
<div class="section" id="entityunittest-validationcase">
<span id="id4"></span><h3>3.1.1.1.1.3. 文字種と文字列長の単項目精査テストケース<a class="headerlink" href="#entityunittest-validationcase" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>単項目精査に関するテストケースは、入力される文字種および文字列長に関するものがほとんどである。例えば、以下のようなプロパティがあるとする。</p>
<ul class="simple">
<li>プロパティ名「フリガナ」</li>
<li>最大文字列長は50文字</li>
<li>必須項目</li>
<li>全角カタカナのみを許容する</li>
</ul>
<p>この場合、以下のようなテストケースを作成することになる。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ケース</th>
<th class="head">観点</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>全角カタカナ50文字を入力し精査が成功する。</td>
<td>最大文字列長、文字種の確認</td>
</tr>
<tr class="row-odd"><td>全角カタカナ51文字を入力し精査が失敗する。</td>
<td>最大文字列長の確認</td>
</tr>
<tr class="row-even"><td>全角カタカナ1文字を入力し精査が成功する。</td>
<td>最小文字列長、文字種の確認</td>
</tr>
<tr class="row-odd"><td>空文字を入力し、精査が失敗する。</td>
<td>必須精査の確認</td>
</tr>
<tr class="row-even"><td>半角カタカナを入力し精査が失敗する。</td>
<td>文字種の確認<a class="footnote-reference" href="#id6" id="id5">[1]</a></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p></p>
<blockquote>
<div><table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[1]</a></td><td>同様に、半角英字、全角ひらがな、漢字...等が入力され精査が失敗するケースが必要である。</td></tr>
</tbody>
</table>
</div></blockquote>
<p>このように、単項目精査のテストケースは、ケース数が多くなりデータ作成の労力がかかる。そこで、単項目精査テスト専用のテスト方法を提供する。これにより以下の効果が見込まれる。</p>
<ul class="simple">
<li>単項目精査のテストケース作成を容易になる。</li>
<li>保守性の高いテストデータが作成でき、レビューやメンテナンスが容易になる。</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>本テスト方法は、プロパティとして別のFormを保持するFormに対しては使用できない。その場合、独自に精査処理のテストを実装すること。
プロパティとして別のFormを保持するFormとは、以下の形式でプロパティにアクセスする親Formのこと。</p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>&lt;親Form&gt;.&lt;子Form&gt;.&lt;子フォームのプロパティ名&gt;
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h4>3.1.1.1.1.3.1. テストケース表の作成方法<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>以下のカラムを用意する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">カラム名</th>
<th class="head">記載内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>propertyName</td>
<td>テスト対象のプロパティ名</td>
</tr>
<tr class="row-odd"><td>allowEmpty</td>
<td>そのプロパティが未入力を許容するか</td>
</tr>
<tr class="row-even"><td>min</td>
<td>そのプロパティが入力値として許容する最小文字列長（
省略可）</td>
</tr>
<tr class="row-odd"><td>max</td>
<td>そのプロパティが入力値として許容する最大文字列長</td>
</tr>
<tr class="row-even"><td>messageIdWhenNotApplicable</td>
<td>文字種不適合時に期待するメッセージID</td>
</tr>
<tr class="row-odd"><td>半角英字</td>
<td>半角英字を許容するか</td>
</tr>
<tr class="row-even"><td>半角数字</td>
<td>半角数字を許容するか</td>
</tr>
<tr class="row-odd"><td>半角記号</td>
<td>半角記号を許容するか</td>
</tr>
<tr class="row-even"><td>半角カナ</td>
<td>半角カナを許容するか</td>
</tr>
<tr class="row-odd"><td>全角英字</td>
<td>全角英字を許容するか</td>
</tr>
<tr class="row-even"><td>全角数字</td>
<td>全角数字を許容するか</td>
</tr>
<tr class="row-odd"><td>全角ひらがな</td>
<td>全角ひらがなを許容するか</td>
</tr>
<tr class="row-even"><td>全角カタカナ</td>
<td>全角カタカナを許容するか</td>
</tr>
<tr class="row-odd"><td>全角漢字</td>
<td>全角漢字を許容するか</td>
</tr>
<tr class="row-even"><td>全角記号その他</td>
<td>全角記号その他を許容するか</td>
</tr>
<tr class="row-odd"><td>外字</td>
<td>外字を許容するか</td>
</tr>
</tbody>
</table>
<p>許容するかどうかを記入するカラムには、以下の値を設定する。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="17%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定内容</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>許容する</td>
<td>o</td>
<td>半角英小文字のオー</td>
</tr>
<tr class="row-odd"><td>許容しない</td>
<td>x</td>
<td>半角英小文字のエックス</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>具体例を以下に示す。</p>
<img alt="../../../../../../_images/entityUnitTest_CharsetAndLengthExample.png" src="../../../../../../_images/entityUnitTest_CharsetAndLengthExample.png" />
</div>
<div class="section" id="id8">
<h4>3.1.1.1.1.3.2. テストメソッドの作成方法<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>スーパクラスの以下のメソッドを起動する。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">testValidateCharsetAndLength</span><span class="o">(</span><span class="n">Class</span> <span class="n">entityClass</span><span class="o">,</span> <span class="n">String</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">String</span> <span class="n">id</span><span class="o">)</span>
</pre></div>
</div>
<p></p>
<div class="highlight-java"><div class="highlight"><pre><span></span> <span class="c1">// 【説明】～前略～</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SystemAccountEntityTest</span> <span class="kd">extends</span> <span class="n">EntityTestSupport</span> <span class="o">{</span>

     <span class="cm">/** テスト対象エンティティクラス */</span>
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">SystemAccountEntity</span><span class="o">&gt;</span> <span class="n">ENTITY_CLASS</span> <span class="o">=</span> <span class="n">SystemAccountEntity</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>


     <span class="cm">/**</span>
<span class="cm">      * 文字種および文字列長のテストケース</span>
<span class="cm">      */</span>
     <span class="nd">@Test</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCharsetAndLength</span><span class="o">()</span> <span class="o">{</span>
          <span class="c1">// 【説明】テストデータを記載したシート名</span>
          <span class="n">String</span> <span class="n">sheetName</span> <span class="o">=</span> <span class="s">&quot;testCharsetAndLength&quot;</span><span class="o">;</span>

          <span class="c1">// 【説明】テストデータのID</span>
          <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&quot;charsetAndLength&quot;</span><span class="o">;</span>

          <span class="c1">// 【説明】テスト実行</span>
          <span class="n">testValidateCharsetAndLength</span><span class="o">(</span><span class="n">ENTITY_CLASS</span><span class="o">,</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
     <span class="o">}</span>


     <span class="c1">// 【説明】～後略～</span>
</pre></div>
</div>
<p>このメソッドを実行すると、テストデータの各行毎に以下の観点でテストが実行される。</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="31%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">観点</th>
<th class="head">入力値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>文字種</td>
<td>半角英字</td>
<td rowspan="12">max(最大文字列長)欄に記載した長さの文字列で構成さ
れる。</td>
</tr>
<tr class="row-odd"><td>文字種</td>
<td>半角数字</td>
</tr>
<tr class="row-even"><td>文字種</td>
<td>半角数字</td>
</tr>
<tr class="row-odd"><td>文字種</td>
<td>半角記号</td>
</tr>
<tr class="row-even"><td>文字種</td>
<td>半角カナ</td>
</tr>
<tr class="row-odd"><td>文字種</td>
<td>全角英字</td>
</tr>
<tr class="row-even"><td>文字種</td>
<td>全角数字</td>
</tr>
<tr class="row-odd"><td>文字種</td>
<td>全角ひらがな</td>
</tr>
<tr class="row-even"><td>文字種</td>
<td>全角カタカナ</td>
</tr>
<tr class="row-odd"><td>文字種</td>
<td>全角漢字</td>
</tr>
<tr class="row-even"><td>文字種</td>
<td>全角記号その他</td>
</tr>
<tr class="row-odd"><td>文字種</td>
<td>外字</td>
</tr>
<tr class="row-even"><td>未入力</td>
<td>空文字</td>
<td>長さ0の文字列</td>
</tr>
<tr class="row-odd"><td>最小文字列</td>
<td>最小文字列長の文字列</td>
<td rowspan="4">入力値は、o印を付けた文字種で構成される</td>
</tr>
<tr class="row-even"><td>最長文字列</td>
<td>最長文字列長の文字列</td>
</tr>
<tr class="row-odd"><td>文字列長不足</td>
<td>最小文字列長－１の文字列</td>
</tr>
<tr class="row-even"><td>文字列長超過</td>
<td>最大文字列長＋１の文字列</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id9">
<h3>3.1.1.1.1.4. その他の単項目精査のテストケース<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>前述の、文字種と文字列長の単項目精査テストケースを使用すれば大部分の単項目精査がテストできるが、一部の精査についてはカバーできないものもある。
例えば、数値入力項目の範囲精査が挙げられる。</p>
<p>このような単項目精査のテストについても、簡易にテストできる仕組みを用意している。
各プロパティについて、１つの入力値と期待するメッセージIDのペアを記述することで、
任意の値で単項目精査のテストができる。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>本テスト方法は、プロパティとして別のFormを保持するFormに対しては使用できない。その場合は、独自に精査処理のテストを実装すること。
プロパティとして別のFormを保持するFormとは、以下の形式でプロパティにアクセスする親Formのこと。</p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>&lt;親Form&gt;.&lt;子Form&gt;.&lt;子フォームのプロパティ名&gt;
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h4>3.1.1.1.1.4.1. テストケース表の作成方法<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>以下のカラムを用意する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">カラム名</th>
<th class="head">記載内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>propertyName</td>
<td>テスト対象のプロパティ名</td>
</tr>
<tr class="row-odd"><td>case</td>
<td>テストケースの簡単な説明</td>
</tr>
<tr class="row-even"><td>input1<a class="footnote-reference" href="#id13" id="id11">[2]</a></td>
<td>入力値 <a class="footnote-reference" href="#id14" id="id12">[3]</a></td>
</tr>
<tr class="row-odd"><td>messageId</td>
<td>上記入力値で単項目精査した場合に、発生すると期待す
るメッセージID（精査エラーにならないことを期待する
場合は空欄）</td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id13" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[2]</a></td><td>ひとつのキーに対して複数のパラメータを指定する場合は、input2, input3 というようにカラムを増やす。</td></tr>
</tbody>
</table>
<p></p>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[3]</a></td><td><a class="reference internal" href="../../06_TestFWGuide/01_Abstract.html#special-notation-in-cell"><span>セルへの特殊な記述方法</span></a>の記法を使用することで、効率的に入力値を作成できる。</td></tr>
</tbody>
</table>
<p>具体例を以下に示す。</p>
<img alt="../../../../../../_images/entityUnitTest_singleValidationDataExample.png" src="../../../../../../_images/entityUnitTest_singleValidationDataExample.png" />
</div>
<div class="section" id="id15">
<h4>3.1.1.1.1.4.2. テストメソッドの作成方法<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>スーパクラスの以下のメソッドを起動する。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">testSingleValidation</span><span class="o">(</span><span class="n">Class</span> <span class="n">entityClass</span><span class="o">,</span> <span class="n">String</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">String</span> <span class="n">id</span><span class="o">)</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// 【説明】～前略～</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SystemAccountEntityTest</span> <span class="kd">extends</span> <span class="n">EntityTestSupport</span> <span class="o">{</span>

     <span class="cm">/** テスト対象エンティティクラス */</span>
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">SystemAccountEntity</span><span class="o">&gt;</span> <span class="n">ENTITY_CLASS</span> <span class="o">=</span> <span class="n">SystemAccountEntity</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>

     <span class="cm">/**</span>
<span class="cm">      * 文字種および文字列長の単項目精査テストケース</span>
<span class="cm">      */</span>
     <span class="c1">// 【説明】～中略～</span>

     <span class="cm">/**</span>
<span class="cm">      * 単項目精査のテストケース（上記以外）</span>
<span class="cm">      */</span>
     <span class="nd">@Test</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSingleValidation</span><span class="o">()</span> <span class="o">{</span>
         <span class="n">String</span> <span class="n">sheetName</span> <span class="o">=</span> <span class="s">&quot;testSingleValidation&quot;</span><span class="o">;</span>
         <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&quot;singleValidation&quot;</span><span class="o">;</span>
         <span class="n">testSingleValidation</span><span class="o">(</span><span class="n">ENTITY_CLASS</span><span class="o">,</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
     <span class="o">}</span>


      <span class="c1">// 【説明】～後略～</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id16">
<h3>3.1.1.1.1.5. バリデーションメソッドのテストケース<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>上記までの単項目精査のテストでは、エンティティのセッターメソッドに付与されたアノテーションが正しいかテストされ、エンティティに実装したバリデーションメソッド<a class="footnote-reference" href="#id18" id="id17">[4]</a>は実行されていない。</p>
<p>その為、独自のバリデーションメソッドをエンティティに実装した場合は、
別途テストを作成する必要がある。</p>
<table class="docutils footnote" frame="void" id="id18" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[4]</a></td><td><code class="docutils literal"><span class="pre">&#64;ValidateFor</span></code>アノテーションを付与したstaticメソッドのこと</td></tr>
</tbody>
</table>
<div class="section" id="id19">
<h4>3.1.1.1.1.5.1. テストケース表の作成<a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h4>
<ul class="simple">
<li>IDは&#8221;testShots&#8221;固定とする。</li>
<li>以下のカラムを用意する。</li>
</ul>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">カラム名</th>
<th class="head">記載内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>title</td>
<td>テストケースのタイトル</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>テストケースの簡単な説明</td>
</tr>
<tr class="row-even"><td>expectedMessageId<em>ｎ</em></td>
<td>期待するメッセージ（<em>ｎ</em>は1からの連番 ）</td>
</tr>
<tr class="row-odd"><td>propertyName<em>ｎ</em></td>
<td>期待するプロパティ（<em>ｎ</em>は1からの連番 ）</td>
</tr>
</tbody>
</table>
<p>複数のメッセージを期待する場合、expectedMessageId2, propertyName2というように数値を増やして右側に追加していく。</p>
</div></blockquote>
<ul class="simple">
<li>入力パラメータ表の作成<ul>
<li>IDは&#8221;params&#8221;固定とする。</li>
<li>上記のテストケース表に対応する、入力パラメータ<a class="footnote-reference" href="#id21" id="id20">[5]</a> を1行ずつ記載する。</li>
</ul>
</li>
</ul>
<p></p>
<blockquote>
<div><table class="docutils footnote" frame="void" id="id21" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[5]</a></td><td><a class="reference internal" href="../../06_TestFWGuide/01_Abstract.html#special-notation-in-cell"><span>セルへの特殊な記述方法</span></a>の記法を使用することで、効率的に入力値を作成できる。</td></tr>
</tbody>
</table>
</div></blockquote>
<p></p>
<blockquote>
<div><p>具体例を以下に示す。</p>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_validationTestData.png"><img alt="../../../../../../_images/entityUnitTest_validationTestData.png" src="../../../../../../_images/entityUnitTest_validationTestData.png" /></a>
<p>※Entityの保有するプロパティ名のExcelへの記述手順は、 <a class="reference internal" href="#property-name-copy-label"><span>プロパティ名の一覧を簡易的に取得する手順</span></a> を参照。</p>
</div></blockquote>
</div>
<div class="section" id="id22">
<h4>3.1.1.1.1.5.2. テストケース、テストデータの作成<a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="section" id="entityunittest-validationmethodspecifynormal">
<span id="id23"></span><h5>3.1.1.1.1.5.2.1. 精査対象確認<a class="headerlink" href="#entityunittest-validationmethodspecifynormal" title="このヘッドラインへのパーマリンク">¶</a></h5>
<p>精査対象のプロパティを指定(<a class="reference internal" href="../../../../../../application_framework/application_framework/libraries/validation/nablarch_validation.html#nablarch-validation"><span>Nablarch Validation</span></a>参照)した場合、その指定が正しいかどうか確認するケースを作成する。</p>
<p>全てのプロパティに対して、おのおの単項目精査でエラーとなるデータを用意する。精査対象プロパティの指定が正しければ、精査対象のプロパティだけが単項目精査になるはずである。よって、期待値として、全精査対象プロパティ名と、各プロパティ単項目精査エラー時のメッセージIDを記載する。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">精査対象プロパティが誤って精査対象から漏れていた場合、期待したメッセージが出力されない為、メッセージIDのアサートが失敗する。また、精査対象でないプロパティが誤って精査対象となっていた場合は、入力値が不正により単項目精査が失敗し、予期しないメッセージが出力される。これにより、精査対象の誤りを検知することができる。</p>
</div>
<p>テストケース表には、全精査対象プロパティのプロパティ名と、そのプロパティ単項目精査エラーメッセージIDを記載する。</p>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_ValidationPropTestCases.png"><img alt="../../../../../../_images/entityUnitTest_ValidationPropTestCases.png" src="../../../../../../_images/entityUnitTest_ValidationPropTestCases.png" /></a>
<p>入力パラメータ表には、全てのプロパティに対してそれぞれ単項目精査エラーとなる値を記載する。</p>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_ValidationPropParams.png"><img alt="../../../../../../_images/entityUnitTest_ValidationPropParams.png" src="../../../../../../_images/entityUnitTest_ValidationPropParams.png" /></a>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>Form単体テストのテストケースやテストデータを作成する際、<strong>プロパティに保持している別のFormのプロパティ</strong> を指定したいことがある。この場合、次のように指定できる。</p>
<ul class="simple">
<li>Formのコード例</li>
</ul>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleForm</span> <span class="o">{</span>

    <span class="cm">/** システムユーザ */</span>
    <span class="kd">private</span> <span class="n">SystemUserEntity</span> <span class="n">systemUser</span><span class="o">;</span>

    <span class="cm">/** 電話番号配列 */</span>
    <span class="kd">private</span> <span class="n">UserTelEntity</span><span class="o">[]</span> <span class="n">userTelArray</span><span class="o">;</span>

    <span class="c1">// 【説明】プロパティ以外は省略</span>

<span class="o">}</span>
</pre></div>
</div>
<ul class="simple">
<li>保持しているFormのプロパティを指定する方法(SystemUserEntity.userIdを指定する場合)</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>sampleForm.systemUser.userId
</pre></div>
</div>
<ul class="simple">
<li>Form配列の要素のプロパティを指定する方法(UserTelEntity配列の先頭要素のプロパティを指定する場合)</li>
</ul>
<div class="last highlight-none"><div class="highlight"><pre><span></span>sampleForm.userTelArray[0].telNoArea
</pre></div>
</div>
</div>
</div>
<div class="section" id="id24">
<h5>3.1.1.1.1.5.2.2. 項目間精査など<a class="headerlink" href="#id24" title="このヘッドラインへのパーマリンク">¶</a></h5>
<p>項目間精査など、バリデーションメソッドの<a class="reference internal" href="#entityunittest-validationmethodspecifynormal"><span>精査対象確認</span></a>で行った精査対象指定以外の動作確認を行うケースを作成する。</p>
<p>下図では、&#8221;newPasswordとconfirmPasswordが等しいこと&#8221;というバリデーションメソッドに対する正常系のケースを作成している。</p>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_RelationalValidation.png"><img alt="../../../../../../_images/entityUnitTest_RelationalValidation.png" src="../../../../../../_images/entityUnitTest_RelationalValidation.png" /></a>
</div>
</div>
<div class="section" id="id25">
<h4>3.1.1.1.1.5.3. テストメソッドの作成方法<a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>これまでに作成したテストケース、データを使用するテストメソッドを以下に示す。下記コードの変数内容を変更するだけで、異なるEntityの精査のテストに対応できる。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span> <span class="c1">// ～前略～</span>

 <span class="cm">/** テスト対象エンティティクラス */</span>
 <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">SystemAccountEntity</span><span class="o">&gt;</span> <span class="n">ENTITY_CLASS</span> <span class="o">=</span> <span class="n">SystemAccountEntity</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>

 <span class="c1">// ～中略～</span>
 <span class="cm">/**</span>
<span class="cm">  * {@link SystemAccountEntity#validateForRegisterUser(nablarch.core.validation.ValidationContext)} のテスト。</span>
<span class="cm">  */</span>
 <span class="nd">@Test</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testValidateForRegisterUser</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// 精査実行</span>
     <span class="n">String</span> <span class="n">sheetName</span> <span class="o">=</span> <span class="s">&quot;testValidateForRegisterUser&quot;</span><span class="o">;</span>
     <span class="n">String</span> <span class="n">validateFor</span> <span class="o">=</span> <span class="s">&quot;registerUser&quot;</span><span class="o">;</span>
     <span class="n">testValidateAndConvert</span><span class="o">(</span><span class="n">ENTITY_CLASS</span><span class="o">,</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">validateFor</span><span class="o">);</span>
 <span class="o">}</span>

<span class="c1">// ～後略～</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="entityunittest-constructorcase">
<span id="id26"></span><h3>3.1.1.1.1.6. コンストラクタに対するテストケース<a class="headerlink" href="#entityunittest-constructorcase" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>コンストラクタに対するテストでは、引数に指定した値が、正しくプロパティに設定されているかを確認するケースを作成する。このとき対象となるプロパティは、Entityにに定義されている全てのプロパティである。テストデータには、プロパティ名とそれに設定するデータと期待値(getterで取得した値と比較するデータ)を用意する。</p>
<p>下図では、以下のように各プロパティに値を指定している。
テストでは、コンストラクタにこれらの値の組み合わせを与えたとき、各プロパティに指定した値が設定されているか(getterを呼び出して、想定通りの値が取得できるか)確認している。</p>
<p>実際のテストコードでは、コンストラクタへの値の設定及び値の確認は、自動テストフレームワークで提供されるメソッド内で行われる。
詳細は、 <a class="reference internal" href="#test-constructor-java-label"><span>テストコード</span></a> を参照すること。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>Entityは自動生成されるため、アプリケーションで使用されないコンストラクタが生成される可能性がある。その場合リクエスト単体テストではテストできないため、Entity単体テストでコンストラクタに対するテストを必ず行うこと。</p>
<p class="last">一方、一般的なFormの場合、アプリケーションで使用するコンストラクタのみを作成する。したがって、リクエスト単体テストでコンストラクタのテストを行うことができる。そのため、一般的なFormについては、クラス単体テストでコンストラクタのテストを行う必要はない。</p>
</div>
<div class="section" id="excel">
<h4>3.1.1.1.1.6.1. Excelへの定義<a class="headerlink" href="#excel" title="このヘッドラインへのパーマリンク">¶</a></h4>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_Constructor.png"><img alt="../../../../../../_images/entityUnitTest_Constructor.png" src="../../../../../../_images/entityUnitTest_Constructor.png" /></a>
<p>※Entityの保有するプロパティ名のExcelへの記述手順は、 <a class="reference internal" href="#property-name-copy-label"><span>プロパティ名の一覧を簡易的に取得する手順</span></a> を参照。</p>
<p>上記設定値のテスト内容(抜粋)</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="36%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">プロパティ</th>
<th class="head">コンストラクタに設定する値</th>
<th class="head">期待値(getterから取得される値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>userId</td>
<td>userid</td>
<td>userid</td>
</tr>
<tr class="row-odd"><td>loginId</td>
<td>loginid</td>
<td>loginid</td>
</tr>
<tr class="row-even"><td>password</td>
<td>password</td>
<td>password</td>
</tr>
</tbody>
</table>
<p id="test-constructor-java-label">このデータを使用するテストメソッドを以下に示す。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// 【説明】～前略～</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SystemAccountEntityTest</span> <span class="kd">extends</span> <span class="n">EntityTestSupport</span> <span class="o">{</span>

     <span class="cm">/** コンストラクタのテスト */</span>
     <span class="nd">@Test</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testConstructor</span><span class="o">()</span> <span class="o">{</span>
         <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">entityClass</span> <span class="o">=</span> <span class="n">SystemAccountEntity</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
         <span class="n">String</span> <span class="n">sheetName</span> <span class="o">=</span> <span class="s">&quot;testAccessor&quot;</span><span class="o">;</span>
         <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&quot;testConstructor&quot;</span><span class="o">;</span>
         <span class="n">testConstructorAndGetter</span><span class="o">(</span><span class="n">entityClass</span><span class="o">,</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
     <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition tip" id="testconstructorandgetter-note-label">
<p class="first admonition-title">補足</p>
<p>testConstructorAndGetterでテスト可能なプロパティの型(クラス)には制限がある。
下記型(クラス)に該当しない場合には、各テストクラスにてコンストラクタとgetterを明示的に呼び出してテストする必要がある。</p>
<ul class="simple">
<li>String及び、String配列</li>
<li>BigDecimal及び、BigDecimal配列</li>
<li>java.util.Date及び、java.util.Date配列(Excelへはyyyy-MM-dd形式もしくはyyyy-MM-dd HH:mm:ss形式で記述すること)</li>
<li>valueOf(String)メソッドを持つクラス及び、その配列クラス(例えばIntegerやLong、java.sql.Dateやjava.sql.Timestampなど)</li>
</ul>
<p>以下に、個別のテスト実施方法の例を示す。</p>
<blockquote class="last">
<div><ul>
<li><p class="first">Excelへのデータ記述例</p>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_ConstructorOther.png"><img alt="../../../../../../_images/entityUnitTest_ConstructorOther.png" src="../../../../../../_images/entityUnitTest_ConstructorOther.png" /></a>
</li>
<li><p class="first">テストコード例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="cm">/** コンストラクタのテスト */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testConstructor</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// 【説明】</span>
    <span class="c1">// 共通にテストが実施出来る項目は、testConstructorAndGetterを使用してテストを実施する。</span>
    <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">entityClass</span> <span class="o">=</span> <span class="n">SystemAccountEntity</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">sheetName</span> <span class="o">=</span> <span class="s">&quot;testAccessor&quot;</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&quot;testConstructor&quot;</span><span class="o">;</span>
    <span class="n">testConstructorAndGetter</span><span class="o">(</span><span class="n">entityClass</span><span class="o">,</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>

    <span class="c1">// 【説明】</span>
    <span class="c1">// 共通にテストが実施出来ない項目は、個別にテストを実施する。</span>

    <span class="c1">// 【説明】</span>
    <span class="c1">// getParamMapを呼び出し、個別にテストを行うプロパティのテストデータを取得する。</span>
    <span class="c1">// (テスト対象のプロパティが複数ある場合は、getListParamMapを使用する。)</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">getParamMap</span><span class="o">(</span><span class="n">sheetName</span><span class="o">,</span> <span class="s">&quot;testConstructorOther&quot;</span><span class="o">);</span>

    <span class="c1">// 【説明】Map&lt;String, String[]&gt;から、Entityのコンストラクタの引数であるMap&lt;String, Object&gt;へ変換する</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;users&quot;</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;set&quot;</span><span class="o">)));</span>

    <span class="c1">// 【説明】上記で生成したMap&lt;String, Object&gt;を引数にEntityを生成する。</span>
    <span class="n">SystemAccountEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SystemAccountEntity</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>

    <span class="c1">// 【説明】getterを呼び出し、期待値通りの値が返却されることを確認する。</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="n">entity</span><span class="o">.</span><span class="na">getUsers</span><span class="o">(),</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;get&quot;</span><span class="o">)));</span>

<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="settergetter">
<span id="entityunittest-settergettercase"></span><h3>3.1.1.1.1.7. setter、getterに対するテストケース<a class="headerlink" href="#settergetter" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>setter、getterに対するテストでは、setterで設定した値とgetterで取得した値が、期待通りになっているか確認するケースを作成する。このとき対象となるプロパティは、Entityに定義されている全てのプロパティである。</p>
<p>各プロパティに対して、setterに渡すためのデータと期待値(getterで取得した値と比較するデータ)を用意する。
テストメソッドでは、前述のsetterに渡すためのデータを引数にsetterを呼び出し、直後にgetterで取得した値と期待値が等しいことを確認している。</p>
<p>実際のテストコードでは、setterへの値の設定及び値の確認(期待値との比較)は、
自動テストフレームワークで提供されるメソッド内で行われる。 詳細は、 テストコード を参照すること。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>Entityは自動生成されるため、アプリケーションで使用されないsetter/getterが生成される可能性がある。その場合リクエスト単体テストではテストできないため、Entity単体テストでsetter/getterに対するテストを必ず行うこと。</p>
<p class="last">一方、一般的なFormの場合、アプリケーションで使用するsetter/getterのみを作成する。したがって、リクエスト単体テストでsetter/getterのテストを行うことができる。そのため、一般的なFormについては、クラス単体テストでsetter/getterのテストを行う必要はない。</p>
</div>
<div class="section" id="id27">
<h4>3.1.1.1.1.7.1. Excelへの定義<a class="headerlink" href="#id27" title="このヘッドラインへのパーマリンク">¶</a></h4>
<a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_SetterAndGetter.png"><img alt="../../../../../../_images/entityUnitTest_SetterAndGetter.png" src="../../../../../../_images/entityUnitTest_SetterAndGetter.png" /></a>
<p>※Entityの保有するプロパティ名のExcelへの記述手順は、 <a class="reference internal" href="#property-name-copy-label"><span>プロパティ名の一覧を簡易的に取得する手順</span></a> を参照。</p>
<p>このデータを使用するテストメソッドを以下に示す。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// 【説明】～前略～</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SystemAccountEntityTest</span> <span class="kd">extends</span> <span class="n">EntityTestSupport</span> <span class="o">{</span>

    <span class="cm">/**</span>
<span class="cm">     * setter、getterのテスト</span>
<span class="cm">     */</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSetterAndGetter</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">entityClass</span> <span class="o">=</span> <span class="n">SystemAccountEntity</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">sheetName</span> <span class="o">=</span> <span class="s">&quot;testAccessor&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">&quot;testGetterAndSetter&quot;</span><span class="o">;</span>
        <span class="n">testSetterAndGetter</span><span class="o">(</span><span class="n">entityClass</span><span class="o">,</span> <span class="n">sheetName</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// 【説明】～後略～</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">testGetterAndSetterでテスト可能なプロパティの型(クラス)には制限がある。
制限内容の詳細は、 <a class="reference internal" href="#entityunittest-constructorcase"><span>コンストラクタに対するテストケース</span></a> を参照すること。</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>setterやgetterにロジックを記述した場合(例えば、setterは郵便番号上3桁と下4桁に別れているが、getterはまとめて7桁取得する場合など)は、
そのロジックを確認するテストケースを作成すること。</p>
<p>上記のテストをExcelに定義する場合には、下記画像のように定義する。:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>郵便番号に下記を設定した場合に、正しく7桁の郵便番号(0010001)が取得することを確認する例
  郵便番号上3桁:001
  郵便番号下4桁:0001
</pre></div>
</div>
<a class="last reference internal image-reference" href="../../../../../../_images/entityUnitTest_SetterAndGetter_PostNo.png"><img alt="../../../../../../_images/entityUnitTest_SetterAndGetter_PostNo.png" src="../../../../../../_images/entityUnitTest_SetterAndGetter_PostNo.png" /></a>
</div>
</div>
</div>
<div class="section" id="property-name-copy-label">
<span id="id28"></span><h3>3.1.1.1.1.8. プロパティ名の一覧を簡易的に取得する手順<a class="headerlink" href="#property-name-copy-label" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>①Eclipseでテスト対象のEntityクラスをオープンし、Outline(アウトライン)を表示する。</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../../../../../_images/entityUnitTest_PropertyWrite1.png"><img alt="../../../../../../_images/entityUnitTest_PropertyWrite1.png" src="../../../../../../_images/entityUnitTest_PropertyWrite1.png" /></a>
</div></blockquote>
<p>②コピーしたいプロパティを選択する。</p>
<blockquote>
<div><img alt="../../../../../../_images/entityUnitTest_PropertyWrite2.png" src="../../../../../../_images/entityUnitTest_PropertyWrite2.png" />
</div></blockquote>
<p>③マウスの右クリックで表示されるメニューからCopy Qualified Name(修飾名のコピー)を選択する。</p>
<blockquote>
<div><img alt="../../../../../../_images/entityUnitTest_PropertyWrite3.png" src="../../../../../../_images/entityUnitTest_PropertyWrite3.png" />
</div></blockquote>
<p>④コピーしたプロパティ名のリストをエクセルに貼り付ける。</p>
<blockquote>
<div><p>貼りつけた値には、下記画像のように「クラス名 + プロパティ名」の完全修飾名の形式になっている。
このため、Excelの置き換え機能を使用して不要なクラス名を削除する。</p>
<p>Entityクラスが、「nablarch.sample.management.user.SystemAccountEntity」の場合の置き換え例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>検索する文字列：nablarch.sample.management.user.SystemAccountEntity.
置き換え後の文字列：(空のまま)
</pre></div>
</div>
<img alt="../../../../../../_images/entityUnitTest_PropertyWrite4.png" src="../../../../../../_images/entityUnitTest_PropertyWrite4.png" />
</div></blockquote>
<p></p>
</div>
<div class="section" id="id29">
<h3>3.1.1.1.1.9. 自動テストフレームワーク設定値<a class="headerlink" href="#id29" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="#entityunittest-validationcase"><span>文字種と文字列長の単項目精査テストケース</span></a>を実施する際に必要な初期値設定について説明する。</p>
<div class="section" id="id30">
<h4>3.1.1.1.1.9.1. 設定項目一覧<a class="headerlink" href="#id30" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nablarch.test.core.entity.EntityTestConfiguration</span></code>クラスを使用し、以下の値をコンポーネント設定ファイルで設定する（全項目必須）。</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目名</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>maxMessageId</td>
<td>最大文字列長超過時のメッセージID</td>
</tr>
<tr class="row-odd"><td>maxAndMinMessageId</td>
<td>最長最小文字列長範囲外のメッセージID(可変長)</td>
</tr>
<tr class="row-even"><td>fixLengthMessageId</td>
<td>最長最小文字列長範囲外のメッセージID(固定長)</td>
</tr>
<tr class="row-odd"><td>underLimitMessageId</td>
<td>文字列長不足時のメッセージID</td>
</tr>
<tr class="row-even"><td>emptyInputMessageId</td>
<td>未入力時のメッセージID</td>
</tr>
<tr class="row-odd"><td>characterGenerator</td>
<td>文字列生成クラス <a class="footnote-reference" href="#id32" id="id31">[6]</a></td>
</tr>
</tbody>
</table>
<p></p>
<table class="docutils footnote" frame="void" id="id32" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id31">[6]</a></td><td><code class="docutils literal"><span class="pre">nablarch.test.core.util.generator.CharacterGenerator</span></code>の実装クラスを指定する。
このクラスがテスト用の入力値を生成する。
通常は、<code class="docutils literal"><span class="pre">nablarch.test.core.util.generator.BasicJapaneseCharacterGenerator</span></code>を使用すれば良い。</td></tr>
</tbody>
</table>
<p>設定するメッセージIDは、バリデータの設定値と合致させる。</p>
<p>（以下の記述例を参照）</p>
</div>
<div class="section" id="id33">
<h4>3.1.1.1.1.9.2. コンポーネント設定ファイルの記述例<a class="headerlink" href="#id33" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>以下の設定値を使用する場合のコンポーネント設定ファイル記述例を示す。</p>
<p><strong>【精査クラスのコンポーネント設定ファイル】</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;validators&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;list&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.core.validation.validator.RequiredValidator&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;messageId&quot;</span> <span class="na">value=</span><span class="s">&quot;MSG00010&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">class=</span><span class="s">&quot;nablarch.core.validation.validator.LengthValidator&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;maxMessageId&quot;</span> <span class="na">value=</span><span class="s">&quot;MSG00011&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;maxAndMinMessageId&quot;</span> <span class="na">value=</span><span class="s">&quot;MSG00011&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fixLengthMessageId&quot;</span> <span class="na">value=</span><span class="s">&quot;MSG00023&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/component&gt;</span>
    <span class="c">&lt;!-- 中略 --&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p><strong>【テストのコンポーネント設定ファイル】</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="c">&lt;!-- エンティティテスト設定 --&gt;</span>
<span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;entityTestConfiguration&quot;</span> <span class="na">class=</span><span class="s">&quot;nablarch.test.core.entity.EntityTestConfiguration&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;maxMessageId&quot;</span>        <span class="na">value=</span><span class="s">&quot;MSG00011&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;maxAndMinMessageId&quot;</span>  <span class="na">value=</span><span class="s">&quot;MSG00011&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;fixLengthMessageId&quot;</span>  <span class="na">value=</span><span class="s">&quot;MSG00023&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;underLimitMessageId&quot;</span> <span class="na">value=</span><span class="s">&quot;MSG00011&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;emptyInputMessageId&quot;</span> <span class="na">value=</span><span class="s">&quot;MSG00010&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;characterGenerator&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&quot;characterGenerator&quot;</span>
               <span class="na">class=</span><span class="s">&quot;nablarch.test.core.util.generator.BasicJapaneseCharacterGenerator&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/component&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../',
            VERSION:'5u20',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../../../_static/custom.js"></script>
      <script type="text/javascript" src="../../../../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>