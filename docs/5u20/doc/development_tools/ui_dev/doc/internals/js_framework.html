


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1.16. JavaScript UI部品 &mdash; ∇Nablarch  5u20 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/development_tools/ui_dev/doc/internals/js_framework.html" />
  
    <link rel="top" title="∇Nablarch  5u20 ドキュメント" href="../../../../index.html"/>
        <link rel="up" title="2.1. Nablarch UI開発基盤 解説書" href="../index.html"/>
        <link rel="next" title="2.1.17. 業務画面テンプレート" href="jsp_page_templates.html"/>
        <link rel="prev" title="2.1.15. 業務画面JSPローカル表示機能" href="inbrowser_jsp_rendering.html"/>
 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u20</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_nablarch/index.html">Nablarchについて</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/concept.html">Nablarchのコンセプト</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/mvn_module.html">Nablarch のモジュール一覧</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/license.html">Nablarchのライセンスについて</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application_framework/index.html">Nablarchアプリケーションフレームワーク</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../application_framework/application_framework/index.html">アプリケーションフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/nablarch/index.html">1. Nablarchアプリケーションフレームワークとは</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/web/index.html">2. ウェブアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/web_service/index.html">3. ウェブサービス編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/batch/index.html">4. バッチアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/messaging/index.html">5. メッセージング編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/handlers/index.html">6. Nablarchの提供する標準ハンドラ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/libraries/index.html">7. Nablarchが提供するライブラリ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/blank_project/index.html">8. ブランクプロジェクト</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/setting_guide/index.html">9. Nablarchアプリケーションフレームワーク設定ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/configuration/index.html">10. デフォルト設定一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/application_framework/cloud_native/index.html">11. Nablarchクラウドネイティブ対応</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../application_framework/adaptors/index.html">アダプタ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/log_adaptor.html">logアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/router_adaptor.html">ルーティングアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/webspheremq_adaptor.html">IBM WebSphere MQアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/jaxrs_adaptor.html">JAX-RSアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/doma_adaptor.html">Domaアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/jsr310_adaptor.html">JSR310(Date and Time API)アダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarkerアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/mail_sender_velocity_adaptor.html">E-mail Velocityアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/web_thymeleaf_adaptor.html">ウェブアプリケーション Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/lettuce_adaptor.html">Lettuceアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/slf4j_adaptor.html">SLF4Jアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/adaptors/micrometer_adaptor.html">Micrometerアダプタ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../application_framework/example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/example/index.html#id1">環境構築手順について</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../application_framework/example/index.html#id2">アプリケーションの実行手順について</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extension_components/index.html">Nablarch拡張コンポーネント</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/report/index.html">1. 帳票ライブラリ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/report/index.html#id2">1.1. 概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/report/index.html#id3">1.2. 要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/report/index.html#id7">1.3. 構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/report/index.html#report-template">1.4. 実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html">2. ワークフローライブラリ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html#id3">2.1. 機能概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html#id6">2.2. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html#id7">2.3. 使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html#xor">2.4. XORゲートウェイの進行先ノードの判定方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html#workflow-multi-completion">2.5. マルチインスタンスの完了条件の判定方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/workflow/tool/index.html">3. ワークフロー定義データ生成ツール</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/tool/index.html#id3">3.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/workflow/tool/index.html#id4">3.2. 使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/etl/index.html">4. ETL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/index.html#id3">4.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/index.html#etl-phase">4.2. ETLの各フェーズの仕様</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/index.html#id5">4.3. ETLを使用するバッチの設計ポイント</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/index.html#id9">4.4. 使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/index.html#id18">4.5. 拡張例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/etl/etl_maven_plugin.html">5. ETL Mavenプラグイン</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/etl_maven_plugin.html#id2">5.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../extension_components/etl/etl_maven_plugin.html#id3">5.2. 使用方法</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Nablarch開発ツール</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../java_static_analysis/index.html">1. 効率的なJava静的チェック</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../java_static_analysis/index.html#code-analysis">1.1. 構文チェックを行う</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../java_static_analysis/index.html#code-format">1.2. フォーマットを統一する</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../java_static_analysis/index.html#api">1.3. 許可していないAPIが使用されていないかチェックする</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">2. フロントエンド上級者向けのUI開発基盤</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">2.1. Nablarch UI開発基盤 解説書</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guide/index.html">2.2. JSP/HTML作成ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guide/widget_usage/widget_list.html">2.3. UI部品の実装サンプルで提供しているウィジェットの一覧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../testing_framework/index.html">3. テスティングフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../testing_framework/guide/development_guide/05_UnitTestGuide/index.html">3.1. 単体テスト実施方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../testing_framework/guide/development_guide/06_TestFWGuide/index.html">3.2. 自動テストフレームワークの使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../testing_framework/guide/development_guide/08_TestTools/index.html">3.3. プログラミング工程で使用するツール</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../toolbox/index.html">4. アプリケーション開発時に使える便利なツール</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../toolbox/JspStaticAnalysis/index.html">4.1. JSP静的解析ツール</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../toolbox/JspVerifier/JspVerifier.html">4.3. 業務画面JSP検証ツール</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">Nablarch実装例集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/01/index.html">データベースを用いたパスワード認証機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/0101_PBKDF2PasswordEncryptor.html">PBKDF2を用いたパスワード暗号化機能サンプル</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#id12">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/02/index.html">バリデーション機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#extendedvalidation-mailaddressvalidator">メールアドレスバリデーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#extendedvalidation-japanesetelnumbervalidator">日本電話番号バリデーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#id12">コード値精査</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/03/index.html">検索結果の一覧表示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#id5">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#id8">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchinfo">ListSearchInfoクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult">listSearchResultタグ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-sort">検索結果の並び替え</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-nopaging">1画面にすべての検索結果を一覧表示する場合の実装方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-defaultcondition">デフォルトの検索条件で検索した結果を初期表示する場合の実装方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-setting">検索結果の一覧表示機能のデフォルト値設定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-customize">業務アプリケーションへのサンプル実装(タグファイル)の取り込み方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-tagreference">タグリファレンス</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/04/index.html">フォーマッタ機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/04/0401_ExtendedDataFormatter.html">データフォーマッタの拡張</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/04/0402_ExtendedFieldType.html">データフォーマッタ機能におけるフィールドタイプの拡張</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/05/index.html">データベースを用いたファイル管理機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#id2">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#id6">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#id7">機能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#id10">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#id15">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/06/index.html">CAPTCHA機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/06_Captcha_guide.html">CAPTCHA機能の組み込み手順</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#id21">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/07/index.html">UserAgent情報取得機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#id3">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#id8">設定の記述</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#id11">使用例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/08/index.html">HTMLメール送信機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#id3">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#id14">実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/09/index.html">bouncycastleを使用した電子署名つきメールの送信サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#id3">環境準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#id4">電子署名付きメール送信機能の構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#id5">設定ファイルの準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#id7">実行方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/10/index.html">ログ集計サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/10/index.html#id3">提供サンプル一覧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/11/index.html">メッセージング基盤テストシミュレータサンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#id4">用途</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#id8">特徴</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#id12">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#id15">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#id18">拡張例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Nablarch開発ツール</a> &raquo;</li>
      
          <li><a href="../../index.html">2. フロントエンド上級者向けのUI開発基盤</a> &raquo;</li>
      
          <li><a href="../index.html">2.1. Nablarch UI開発基盤 解説書</a> &raquo;</li>
      
    <li>2.1.16. JavaScript UI部品</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/en/index.html" class="en">English</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="javascript-ui">
<h1>2.1.16. JavaScript UI部品<a class="headerlink" href="#javascript-ui" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="id1">
<h2>2.1.16.1. 概要<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href=""><em>JavaScript UI部品</em></a> は、カレンダー表示やページ内タブページのように、
通常のHTMLの範疇では実現できないUI機能を実装するJavaScript部品群である。
これらの部品群は、以下の指針に基づき、独自実装されている。</p>
<ul class="simple">
<li>Nablarchフレームワークの動作を前提とし、エラー時の入力データ復帰や、
非活性項目・変更不可項目など、サーバ処理との連携の整合性を重視する。</li>
<li>可能な限りJavaScriptを直接記述しなくてもカスタマイズできるようにする。</li>
<li>UI標準に準じた挙動、統一的なデザインが実現されること。</li>
</ul>
<p>利用可能な各部品の仕様については <a class="reference internal" href="../reference_js_framework.html"><em>JavaScript UI部品一覧</em></a> を参照すること。</p>
<div class="section" id="id2">
<h3>2.1.16.1.1. 使用例<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下のソースコードは、画面内の入力要素に対してカレンダー入力部品を使用している例である。</p>
<div class="highlight-jsp"><div class="highlight"><pre><span></span><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;field&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label&gt;</span>適用開始日：<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;effectiveDate&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">value=</span><span class="s">&quot;&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;nablarch_DatePicker</span>
<span class="s">                -format yyyy/MM/dd</span>
<span class="s">                -locale ja</span>
<span class="s">                -input  effectiveDate&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-calendar&quot;</span><span class="nt">&gt;&lt;/i&gt;</span>
  <span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p><cite>&lt;button&gt;</cite> 要素に指定された <strong>class</strong> 属性の内容に注目してほしい。
ここでは、 <cite>&lt;button&gt;</cite> 要素に適用する <a class="reference internal" href=""><em>JavaScript UI部品</em></a> を指定する <strong>マーカCSS</strong> と呼ばれる識別子(<strong>nablarch_DatePicker</strong>)
の後に当該の部品の挙動を定義する各種オプション(<strong>-format yyyy/MM/dd -locale ja -input effectiveDate</strong>)
が続いている。
このように <a class="reference internal" href=""><em>JavaScript UI部品</em></a> の利用するには上記のようなCSSの指定のみを行えばよく、JavaScriptを直接記述する必要はない。</p>
<p><strong>注)</strong>  <a class="reference internal" href=""><em>JavaScript UI部品</em></a> は基本的には <a class="reference internal" href="jsp_widgets.html"><em>UI部品ウィジェット</em></a> 内で使用することを想定しており、
一般の業務画面実装者がこれらのAPIを直接使用することは想定していない。</p>
</div>
<div class="section" id="id3">
<h3>2.1.16.1.2. 依存ライブラリ<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本機能は、以下の外部ライブラリに依存している。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="64%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ライブラリ名</th>
<th class="head">用途</th>
<th class="head">ライセンス</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>require.js</td>
<td>JavaScriptの分割モジュール管理</td>
<td>MIT</td>
</tr>
<tr class="row-odd"><td>sugar.js</td>
<td>ECMAScript5互換関数を含むユーティリティAPI群の提供</td>
<td>ライセンスフリー</td>
</tr>
<tr class="row-even"><td>jQuery</td>
<td>DOM関連APIの簡易化およびブラウザ互換レイヤの提供</td>
<td>MIT</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="id4">
<h2>2.1.16.2. 初期処理<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href=""><em>JavaScript UI部品</em></a> の初期処理は各業務画面のJSPから参照している <cite>/js/nablarch.js</cite> もしくは
それをミニファイした <cite>/js/nablarch-minify.js</cite> によって行われる。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">本番環境では、処理性能を最大化するため、全てのJavaScriptを事前にミニファイし、単一のJavaScriptとして
ロードするが、開発環境では、開発効率性を重視するため、各スクリプトは個別に動的ロード(XHR)される。</p>
</div>
<p>初期処理は上記スクリプトのロードが完了した時点に行われる処理と、
業務画面JSPのDOM構造が確定した時点(ドキュメントロード)の処理の2段階に分けて実行される。</p>
<div class="section" id="id5">
<h3>2.1.16.2.1. スクリプトロード時の挙動<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href=""><em>JavaScript UI部品</em></a> は AMD(Asynchronous Module Definition) 形式に沿って実装されており、
AMDモジュール管理ライブラリである <strong>require.js</strong> により、動的にロードもしくは事前にミニファイされる。</p>
<p><a class="reference internal" href=""><em>JavaScript UI部品</em></a> のロードは <cite>/js/nablarch.js</cite> 内の以下の処理によって開始される。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// 初期ロード対象コンポーネント</span>
<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;nablarch/ui&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ui</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ui</span><span class="p">.</span><span class="nx">Widget</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span> <span class="c1">//ドキュメントロード後の初期化処理を実行</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>上記ソースコードによってロードされるモジュールが <a class="reference external" href="../../../../_static/ui_dev/yuidoc/files/js_nablarch_ui.js.html">/js/nablarch/ui.js</a> である。
このモジュールは、プロジェクトで使用する全UI部品を以下のように依存モジュールとして定義している。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">define</span><span class="p">([</span>
  <span class="s2">&quot;nablarch/ui/Widget&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/event&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/ListBuilder&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/DatePicker&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/AutoSum&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/Collapsible&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/TreeList&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/readonly&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/Placeholder&quot;</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/Tab&quot;</span>
<span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Widget</span><span class="p">)</span> <span class="p">{</span> <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">Widget</span><span class="o">:</span> <span class="nx">Widget</span>
  <span class="p">};</span>
<span class="p">});</span>
</pre></div>
</div>
<p>各UI部品側では、先に述べた <strong>マーカCSS</strong> の宣言と、UI部品の登録処理
(<a class="reference external" href="../../../../_static/ui_dev/yuidoc/classes/nablarch.ui.Widget.html">Widget.register()</a>)を呼び出す。
以下は <a class="reference external" href="../../../../_static/ui_dev/yuidoc/classes/nablarch.ui.DatePicker.html">/js/nablarch/ui/DatePicker.js</a> の例である。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">DatePicker</span><span class="p">.</span><span class="nx">widgetType</span> <span class="o">=</span> <span class="s2">&quot;nablarch_DatePicker&quot;</span><span class="p">;</span> <span class="c1">//マーカCSS</span>
<span class="nx">Widget</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">DatePicker</span><span class="p">);</span> <span class="c1">// UI部品の登録</span>
</pre></div>
</div>
<p>このように全てのUI部品の初期化と登録が完了すると、最初の <cite>/js/nablarch.js</cite> に制御が戻り
<a class="reference external" href="../../../../_static/ui_dev/yuidoc/classes/nablarch.ui.Widget.html">Widget.init()</a> をドキュメントロード後に呼び出す。
(イベントハンドラ登録する。)</p>
</div>
<div class="section" id="id6">
<h3>2.1.16.2.2. ドキュメントロード時の挙動<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ドキュメントロード後に呼び出される
<a class="reference external" href="../../../../_static/ui_dev/yuidoc/classes/nablarch.ui.Widget.html">Widget.init()</a> では、各UI部品に対して以下の初期処理を実行する。</p>
<ol class="arabic simple">
<li><strong>マーカCSS</strong> にマッチするドキュメント上の各要素に対してUI部品のインスタンスを作成する。
この際、要素のNodeインスタンスおよびマーカCSSに付随するオプションをパースしたオブジェクトが
コンストラクタの引数として渡される。</li>
<li>生成したインスタンスを当該要素の <strong>data-</strong> プロパティとして設定し
UI部品のインスタンスがGCの対象とならないようにする。
なお、1. の初期化処理の前に、この <strong>data-</strong> プロパティの内容をチェックするので
同じ要素に対して複数回初期化が行われることはない。</li>
</ol>
</div>
<div class="section" id="ui">
<h3>2.1.16.2.3. UI部品の再初期化<a class="headerlink" href="#ui" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>JavaScriptのテンプレート処理などによって、画面ロード完了後に <strong>マーカCSS</strong> を含むドキュメントノードを
動的に追加しても、そのままでは上で述べた初期化処理は実行されず、期待された動作とならない。
このような場合は明示的に <a class="reference external" href="../../../../_static/ui_dev/yuidoc/classes/nablarch.ui.Widget.html">Widget.init()</a>
を呼び出す必要がある。</p>
<p>上で述べたように、既に初期化されている要素に対しては何もしないので、複数回実行しても
既にドキュメント上に存在しているUI部品に影響を与えることはない。</p>
</div>
</div>
<div class="section" id="id9">
<h2>2.1.16.3. ファイル構成<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><strong>構成ファイル一覧</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="5%" />
<col width="5%" />
<col width="19%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">名称</th>
<th class="head" colspan="2">動作環境 <a class="footnote-reference" href="#id11" id="id10">[2]</a></th>
<th class="head">パス</th>
<th class="head">内容</th>
</tr>
<tr class="row-even"><th class="head">_</th>
<th class="head">ローカル</th>
<th class="head">サーバ</th>
<th class="head">_</th>
<th class="head">_</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>初期ロードスクリプト</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch.js</td>
<td>AMDロードパスを設定し、PJで使用するUIモジュールの初期化ルーチンを実行する。 <br />
また、スクリプトロード直後でしか実行できない処理をあわせて行う。 <br />
(iPadでの画面ロードサイズに関する問題の対処スクリプトの適用など)</td>
</tr>
<tr class="row-even"><td>ミニファイ済みスクリプト</td>
<td>×</td>
<td>○</td>
<td>/js/nablarch-minify.js</td>
<td>初期ロードスクリプトの依存ライブラリを全て結合し、ミニファイした
スクリプト。
本番環境では、このスクリプトと require.js のみを使用する。</td>
</tr>
<tr class="row-odd"><td>AMDスクリプトローダ</td>
<td>△</td>
<td>○</td>
<td>/js/require.js</td>
<td>AMD形式で記述されたJavaScript部品のローダ</td>
</tr>
<tr class="row-even"><td>テキストリソースローダ</td>
<td>○</td>
<td>△</td>
<td>/js/text.js</td>
<td>require.js の拡張プラグイン。JavaScript以外のテキストリソースを
XHR経由で動的にロードする。</td>
</tr>
<tr class="row-odd"><td>jQueryライブラリ</td>
<td>○</td>
<td>△</td>
<td>/js/jquery.js</td>
<td>DOM操作API/イベント管理APIのブラウザ間互換レイヤーを提供する。</td>
</tr>
<tr class="row-even"><td>sugar.js</td>
<td>○</td>
<td>△</td>
<td>/js/sugar.js</td>
<td>ECMAScript5互換関数および、その他のユーティリティ系API群の提供</td>
</tr>
<tr class="row-odd"><td>簡易BigDecimal</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/util/
BigDecimal.js</td>
<td>JavaScriptによる簡易BigDecimal実装。</td>
</tr>
<tr class="row-even"><td>簡易SimpleDateFormat</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/util/
SimpleDateFormat.js</td>
<td>Java SDK SimpleDateFormat の仕様のうち、
日付に関する処理のサブセットを実装する。</td>
</tr>
<tr class="row-odd"><td>日付ライブラリ</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/util/
DateUtil.js</td>
<td>JavaScriptネイティブ日付型(Date)と
日付文字列との相互変換を行うためのライブラリ。</td>
</tr>
<tr class="row-even"><td>UI部品共通プロトタイプ</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/ui/
Widget.js</td>
<td>UI部品の実装に必要な共通機能(HTMLノードへのバインド
/イベント定義/画面ロード時処理の起動)などを実装
する共通プロトタイプ。</td>
</tr>
<tr class="row-odd"><td>自動集計</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/ui/
AutoSum.js</td>
<td>入出力項目の自動集計を行うUI部品。</td>
</tr>
<tr class="row-even"><td>日付入力部品</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/ui/
DatePicker.js</td>
<td>カレンダーを用いた日付入力を実装するUI部品</td>
</tr>
<tr class="row-odd"><td>カレンダーテンプレート</td>
<td>△</td>
<td>△</td>
<td>/js/nablarch/ui/
DatePicker.template</td>
<td>日付入力部品のカレンダー部分に表示する
HTMLを記述するテキストファイル。</td>
</tr>
<tr class="row-even"><td>リストビルダー部品</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/ui/
ListBuilder.js</td>
<td>2つのセレクトボックスを用いた、複数選択用のUI</td>
</tr>
<tr class="row-odd"><td>リストビルダーテンプレート</td>
<td>△</td>
<td>△</td>
<td>/js/nablarch/ui/
ListBuilder.template</td>
<td>リストビルダーの制御ボタン部分に表示する
HTMLを記述するテキストファイル。</td>
</tr>
<tr class="row-even"><td>タブ切り替え部品</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/ui/
Tab.js</td>
<td>JavaScriptによるページ内タブ切り替えUIを実装する部品。</td>
</tr>
<tr class="row-odd"><td>Nablarchサブミット連動</td>
<td>○</td>
<td>△</td>
<td>/js/nablarch/ui/
event.js</td>
<td>Nablarchのサブミット制御管理機構に連動して、
画面サブミットの前後に発火するカスタムイベントを
定義する。</td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[2]</a></td><td><dl class="first last docutils">
<dt><strong>「サーバ」:</strong></dt>
<dd>実働環境にデプロイして使用するかどうか</dd>
<dt><strong>「ローカル」:</strong></dt>
<dd>ローカル動作時に使用するかどうか</dd>
<dt><strong>○ :</strong></dt>
<dd>使用する</dd>
<dt><strong>△ :</strong></dt>
<dd>直接は使用しないがミニファイしたファイルの一部として使用する。</dd>
<dt><strong>× :</strong></dt>
<dd>使用しない</dd>
</dl>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="id12">
<h2>2.1.16.4. 新規 JavaScript UI部品の作成方法<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本ドキュメントでは、UI部品カタログに収録されている既存のもの以外の
UI部品を作成する方法について解説する。</p>
<div class="section" id="id13">
<h3>2.1.16.4.1. 作成するファイル<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>標準的なUI部品は以下の3つのファイルから構成される。</p>
<dl class="docutils">
<dt><strong>1. モジュール定義ファイル(.js)</strong></dt>
<dd><p class="first">ウィジェットの処理を記述したJavaScriptファイルである。
以下の場所に配置する。:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>(コンテキストルート)/js/(PJ名)/ui/(ウィジェット名).js
</pre></div>
</div>
</dd>
<dt><strong>2. テンプレートファイル(.template)</strong></dt>
<dd><p class="first">ウィジェット内のUIを定義するHTMLファイルである。
モジュール定義ファイルと同じ場所に配置する。:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>(コンテキストルート)/js/(PJ名)/ui/(ウィジェット名).template
</pre></div>
</div>
</dd>
<dt><strong>3. スタイル定義(.less)</strong></dt>
<dd><p class="first">ウィジェットのスタイルを定義するCSS(LESS)ファイルである。
以下の場所に配置する。:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span>(コンテキストルート)/css/ui/(ウィジェット名).less
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id14">
<h3>2.1.16.4.2. ウィジェットの実装例<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下のソースコードは、単純なモーダルダイアログを実装するサンプルである。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// ==============================================</span>
<span class="c1">// モジュール定義</span>
<span class="c1">// ===============================================</span>
<span class="c1">// グローバル関数define() によりモジュールを定義する。</span>
<span class="c1">//</span>
<span class="c1">// 依存関係の定義</span>
<span class="c1">// -----------------------------------</span>
<span class="c1">// この関数の第一引数には、このモジュールが依存するモジュールのパスの配列を指定する。</span>
<span class="c1">// モジュールのパスは、(コンテキストルート)/js/ からの相対パスを指定する。</span>
<span class="c1">// また、&quot;./&quot;で始まるパスは、このソースファイルからの相対パスとみなされる。</span>
<span class="c1">// パスの先頭に&quot;text!&quot;を指定した場合、当該のファイルはJavaScriptとして評価されず、</span>
<span class="c1">// ファイルの内容を文字列として読み込む。</span>
<span class="c1">//</span>
<span class="nx">define</span><span class="p">([</span>
  <span class="s2">&quot;jquery&quot;</span>                       <span class="c1">// jQueryライブラリ</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/Widget&quot;</span>           <span class="c1">// ウィジェットの共通基底クラス</span>
<span class="p">,</span> <span class="s2">&quot;text!./ModalDialog.template&quot;</span>  <span class="c1">// モーダルダイアログのHTML</span>
<span class="p">,</span> <span class="s2">&quot;nablarch/ui/event&quot;</span>            <span class="c1">// nablarchの動作に関連したイベントの定義</span>
<span class="p">,</span> <span class="s2">&quot;sugar&quot;</span>                        <span class="c1">// sugar.js</span>
<span class="p">],</span>
<span class="c1">// ----------------------------------</span>
<span class="c1">// モジュールの初期化</span>
<span class="c1">// ----------------------------------</span>
<span class="c1">// define の第2引数には、このモジュールの初期化を行う関数を指定する。</span>
<span class="c1">// この初期化関数の引数には、defineの第1引数に指定した各モジュールの内容が渡される。</span>
<span class="c1">//</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">Widget</span><span class="p">,</span> <span class="nx">template</span><span class="p">)</span> <span class="p">{</span> <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
  <span class="c1">//</span>
  <span class="c1">// モジュール定義を行う関数</span>
  <span class="c1">// =================================</span>
  <span class="c1">// モジュールの初期化を行う関数を冒頭に定義し、この関数の最後で呼び出す。</span>
  <span class="c1">// (このコードが冒頭に記述することで、モジュールの内容を把握し易くなる。)</span>
  <span class="kd">function</span> <span class="nx">define</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// jQueryプラグインメソッド $.fn.widgets() を使用して、マーカCSSが指定された</span>
    <span class="c1">// 各ノードに対して画面上のウィジェットを初期化する。</span>
    <span class="c1">// マーカCSSの名称は (プロジェクト名)_(ウィジェット名) とする。</span>
    <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.sample_ModalDialog.-content&quot;</span><span class="p">).</span><span class="nx">widgets</span><span class="p">(</span><span class="nx">ModalDialog</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="c1">// このモジュールの内容(=ウィジェットのコンストラクタ関数)をリターンする。</span>
    <span class="k">return</span> <span class="nx">ModalDialog</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// ウィジェットクラスのプロトタイプ定義</span>
  <span class="c1">// ========================================</span>
  <span class="c1">// 本PJでのクラス定義はJavaScriptの言語仕様のみを用いたオーソドックスなスタイルで行う。</span>
  <span class="c1">// 下記のように、ウィジェットのプロトタイプを定義する。</span>
  <span class="c1">//</span>
  <span class="nx">ModalDialog</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="k">new</span> <span class="nx">Widget</span><span class="p">(),</span> <span class="p">{</span>   <span class="c1">// Widgetコンストラクタのプロトタイプを継承する。</span>
    <span class="c1">// コンストラクタ</span>
    <span class="nx">constructor</span> <span class="o">:</span> <span class="nx">ModalDialog</span>   <span class="c1">// instanceof 演算子を正常に動作させるために必要。</span>
    <span class="c1">// プロパティ</span>
  <span class="p">,</span> <span class="nx">$dialog</span>   <span class="o">:</span> <span class="kc">null</span>
  <span class="p">,</span> <span class="nx">contentId</span> <span class="o">:</span> <span class="kc">null</span>
  <span class="p">,</span> <span class="nx">isActive</span>  <span class="o">:</span> <span class="kc">null</span>
    <span class="c1">// メソッド</span>
  <span class="p">,</span> <span class="nx">show</span> <span class="o">:</span> <span class="nx">ModalDialog_show</span>
  <span class="p">,</span> <span class="nx">hide</span> <span class="o">:</span> <span class="nx">ModalDialog_hide</span>
  <span class="p">});</span>

  <span class="c1">// イベント定義</span>
  <span class="c1">// ============================================</span>
  <span class="c1">// ウィジェットおよび、ウィジェットのプロパティとして定義されたノード上のイベントと、</span>
  <span class="c1">// それを処理するイベントハンドラとの対応を以下の書式に従って記述する。</span>
  <span class="c1">//</span>
  <span class="c1">//   1. &quot;(イベント名)&quot; : (イベントハンドラ)</span>
  <span class="c1">//   2. &quot;(セレクタ式) (イベント名)&quot; : (イベントハンドラ)</span>
  <span class="c1">//   3. &quot;(コンテキストノード) (イベント名)&quot; : (イベントハンドラ)</span>
  <span class="c1">//   4. &quot;(コンテキストノード) (セレクタ式) (イベント名)&quot; : (イベントハンドラ)</span>
  <span class="c1">//</span>
  <span class="c1">// 1.ではマーカCSSを指定したノード(this.$node)上で発生するイベントに対するハンドラを登録する。</span>
  <span class="c1">// また2.のようにセレクタ式を指定することで、イベントの発生元がセレクタに合致する場合のみ処理を</span>
  <span class="c1">// 行うようにすることができる。(event deligation)</span>
  <span class="c1">//</span>
  <span class="c1">// 3. 4. では、(コンテキストノード)に指定したノード内で発生したイベントが対象となる。</span>
  <span class="c1">// (コンテキストノード)には $で開始されるプロパティ名もしくは &quot;document&quot; を指定する。</span>
  <span class="c1">//</span>
  <span class="c1">// (イベントハンドラ) には文字列および関数を使用できる。</span>
  <span class="c1">// 文字列の場合は、このウィジェットの同名のメソッドを呼び出す。</span>
  <span class="c1">// 関数の場合は、このウィジェットをbind()したものが呼び出される。</span>
  <span class="c1">//</span>
  <span class="nx">ModalDialog</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// 1. 起動要素がクリックされたらモーダルダイアログを開く</span>
    <span class="c1">//   -&gt; this.$node.on(&quot;click&quot;, function(evt) { return this.show(evt) }) と等価</span>
    <span class="c1">//</span>
    <span class="s2">&quot;click&quot;</span> <span class="o">:</span> <span class="s2">&quot;show&quot;</span>

    <span class="c1">// 2. ダイアログの閉じるボタンが押されたらダイアログを閉じる。</span>
    <span class="c1">//   -&gt; this.$dialog.on(&quot;click&quot;, &quot;button.close&quot;, function(evt) { return this.hide(evt) }) と等価</span>
    <span class="c1">//</span>
  <span class="p">,</span> <span class="s2">&quot;$dialog button.close click&quot;</span> <span class="o">:</span> <span class="s2">&quot;hide&quot;</span>

    <span class="c1">// 3. ダイアログが開いている間は画面上のサブミット処理を全て無効化する。</span>
    <span class="c1">//   -&gt; $(document).on(&quot;beforeSubmit&quot;, (function() {return false}).bind(this)) と等価</span>
    <span class="c1">//   ※  カスタムイベント &quot;beforeSubmit.nablarch&quot; は &quot;nablarch/ui/event&quot; の中で定義されており、</span>
    <span class="c1">//      グローバル関数 nablarch_submit() によってサブミットが行われる直前に呼ばれる。</span>
    <span class="c1">//</span>
  <span class="p">,</span> <span class="s2">&quot;document beforeSubmit&quot;</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="nx">isActive</span> <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// ウィジェットの識別子</span>
  <span class="c1">// ===================================</span>
  <span class="c1">// 内部的に使用される。</span>
  <span class="c1">// マーカCSSと同じ (PJ名)_(ウィジェット名) とする。</span>
  <span class="nx">ModalDialog</span><span class="p">.</span><span class="nx">widgetType</span> <span class="o">=</span> <span class="s2">&quot;sample_ModalDialog&quot;</span><span class="p">;</span>

  <span class="c1">// ウィジェットのコンストラクタ関数</span>
  <span class="c1">// ===============================================</span>
  <span class="c1">// 第1引数にウィジェットのマーカCSSを指定したDOMノード、</span>
  <span class="c1">// 第2引数にはマーカCSSの後に指定したオプションが渡される。</span>
  <span class="c1">// なお、JavaScriptでは親クラスのコンストラクタは呼ばれないので、明示的に呼び出す必要がある。</span>
  <span class="c1">//</span>
  <span class="kd">function</span> <span class="nx">ModalDialog</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// プロパティの初期化</span>
    <span class="c1">// -------------------------------------------</span>
    <span class="c1">// 各プロパティの初期化を行う。</span>
    <span class="c1">// 特に、ノードプロパティの初期化Widgetコンストラクタの呼び出しよりも先に行う必要がある。</span>
    <span class="c1">// ※  ノードの内容は後でカスタマイズしやすいように、テンプレートファイルを使用すること。</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">contentId</span> <span class="o">=</span> <span class="nx">option</span><span class="p">.</span><span class="nx">content</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isActive</span>  <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$dialog</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">template</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span>
                       <span class="nx">display</span>   <span class="o">:</span> <span class="s2">&quot;none&quot;</span>
                     <span class="p">,</span> <span class="nx">position</span>  <span class="o">:</span> <span class="s2">&quot;absolute&quot;</span>
                     <span class="p">,</span> <span class="s2">&quot;z-index&quot;</span> <span class="o">:</span> <span class="s2">&quot;5&quot;</span>
                     <span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>

    <span class="c1">// Widgetコンストラクタの呼び出し</span>
    <span class="c1">// --------------------------------------------------</span>
    <span class="c1">// 共通初期化処理を行う。</span>
    <span class="c1">// (詳細な内容については、 nablarch/ui/Widget.js 内のドキュメントを参照)</span>
    <span class="nx">Widget</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>

    <span class="c1">// -content オプションに指定されたidの内容をダイアログの内容として取り込む。</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$dialog</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;div.content&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">contentId</span><span class="p">);</span>
  <span class="p">}</span>


  <span class="c1">// ウィジェットのメソッド、イベントハンドラの定義</span>
  <span class="c1">// ===============================================</span>
  <span class="c1">// イベントハンドラとして登録した場合、第一引数にはイベントオブジェクト(jQuery.Event) が渡される。</span>
  <span class="c1">// イベントオブジェクトのtarget属性には、イベントの発生元のDOMノードオブジェクトが設定されている。</span>
  <span class="c1">// また、明示的にfalseをリターンすることで、イベントのプロパゲーションとデフォルトアクションの実行を抑止する</span>
  <span class="c1">// ことができる。</span>

  <span class="kd">function</span> <span class="nx">ModalDialog_show</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isActive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$dialog</span><span class="p">.</span><span class="nx">slideDown</span><span class="p">(</span><span class="s2">&quot;fast&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// デフォルトアクションを抑止する。</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">ModalDialog_hide</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isActive</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$dialog</span><span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="s2">&quot;fast&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// デフォルトアクションを抑止する。</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">define</span><span class="p">();</span>  <span class="c1">// モジュールの内容をリターンする。</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'5u20',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../_static/custom.js"></script>
      <script type="text/javascript" src="../../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>