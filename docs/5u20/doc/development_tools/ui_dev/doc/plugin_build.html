


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1.4. プラグインビルドコマンド仕様 &mdash; ∇Nablarch  5u20 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/development_tools/ui_dev/doc/plugin_build.html" />
  
    <link rel="top" title="∇Nablarch  5u20 ドキュメント" href="../../../index.html"/>
        <link rel="up" title="2.1. Nablarch UI開発基盤 解説書" href="index.html"/>
        <link rel="next" title="2.1.5. JavaScript UI部品一覧" href="reference_js_framework.html"/>
        <link rel="prev" title="2.1.3. 既知の問題" href="known_issues.html"/>
 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u20</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_nablarch/index.html">Nablarchについて</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/concept.html">Nablarchのコンセプト</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/mvn_module.html">Nablarch のモジュール一覧</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/license.html">Nablarchのライセンスについて</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../application_framework/index.html">Nablarchアプリケーションフレームワーク</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../application_framework/application_framework/index.html">アプリケーションフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/nablarch/index.html">1. Nablarchアプリケーションフレームワークとは</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/web/index.html">2. ウェブアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/web_service/index.html">3. ウェブサービス編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/batch/index.html">4. バッチアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/messaging/index.html">5. メッセージング編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/handlers/index.html">6. Nablarchの提供する標準ハンドラ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/libraries/index.html">7. Nablarchが提供するライブラリ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/blank_project/index.html">8. ブランクプロジェクト</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/setting_guide/index.html">9. Nablarchアプリケーションフレームワーク設定ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/configuration/index.html">10. デフォルト設定一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/cloud_native/index.html">11. Nablarchクラウドネイティブ対応</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../application_framework/adaptors/index.html">アダプタ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/log_adaptor.html">logアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/router_adaptor.html">ルーティングアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/webspheremq_adaptor.html">IBM WebSphere MQアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/jaxrs_adaptor.html">JAX-RSアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/doma_adaptor.html">Domaアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/jsr310_adaptor.html">JSR310(Date and Time API)アダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarkerアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/mail_sender_velocity_adaptor.html">E-mail Velocityアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/web_thymeleaf_adaptor.html">ウェブアプリケーション Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/lettuce_adaptor.html">Lettuceアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/slf4j_adaptor.html">SLF4Jアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/micrometer_adaptor.html">Micrometerアダプタ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../application_framework/example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/example/index.html#id1">環境構築手順について</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/example/index.html#id2">アプリケーションの実行手順について</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../extension_components/index.html">Nablarch拡張コンポーネント</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/report/index.html">1. 帳票ライブラリ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/report/index.html#id2">1.1. 概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/report/index.html#id3">1.2. 要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/report/index.html#id7">1.3. 構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/report/index.html#report-template">1.4. 実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html">2. ワークフローライブラリ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html#id3">2.1. 機能概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html#id6">2.2. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html#id7">2.3. 使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html#xor">2.4. XORゲートウェイの進行先ノードの判定方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/doc/index.html#workflow-multi-completion">2.5. マルチインスタンスの完了条件の判定方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/workflow/tool/index.html">3. ワークフロー定義データ生成ツール</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/tool/index.html#id3">3.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/workflow/tool/index.html#id4">3.2. 使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/etl/index.html">4. ETL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/index.html#id3">4.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/index.html#etl-phase">4.2. ETLの各フェーズの仕様</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/index.html#id5">4.3. ETLを使用するバッチの設計ポイント</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/index.html#id9">4.4. 使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/index.html#id18">4.5. 拡張例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../extension_components/etl/etl_maven_plugin.html">5. ETL Mavenプラグイン</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/etl_maven_plugin.html#id2">5.1. モジュール一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../extension_components/etl/etl_maven_plugin.html#id3">5.2. 使用方法</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Nablarch開発ツール</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../java_static_analysis/index.html">1. 効率的なJava静的チェック</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../java_static_analysis/index.html#code-analysis">1.1. 構文チェックを行う</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../java_static_analysis/index.html#code-format">1.2. フォーマットを統一する</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../java_static_analysis/index.html#api">1.3. 許可していないAPIが使用されていないかチェックする</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">2. フロントエンド上級者向けのUI開発基盤</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">2.1. Nablarch UI開発基盤 解説書</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/index.html">2.2. JSP/HTML作成ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/widget_usage/widget_list.html">2.3. UI部品の実装サンプルで提供しているウィジェットの一覧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../testing_framework/index.html">3. テスティングフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../testing_framework/guide/development_guide/05_UnitTestGuide/index.html">3.1. 単体テスト実施方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../testing_framework/guide/development_guide/06_TestFWGuide/index.html">3.2. 自動テストフレームワークの使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../testing_framework/guide/development_guide/08_TestTools/index.html">3.3. プログラミング工程で使用するツール</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../toolbox/index.html">4. アプリケーション開発時に使える便利なツール</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../toolbox/JspStaticAnalysis/index.html">4.1. JSP静的解析ツール</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../toolbox/JspVerifier/JspVerifier.html">4.3. 業務画面JSP検証ツール</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Nablarch実装例集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/01/index.html">データベースを用いたパスワード認証機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/0101_PBKDF2PasswordEncryptor.html">PBKDF2を用いたパスワード暗号化機能サンプル</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/01/index.html#id12">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/02/index.html">バリデーション機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#extendedvalidation-mailaddressvalidator">メールアドレスバリデーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#extendedvalidation-japanesetelnumbervalidator">日本電話番号バリデーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/02/index.html#id12">コード値精査</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/03/index.html">検索結果の一覧表示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#id5">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#id8">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchinfo">ListSearchInfoクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult">listSearchResultタグ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-sort">検索結果の並び替え</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-nopaging">1画面にすべての検索結果を一覧表示する場合の実装方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-defaultcondition">デフォルトの検索条件で検索した結果を初期表示する場合の実装方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-setting">検索結果の一覧表示機能のデフォルト値設定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-customize">業務アプリケーションへのサンプル実装(タグファイル)の取り込み方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/03/index.html#listsearchresult-tagreference">タグリファレンス</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/04/index.html">フォーマッタ機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/04/0401_ExtendedDataFormatter.html">データフォーマッタの拡張</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/04/0402_ExtendedFieldType.html">データフォーマッタ機能におけるフィールドタイプの拡張</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/05/index.html">データベースを用いたファイル管理機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#id2">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#id6">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#id7">機能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#id10">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/05/index.html#id15">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/06/index.html">CAPTCHA機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/06_Captcha_guide.html">CAPTCHA機能の組み込み手順</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/06/index.html#id21">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/07/index.html">UserAgent情報取得機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#id3">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#id8">設定の記述</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/07/index.html#id11">使用例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/08/index.html">HTMLメール送信機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#id3">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/08/index.html#id14">実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/09/index.html">bouncycastleを使用した電子署名つきメールの送信サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#id3">環境準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#id4">電子署名付きメール送信機能の構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#id5">設定ファイルの準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/09/index.html#id7">実行方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/10/index.html">ログ集計サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/10/index.html#id3">提供サンプル一覧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/11/index.html">メッセージング基盤テストシミュレータサンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#id4">用途</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#id8">特徴</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#id12">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#id15">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/11/index.html#id18">拡張例</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Nablarch開発ツール</a> &raquo;</li>
      
          <li><a href="../index.html">2. フロントエンド上級者向けのUI開発基盤</a> &raquo;</li>
      
          <li><a href="index.html">2.1. Nablarch UI開発基盤 解説書</a> &raquo;</li>
      
    <li>2.1.4. プラグインビルドコマンド仕様</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/en/index.html" class="en">English</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>2.1.4. プラグインビルドコマンド仕様<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="id2">
<h2>2.1.4.1. 概要<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本章では <a class="reference internal" href="#project-structure"><span>想定されるプロジェクト構成ごとの設定例</span></a> および <a class="reference internal" href="#config-command-detail"><span>プラグインビルドで使用するコマンドや設定ファイルの詳細仕様</span></a> を示す。</p>
<p>プラグインビルドコマンドが使用されるプロジェクトの標準的な構成については <a class="reference internal" href="structure/directory_layout.html"><em>標準プロジェクト構成</em></a> を、
開発時のフローについては <a class="reference internal" href="development_environment/initial_setup.html"><em>UI開発基盤の導入</em></a> を参照。</p>
</div>
<div class="section" id="project-structure">
<span id="id3"></span><h2>2.1.4.2. 想定されるプロジェクト構成ごとの設定例<a class="headerlink" href="#project-structure" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>想定されるプロジェクト構成について、プラグインビルドコマンドの設定ファイルや実行ファイルの具体的な設定例を示す。
下記の設定例に示していない項目については、後述する <a class="reference internal" href="#config-file"><span>設定ファイル</span></a> や <a class="reference internal" href="#build-command"><span>ビルドコマンド</span></a> を参照し、必要に応じて修正すること。</p>
<div class="section" id="id4">
<h3>2.1.4.2.1. デプロイ対象プロジェクトが１つの場合<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>以下にプロジェクトの構成図および設定例を示す。</p>
<p>本構成は全ての画面で共通のプラグインを使用する場合に使用する。</p>
<p><strong>構成図</strong></p>
<p>Nablarch標準UIプラグイン、プロジェクト固有UIプラグイン、UIローカルデモ用プロジェクト、UI開発基盤テスト用プロジェクト、デプロイ対象プロジェクトがそれぞれ１つずつ配置される。</p>
<blockquote>
<div><img alt="../../../_images/project_structure1.png" src="../../../_images/project_structure1.png" />
</div></blockquote>
<p><strong>設定例</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="#install"><span>インストールコマンド</span></a> の設定</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/nablarch_plugins_bundle/bin/install.bat</p>
</div></blockquote>
<p>プロジェクトルートおよびプロジェクト固有UIプラグインのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="19%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_ROOT</td>
<td>&#8221;../../web_project&#8221;</td>
<td>コマンドの起動フォルダはnablarch_plugins_bundle/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>UI_PLUGINS_DIRS</td>
<td>&#8220;ui_plugins&#8221;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> の設定</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins/pjconf.json</p>
</div></blockquote>
<p>プロジェクトルートおよび各プロジェクトのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="16%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pathSettings/projectRootPath</td>
<td>&#8221;../..&#8221;</td>
<td>コマンドの起動フォルダはweb_project/ui_plugins/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>pathSettings/webProjectPath</td>
<td>&#8220;web/src/main/webapp&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>pathSettings/demoProjectPath</td>
<td>&#8220;ui_demo&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>pathSettings/testProjectPath</td>
<td>&#8220;ui_test&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>pathSettings/pluginProjectPath</td>
<td>&#8220;ui_plugins&#8221;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id5">
<h3>2.1.4.2.2. デプロイ対象プロジェクト複数の場合(プラグインは共通)<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>以下にプロジェクトの構成図および設定例を示す。</p>
<p>本構成は外部公開サイトと管理用サイト等、いくつかの画面単位でデプロイ対象プロジェクトを分割する場合で、
サイト間で基本的な画面レイアウト等が大きく変化しないような場合（同一のUI標準を適用する場合）に使用する。</p>
<p><strong>構成図</strong></p>
<p>Nablarch標準UIプラグイン、プロジェクト固有UIプラグイン、UI開発基盤テスト用プロジェクトがそれぞれ１つ、
UIローカルデモ用プロジェクト、デプロイ対象プロジェクトが外部公開サイト用および管理サイト用でそれぞれ２つずつ配置される。</p>
<blockquote>
<div><img alt="../../../_images/project_structure2.png" src="../../../_images/project_structure2.png" />
</div></blockquote>
<p><strong>設定例</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="#install"><span>インストールコマンド</span></a> の設定</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/nablarch_plugins_bundle/bin/install.bat</p>
</div></blockquote>
<p>プロジェクトルートおよびプロジェクト固有UIプラグインのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="19%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_ROOT</td>
<td>&#8221;../../web_project&#8221;</td>
<td>コマンドの起動フォルダはnablarch_plugins_bundle/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>UI_PLUGINS_DIRS</td>
<td>&#8220;ui_plugins&#8221;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> の設定(外部公開サイト用)</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins/pjconf_public.json (標準のpjconf.jsonファイルをコピーする)</p>
</div></blockquote>
<p>プロジェクトルートおよび各プロジェクトのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="19%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pathSettings/projectRootPath</td>
<td>&#8221;../..&#8221;</td>
<td>コマンドの起動フォルダはweb_project/ui_plugins/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>pathSettings/webProjectPath</td>
<td>&#8220;web_public/src/main/webapp&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>pathSettings/demoProjectPath</td>
<td>&#8220;ui_demo_public&#8221;</td>
<td>業務画面は個別で作成するため、管理サイトと分ける</td>
</tr>
<tr class="row-odd"><td>pathSettings/testProjectPath</td>
<td>&#8220;ui_test&#8221;</td>
<td>プラグインは共通のため、UI開発基盤テスト用プロジェクトは管理サイト用と共用</td>
</tr>
<tr class="row-even"><td>pathSettings/pluginProjectPath</td>
<td>&#8220;ui_plugins&#8221;</td>
<td>プラグインは共通のため、プロジェクト固有UIプラグインは管理サイト用と共用</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#ui-build"><span>UIビルドコマンド</span></a> の設定(外部公開サイト用)</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins/bin/ui_build_public.bat (標準のui_build.batコマンドをコピーする)</p>
</div></blockquote>
<p>外部公開サイト用プロジェクト設定ファイルを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="19%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_CONF</td>
<td>&#8221;../pjconf_public.json&#8221;</td>
<td>コマンドの起動フォルダはnablarch_plugins_bundle/binとなるため、そこからの相対パス</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> の設定(管理サイト用)</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins/pjconf_manage.json (標準のpjconf.jsonファイルをコピーする)</p>
</div></blockquote>
<p>プロジェクトルートおよび各プロジェクトのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="19%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pathSettings/projectRootPath</td>
<td>&#8221;../..&#8221;</td>
<td>コマンドの起動フォルダはweb_project/ui_plugins/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>pathSettings/webProjectPath</td>
<td>&#8220;web_manage/src/main/webapp&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>pathSettings/demoProjectPath</td>
<td>&#8220;ui_demo_manage&#8221;</td>
<td>業務画面は個別で作成するため、外部公開サイトと分ける</td>
</tr>
<tr class="row-odd"><td>pathSettings/testProjectPath</td>
<td>&#8220;ui_test&#8221;</td>
<td>プラグインは共通のため、UI開発基盤テスト用プロジェクトは外部公開サイト用と共用</td>
</tr>
<tr class="row-even"><td>pathSettings/pluginProjectPath</td>
<td>&#8220;ui_plugins&#8221;</td>
<td>プラグインは共通のため、プロジェクト固有UIプラグインは外部公開サイト用と共用</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#ui-build"><span>UIビルドコマンド</span></a> の設定(管理サイト用)</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins/bin/ui_build_manage.bat (標準のui_build.batコマンドをコピーする)</p>
</div></blockquote>
<p>管理サイト用プロジェクト設定ファイルを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="19%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_CONF</td>
<td>&#8221;../pjconf_manage.json&#8221;</td>
<td>コマンドの起動フォルダはnablarch_plugins_bundle/binとなるため、そこからの相対パス</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id6">
<h3>2.1.4.2.3. デプロイ対象プロジェクト複数の場合(プラグインも個別)<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>以下にプロジェクトの構成図および設定例を示す。</p>
<p>本構成は外部公開サイトと管理用サイト等、いくつかの画面単位でデプロイ対象プロジェクトを分割する場合で、
サイト間で基本的な画面レイアウト等が大きく変化するような場合（適用するUI標準が変化する場合）に使用する。</p>
<p><strong>構成図</strong></p>
<p>Nablarch標準UIプラグインがそれぞれ１つ、
プロジェクト固有UIプラグイン、UI開発基盤テスト用プロジェクト、UIローカルデモ用プロジェクト、デプロイ対象プロジェクトが外部公開サイト用および管理サイト用でそれぞれ２つずつ配置される。</p>
<blockquote>
<div><img alt="../../../_images/project_structure3.png" src="../../../_images/project_structure3.png" />
</div></blockquote>
<p><strong>設定例</strong></p>
<ul>
<li><p class="first"><a class="reference internal" href="#install"><span>インストールコマンド</span></a> の設定</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/nablarch_plugins_bundle/bin/install.bat</p>
</div></blockquote>
<p>プロジェクトルートおよびプロジェクト固有UIプラグインのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="30%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_ROOT</td>
<td>&#8221;../../web_project&#8221;</td>
<td>コマンドの起動フォルダはnablarch_plugins_bundle/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>UI_PLUGINS_DIRS</td>
<td>&#8220;ui_plugins_public,ui_plugins_manage&#8221;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> の設定(外部公開サイト用)</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins_public/pjconf.json (標準のui_pluginsフォルダ全体をコピーする)</p>
</div></blockquote>
<p>プロジェクトルートおよび各プロジェクトのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="20%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pathSettings/projectRootPath</td>
<td>&#8221;../..&#8221;</td>
<td>コマンドの起動フォルダはweb_project/ui_plugins_public/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>pathSettings/webProjectPath</td>
<td>&#8220;web_public/src/main/webapp&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>pathSettings/demoProjectPath</td>
<td>&#8220;ui_demo_public&#8221;</td>
<td>業務画面は個別で作成するため、管理サイトと分ける</td>
</tr>
<tr class="row-odd"><td>pathSettings/testProjectPath</td>
<td>&#8220;ui_test_public&#8221;</td>
<td>プラグインも個別のため、UI開発基盤テスト用プロジェクトも管理サイトと分ける</td>
</tr>
<tr class="row-even"><td>pathSettings/pluginProjectPath</td>
<td>&#8220;ui_plugins_public&#8221;</td>
<td>プラグインも個別のため、プロジェクト固有UIプラグインも管理サイトと分ける</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> の設定(管理サイト用)</p>
<p>本構成では、以下のファイルとなる。</p>
<blockquote>
<div><p>/web_project/ui_plugins_manage/pjconf.json (標準のui_pluginsフォルダ全体をコピーする)</p>
</div></blockquote>
<p>プロジェクトルートおよび各プロジェクトのフォルダを設定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目</th>
<th class="head">設定値</th>
<th class="head">備考</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pathSettings/projectRootPath</td>
<td>&#8221;../..&#8221;</td>
<td>コマンドの起動フォルダはweb_project/ui_plugins_manage/binとなるため、そこからの相対パス</td>
</tr>
<tr class="row-odd"><td>pathSettings/webProjectPath</td>
<td>&#8220;web_manage/src/main/webapp&#8221;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>pathSettings/demoProjectPath</td>
<td>&#8220;ui_demo_manage&#8221;</td>
<td>業務画面は個別で作成するため、外部公開サイトと分ける</td>
</tr>
<tr class="row-odd"><td>pathSettings/testProjectPath</td>
<td>&#8220;ui_test_manage&#8221;</td>
<td>プラグインも個別のため、UI開発基盤テスト用プロジェクトも外部公開サイトと分ける</td>
</tr>
<tr class="row-even"><td>pathSettings/pluginProjectPath</td>
<td>&#8220;ui_plugins_manage&#8221;</td>
<td>プラグインも個別のため、プロジェクト固有UIプラグインも外部公開サイトと分ける</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="config-command-detail">
<span id="id7"></span><h2>2.1.4.3. プラグインビルドで使用するコマンドや設定ファイルの詳細仕様<a class="headerlink" href="#config-command-detail" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以降はプラグインビルドで使用するコマンドや設定ファイルについての詳細として、以下の項目について記述する。</p>
<ul class="simple">
<li><a class="reference internal" href="#config-file"><span>設定ファイル</span></a></li>
<li><a class="reference internal" href="#generate-file"><span>ファイルの自動生成</span></a></li>
<li><a class="reference internal" href="#build-file"><span>プラグイン、外部ライブラリの展開</span></a></li>
<li><a class="reference internal" href="#build-command"><span>ビルドコマンド</span></a></li>
</ul>
</div>
<div class="section" id="config-file">
<span id="id8"></span><h2>2.1.4.4. 設定ファイル<a class="headerlink" href="#config-file" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下にプラグインビルドコマンドで使用する設定ファイルを示す。</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="22%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ファイル名</th>
<th class="head">実ファイル名</th>
<th class="head">ファイル概要</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a></td>
<td>pjconf.json</td>
<td>環境毎のファイル展開設定ファイル。</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#lessimport-less"><span>lessインポート定義ファイル</span></a></td>
<td>${cssMode}.less</td>
<td>表示モードごとにインポートするファイルの定義。</td>
</tr>
</tbody>
</table>
<div class="section" id="pjconf-json">
<span id="id9"></span><h3>2.1.4.4.1. ビルドコマンド用設定ファイル<a class="headerlink" href="#pjconf-json" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>設定ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置フォルダ</th>
<th class="head">ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ui_plugins ( <a class="reference internal" href="#install"><span>インストールコマンド</span></a> で任意のフォルダに変更可能)</td>
<td>pjconf.json ( <a class="reference internal" href="#ui-build"><span>UIビルドコマンド</span></a> で任意のフォルダに変更可能)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>ファイル概要</strong></p>
<blockquote>
<div><p>プラグインの展開先ごとに定義する環境毎のビルドコマンド用設定ファイル。</p>
<p>以下の形式で定義する。</p>
<blockquote>
<div><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nt">&quot;pathSettings&quot;</span> <span class="p">:</span>
  <span class="p">{</span> <span class="nt">&quot;projectRootPath&quot;</span>   <span class="p">:</span> <span class="s2">&quot;&lt;プロジェクトルートパス(絶対パスまたは起動フォルダからの相対パス)&gt;&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;webProjectPath&quot;</span>    <span class="p">:</span> <span class="s2">&quot;&lt;ウェブプロジェクトのパス(プロジェクトルートからの相対パス)&gt;&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;demoProjectPath&quot;</span>   <span class="p">:</span> <span class="s2">&quot;&lt;ui_demoプロジェクトのパス(プロジェクトルートからの相対パス)&gt;&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;testProjectPath&quot;</span>   <span class="p">:</span> <span class="s2">&quot;&lt;ui_testプロジェクトのパス(プロジェクトルートからの相対パス)&gt;&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;pluginProjectPath&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;プラグインプロジェクトのパス(プロジェクトルートからの相対パス)&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">,</span> <span class="nt">&quot;cssMode&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;ビルド対象のCSSのモードリスト&gt;&quot;</span>
<span class="p">,</span> <span class="nt">&quot;plugins&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;展開対象のプラグインリスト&gt;&quot;</span>
<span class="p">,</span> <span class="nt">&quot;libraryDeployMappings&quot;</span><span class="p">:</span>
    <span class="p">{</span> <span class="nt">&quot;&lt;パッケージ名&gt;&quot;</span> <span class="p">:</span>
      <span class="p">{</span> <span class="nt">&quot;展開元のファイル(orフォルダ)&quot;</span><span class="p">:</span> <span class="s2">&quot;展開先のファイル(orフォルダ)&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">,</span> <span class="nt">&quot;imgcopy&quot;</span> <span class="p">:</span>
  <span class="p">{</span> <span class="nt">&quot;fromdirs&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;画像ファイルコピー元ディレクトリ名リスト&gt;&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;todirs&quot;</span>   <span class="p">:</span> <span class="s2">&quot;&lt;画像ファイルコピー先ディレクトリ名リスト&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">,</span> <span class="nt">&quot;excludedirs&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;コピー対象外ディレクトリ名リスト&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>以下に各設定値の定義方法を示す。</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="6%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">設定項目</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pathSettings/projectRootPath</td>
<td>必須</td>
<td><p class="first">以下のオプションで示す各パスを指定する。</p>
<table border="1" class="last docutils">
<colgroup>
<col width="19%" />
<col width="8%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">オプション</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>projectRootPath</td>
<td>必須</td>
<td>プロジェクトルートパス。 <br />
絶対パスまたは起動ディレクトリからの相対パスで指定する。</td>
</tr>
<tr class="row-odd"><td>webProjectPath</td>
<td>必須</td>
<td>デプロイ対象プロジェクトのパス。 <br />
プロジェクトルートからの相対パスで指定する。</td>
</tr>
<tr class="row-even"><td>demoProjectPath</td>
<td>任意</td>
<td>UIローカルデモプロジェクトのパス。 <br />
プロジェクトルートからの相対パスで指定する。 <br />
省略した場合は&#8221;ui_demo&#8221;となる。</td>
</tr>
<tr class="row-odd"><td>testProjectPath</td>
<td>任意</td>
<td>UI開発基盤テストプロジェクトのパス。 <br />
プロジェクトルートからの相対パスで指定する。 <br />
省略した場合は&#8221;ui_test&#8221;となる。</td>
</tr>
<tr class="row-even"><td>pluginProjectPath</td>
<td>任意</td>
<td>プラグインプロジェクトのパス。 <br />
プロジェクトルートからの相対パスで指定する。 <br />
省略した場合は&#8221;ui_plugins&#8221;となる。</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-odd"><td>cssMode</td>
<td>任意</td>
<td>ビルド対象のCSSのモードを配列で指定する。 <br />
省略した場合は[&#8220;wide&#8221;, &#8220;compact&#8221;, &#8220;narrow&#8221;]となる。</td>
</tr>
<tr class="row-even"><td>plugins</td>
<td>任意</td>
<td><p class="first">展開対象のプラグインリストをオブジェクトで指定する。 <br />
省略した場合は全てのプラグインおよびファイルが展開対象となる。 <br />
各プラグインはこのリストで定義された順に展開される。 <br />
オブジェクトの値は以下のオプションを指定する。</p>
<table border="1" class="last docutils">
<colgroup>
<col width="14%" />
<col width="8%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">オプション</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pattern</td>
<td>必須</td>
<td>展開対象のプラグイン名を正規表現で指定する。</td>
</tr>
<tr class="row-odd"><td>exclude</td>
<td>任意</td>
<td>プラグイン内で展開しないファイルを正規表現の配列で指定する。<br />
省略した場合はプラグイン内の全てのファイルが展開対象となる。</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td>libraryDeployMappings</td>
<td>任意</td>
<td>サードパーティライブラリで展開するファイルを設定する。<br />
対象のパッケージ名をキーとして、値にはファイルの展開元、展開先を定義したオブジェクトを設定する。<br />
展開元のファイルはパッケージ内の相対パスで指定する。 <br />
展開元のファイルとしてフォルダが指定された場合、フォルダ配下のファイルが全て展開される。
展開先のファイルは展開先(ui_test等)からの相対パスで指定する。 <br />
この時展開元と異なるファイル名を指定することでリネームして配置することが可能である。</td>
</tr>
<tr class="row-odd"><td>imgcopy</td>
<td>任意</td>
<td><p class="first">画像ファイルのコピーを行うディレクトリを指定する。 <br />
展開時に高解像度版の画像ファイルを低解像度版の画像ファイルディレクトリにコピーする際に使用される。<br />
省略した場合は画像ファイルのコピーが行われない。</p>
<table border="1" class="last docutils">
<colgroup>
<col width="14%" />
<col width="8%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">オプション</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>fromdirs</td>
<td>必須</td>
<td>コピー元ディレクトリを配列で指定する。 <br /></td>
</tr>
<tr class="row-odd"><td>todirs</td>
<td>必須</td>
<td>コピー先ディレクトリを配列で指定する。 <br /></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td>excludedirs</td>
<td>任意</td>
<td>展開時に共通的に除外されるディレクトリを指定する場合、ディレクトリ名を配列で指定する。<br />
省略した場合は隠しディレクトリ（.始まり）が除外対象となる。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>設定例</strong></p>
<blockquote>
<div><p>以下に本設定ファイルの設定例を示す。</p>
<blockquote>
<div><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nt">&quot;pathSettings&quot;</span> <span class="p">:</span>
  <span class="p">{</span> <span class="nt">&quot;projectRootPath&quot;</span>   <span class="p">:</span> <span class="s2">&quot;../..&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;webProjectPath&quot;</span>    <span class="p">:</span> <span class="s2">&quot;web/main/web&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;demoProjectPath&quot;</span>   <span class="p">:</span> <span class="s2">&quot;ui_demo&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;testProjectPath&quot;</span>   <span class="p">:</span> <span class="s2">&quot;ui_test&quot;</span>
  <span class="p">,</span> <span class="nt">&quot;pluginProjectPath&quot;</span> <span class="p">:</span> <span class="s2">&quot;ui_plugins&quot;</span>
  <span class="p">}</span>
<span class="p">,</span> <span class="nt">&quot;cssMode&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;compact&quot;</span><span class="p">,</span> <span class="s2">&quot;narrow&quot;</span><span class="p">]</span>
<span class="p">,</span> <span class="nt">&quot;plugins&quot;</span> <span class="p">:</span>
  <span class="p">[</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;nablarch-.*&quot;</span><span class="p">,</span> <span class="nt">&quot;exclude&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;hogeRegExp1&quot;</span><span class="p">,</span> <span class="s2">&quot;hogeRegExp2&quot;</span> <span class="p">]</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;web_project-.*&quot;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;requirejs&quot;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;sugar&quot;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;jquery&quot;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;requirejs-text&quot;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;font-awesome&quot;</span> <span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span> <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;less&quot;</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">,</span> <span class="nt">&quot;libraryDeployMappings&quot;</span><span class="p">:</span>
  <span class="p">{</span> <span class="nt">&quot;jquery&quot;</span> <span class="p">:</span>
    <span class="p">{</span> <span class="nt">&quot;dist/jquery.js&quot;</span><span class="p">:</span> <span class="s2">&quot;js/jquery.js&quot;</span>
    <span class="p">}</span>
  <span class="p">,</span> <span class="nt">&quot;requirejs&quot;</span> <span class="p">:</span>
    <span class="p">{</span> <span class="nt">&quot;require.js&quot;</span><span class="p">:</span> <span class="s2">&quot;js/require.js&quot;</span>
    <span class="p">}</span>
  <span class="p">,</span> <span class="nt">&quot;sugar&quot;</span> <span class="p">:</span>
    <span class="p">{</span> <span class="nt">&quot;release/sugar-full.development.js&quot;</span><span class="p">:</span> <span class="s2">&quot;js/sugar.js&quot;</span>
    <span class="p">}</span>
  <span class="p">,</span> <span class="nt">&quot;font-awesome&quot;</span><span class="p">:</span>
    <span class="p">{</span> <span class="nt">&quot;fonts/fonts*&quot;</span><span class="p">:</span> <span class="s2">&quot;fonts/fonts*&quot;</span>
    <span class="p">,</span> <span class="nt">&quot;css/font-awesome.min.css&quot;</span><span class="p">:</span> <span class="s2">&quot;css/font-awesome.min.css&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">,</span> <span class="nt">&quot;imgcopy&quot;</span><span class="p">:</span>
  <span class="p">{</span> <span class="nt">&quot;fromdirs&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;img/narrow/high&quot;</span><span class="p">,</span> <span class="s2">&quot;img/wide/high&quot;</span> <span class="p">]</span>
  <span class="p">,</span> <span class="nt">&quot;todirs&quot;</span><span class="p">:</span>   <span class="p">[</span> <span class="s2">&quot;img/wide/low&quot;</span><span class="p">,</span> <span class="s2">&quot;img/narrow/high&quot;</span><span class="p">,</span> <span class="s2">&quot;img/narrow/low&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">,</span> <span class="nt">&quot;excludedirs&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;hoge&quot;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="less">
<span id="lessimport-less"></span><h3>2.1.4.4.2. lessインポート定義ファイル<a class="headerlink" href="#less" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>設定ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="79%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置フォルダ</th>
<th class="head">ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ui_plugins/css/${デプロイ先種別} ( <a class="reference internal" href="#install"><span>インストールコマンド</span></a> で任意のフォルダに変更可能)</td>
<td>${表示モード}.less</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>ファイル概要</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">表示モードごとにインポートするファイルの定義。</div>
<div class="line">デプロイ先種別ごと、表示モードごとにファイルを作成する。</div>
<div class="line">（表示モードおよびlessファイルの内容については <a class="reference internal" href="internals/css_framework.html"><em>CSSフレームワーク</em></a> 参照）</div>
</div>
<p>デプロイ先種別として指定可能な値とデプロイ先を以下に示す。</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">デプロイ先種別</th>
<th class="head">デプロイ先</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ui_public</td>
<td>デプロイ対象プロジェクトのルートフォルダ(web)</td>
</tr>
<tr class="row-odd"><td>ui_test</td>
<td>UI開発基盤テスト用フォルダ(ui_test) <br />
UIローカルデモ用フォルダ(ui_demo)</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">lessファイルは <a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> の&#8221;cssMode&#8221;で指定されたモードと対応するファイルをそれぞれ作成する必要がある。</div>
<div class="line">例えば&#8221;cssMode&#8221;で[&#8220;wide&#8221;, &#8220;compact&#8221;, &#8220;narrow&#8221;]を指定した場合、以下のファイルを作成する。</div>
</div>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>ui_plugins/
 └── css/
      ├── ui_public/
      │    ├── wide.less
      │    ├── compact.less
      │    └── narrow.less
      └── ui_test/
           ├── wide.less
           ├── compact.less
           └── narrow.less
</pre></div>
</div>
</div></blockquote>
<p>lessファイルは以下の形式で定義する。</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre><span></span>@import &quot;インポート対象ファイル名&quot;;
@import &quot;インポート対象ファイル名&quot;;
                ：
</pre></div>
</div>
</div></blockquote>
<p>インポート対象ファイル名はファイルの配置フォルダからの相対パスで指定する。</p>
<dl class="docutils">
<dt>以下に定義例を示す。</dt>
<dd><div class="first last highlight-css"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">import</span> <span class="s2">&quot;../../node_modules/nablarch-widget-field-base/ui_public/css/field/base&quot;</span><span class="p">;</span>
<span class="p">@</span><span class="k">import</span> <span class="s2">&quot;../../node_modules/nablarch-widget-field-base/ui_public/css/field/base-wide&quot;</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="line-block">
<div class="line">なお、lessファイルは <a class="reference internal" href="#ui-genless"><span>lessインポート定義雛形生成コマンド</span></a> を使用して各プラグインからlessファイルを抽出した雛形を作成することができる。</div>
<div class="line">複数のlessファイル内で同一のセレクタが記述されている場合、後に記述されたセレクタの内容で上書きされる。</div>
<div class="line">そのためlessファイルをインポートする順序が大きな意味を持ち、作成された雛形を適宜修正する必要がある。</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="generate-file">
<span id="id10"></span><h2>2.1.4.5. ファイルの自動生成<a class="headerlink" href="#generate-file" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本プラグインビルドコマンドではプラグインや外部ライブラリをui_test、ui_demoなどの環境毎に展開後、CSSおよびJavaScriptファイルの一部を各環境毎に自動生成する。</p>
<div class="section" id="css">
<h3>2.1.4.5.1. CSSの自動生成<a class="headerlink" href="#css" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>CSS自動生成ファイル一覧</strong></p>
<blockquote>
<div><p>以下に自動生成されるCSSファイルの一覧を示す。</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="25%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">生成先フォルダ</th>
<th class="head">生成ファイル</th>
<th class="head">元になるファイル</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>css/built</td>
<td>${cssMode}-minify.css</td>
<td><a class="reference internal" href="#lessimport-less"><span>lessインポート定義ファイル</span></a> で定義されたされたcssファイル。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>CSSファイル生成イメージ</strong></p>
<blockquote>
<div><p>以下に自動生成されるCSSファイルの生成イメージを示す。</p>
<img alt="../../../_images/build_css_gen.png" src="../../../_images/build_css_gen.png" />
</div></blockquote>
<p><strong>CSSのモードについて</strong></p>
<blockquote>
<div><p>ファイル展開設定ファイルの&#8221;cssMode&#8221;で指定されたCSS表示モードのみが生成対象となる。
（表示モードおよびlessファイルの内容については <a class="reference internal" href="internals/css_framework.html"><em>CSSフレームワーク</em></a> 参照）</p>
<div class="line-block">
<div class="line">プラグインに含まれるlessファイルをインポートした <a class="reference internal" href="#lessimport-less"><span>lessインポート定義ファイル</span></a> を参照し、各cssファイルを作成する。</div>
<div class="line">例えば&#8221;cssMode&#8221;で[&#8220;wide&#8221;, &#8220;compact&#8221;, &#8220;narrow&#8221;]を指定した場合、以下のファイルが生成される。</div>
</div>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>css/
 └── built/
      ├── wide-minify.css
      ├── compact-minify.css
      └── narrow-minify.css
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="javascript">
<span id="generate-javascript"></span><h3>2.1.4.5.2. JavaScriptの自動生成<a class="headerlink" href="#javascript" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>JavaScript自動生成ファイル一覧</strong></p>
<blockquote>
<div><p>以下に自動生成されるJavaScriptファイルの一覧を示す。表の記述順にファイルが生成される。</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="27%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">生成先フォルダ</th>
<th class="head">生成ファイル</th>
<th class="head">元になるファイル</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>js/nablarch</td>
<td>ui.js</td>
<td>js/nablarch/ui配下のJavaScriptファイル。</td>
</tr>
<tr class="row-odd"><td>js</td>
<td>nablarch-minify.js</td>
<td>業務画面から参照されるJavaScriptファイル。</td>
</tr>
<tr class="row-even"><td>js/build</td>
<td>devtool_conf.js</td>
<td>autoconf.jsで検出されたJavaScriptファイル。</td>
</tr>
<tr class="row-odd"><td>js</td>
<td>devtool.js</td>
<td>devtool_conf.jsで定義されたJavaScriptファイル。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>JavaScriptファイル生成イメージ</strong></p>
<blockquote>
<div><p>以下に自動生成されるJavaScriptファイルの生成イメージを示す。</p>
<img alt="../../../_images/build_js_gen.png" src="../../../_images/build_js_gen.png" />
</div></blockquote>
</div>
</div>
<div class="section" id="build-file">
<span id="id11"></span><h2>2.1.4.6. プラグイン、外部ライブラリの展開<a class="headerlink" href="#build-file" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本プラグインビルドコマンドではプラグインや外部ライブラリを各種設定ファイルの内容に基づきui_test、ui_demoなどの環境毎に展開する。</p>
<div class="section" id="id12">
<h3>2.1.4.6.1. プラグインの展開<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>参照設定ファイル</strong></p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a></li>
</ul>
</div></blockquote>
<p><strong>展開仕様</strong></p>
<blockquote>
<div><p>各プラグインに含まれるフォルダごとに以下のように展開する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">プラグイン内のフォルダ</th>
<th class="head">プロジェクト上の配布先</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ui_public</td>
<td>UIローカルデモ用プロジェクト, UI開発基盤テスト用プロジェクト, デプロイ対象プロジェクト</td>
</tr>
<tr class="row-odd"><td>ui_local</td>
<td>UIローカルデモ用プロジェクト, UI開発基盤テスト用プロジェクト</td>
</tr>
<tr class="row-even"><td>ui_test</td>
<td>UI開発基盤テスト用プロジェクト</td>
</tr>
</tbody>
</table>
<p>ただし、各プラグインに含まれるlessファイルは展開されず、自動生成された*-minify.cssファイルのみ展開される。
自動生成ファイルについては <a class="reference internal" href="#generate-file"><span>ファイルの自動生成</span></a> を参照。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p>プラグイン間で同一の展開先となるファイルを検出した場合、重複ファイルとして下記フォーマットでコマンド終了時に該当ファイルの一覧が表示される。</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre><span></span>duplicate file detected!!
{
  &quot;&lt;展開先ファイル名&gt;&quot;: [
    &quot;&lt;プラグイン1&gt;&quot;,
    &quot;&lt;プラグイン2&gt;&quot;,
      :
    &quot;&lt;プラグインn&gt;
  ]
}
</pre></div>
</div>
</div></blockquote>
<p class="last">各ファイルの最後に表示されたプラグインに含まれるファイルが適用されている。
問題がある場合は <a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> を見直し反映順序を制御するか、プラグイン内のファイル構成を見直す必要がある。</p>
</div>
</div></blockquote>
</div>
<div class="section" id="id13">
<h3>2.1.4.6.2. 外部ライブラリの展開<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>参照設定ファイル</strong></p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a></li>
</ul>
</div></blockquote>
<p><strong>展開仕様</strong></p>
<blockquote>
<div><a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> に定義されている&#8221;libraryDeployMappings&#8221;の内容に従い、
ライブラリ内の必要なファイルのみを配布する。
&#8220;libraryDeployMappings&#8221;の内容については <a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> を参照。</div></blockquote>
</div>
</div>
<div class="section" id="build-command">
<span id="id14"></span><h2>2.1.4.7. ビルドコマンド<a class="headerlink" href="#build-command" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>プラグインビルドコマンド用のコマンドとして以下のコマンドが提供されている。</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="16%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">コマンド名</th>
<th class="head">Windows用実行ファイル名</th>
<th class="head">概要</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#install"><span>インストールコマンド</span></a></td>
<td>install.bat</td>
<td>Nablarch提供プラグインおよび外部ライブラリをプロジェクトフォルダ配下に取り込む。</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ui-build"><span>UIビルドコマンド</span></a></td>
<td>ui_build.bat</td>
<td>Nablarch提供プラグイン、プロジェクト開発プラグインおよび外部ライブラリをプロジェクトフォルダ内の各フォルダに展開する。<br />
同時に各環境固有の自動生成ファイルを生成する。</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ui-genless"><span>lessインポート定義雛形生成コマンド</span></a></td>
<td>ui_genless.bat</td>
<td>各表示モード毎のlessインポート定義ファイルの雛形を作成する。</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#localserver"><span>ローカル動作確認用サーバ起動コマンド</span></a></td>
<td>ローカル画面確認.bat</td>
<td>ローカル動作確認用のサーバを起動する。</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ui-demo"><span>サーバ動作確認用サーバ起動コマンド</span></a></td>
<td>サーバ動作確認.bat</td>
<td>サーバ動作確認用のサーバを起動する。</td>
</tr>
</tbody>
</table>
<p>それぞれのコマンドについて詳細を示す。</p>
<div class="section" id="install">
<span id="id15"></span><h3>2.1.4.7.1. インストールコマンド<a class="headerlink" href="#install" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>実行ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="15%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置プロジェクト</th>
<th class="head">配置フォルダ</th>
<th class="head">Windows用実行ファイル名</th>
<th class="head">Linux用実行ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>nablarch_plugins_bundle</td>
<td>/bin</td>
<td>install.bat</td>
<td>install.sh</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>設定項目</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="6%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_ROOT</td>
<td>必須</td>
<td>インストール先業務プロジェクトのルートフォルダを指定する。<br />
本書の例ではweb_projectにあたる。</td>
</tr>
<tr class="row-odd"><td>UI_PLUGINS_DIRS</td>
<td>任意</td>
<td>プラグインのインストール先をプロジェクトルートフォルダからの相対パスで指定する。<br />
複数存在する場合はカンマ区切りで指定する。<br />
省略した場合&#8221;ui_plugins&#8221;となる。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>処理内容詳細</strong></p>
<blockquote>
<div><p>Nablarch提供プラグインおよび外部ライブラリを以下の手順でプロジェクトフォルダ配下に取り込む。</p>
<ul>
<li><div class="first line-block">
<div class="line">配布先プロジェクトのpackage.jsonとlastInstallPackage.jsonを比較し、不要となったパッケージを削除する。</div>
<div class="line">また、配布先プロジェクトに登録されているキャッシュ情報を削除する。</div>
</div>
</li>
<li><div class="first line-block">
<div class="line">配布先プロジェクトにキャッシュとして全てのプラグインを登録する。</div>
<div class="line">また、ローカルのレジストリサーバを起動し、配布先プロジェクトのpackage.jsonに定義されている
&#8220;dependencies&#8221;および&#8221;devDependencies&#8221;の内容に従い、必要なパッケージをインストールする。</div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">install.batを利用して、変更管理済みのpluginを削除するとIDE上からコミットできないことがある。
その場合、別のクライアントを利用してコミットすること。</p>
</div>
<img alt="../../../_images/build_install.png" src="../../../_images/build_install.png" />
</div></blockquote>
</div>
<div class="section" id="ui">
<span id="ui-build"></span><h3>2.1.4.7.2. UIビルドコマンド<a class="headerlink" href="#ui" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>実行ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="26%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置プロジェクト</th>
<th class="head">配置フォルダ</th>
<th class="head">Windows用実行ファイル名</th>
<th class="head">Linux用実行ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>業務プロジェクト(web_project)</td>
<td>/ui_plugins/bin</td>
<td>ui_build.bat</td>
<td>ui_build.sh</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>設定項目</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="6%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_CONF</td>
<td>必須</td>
<td>使用するファイル展開設定ファイルのパスを指定する。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>処理内容詳細</strong></p>
<blockquote>
<div><p>配布されたプラグインおよびプロジェクト開発プラグインを、以下の手順でプロジェクトフォルダ内の各フォルダに展開および自動生成する。</p>
<ul class="simple">
<li>前回ビルドファイルの削除</li>
<li>Nablarch提供プラグインの展開</li>
<li>外部ライブラリの展開</li>
<li>JavaScriptの自動生成</li>
<li>CSSの自動生成</li>
<li>ドキュメントの生成</li>
<li>画像ファイルのコピー</li>
<li>重複ファイルの表示</li>
</ul>
<img alt="../../../_images/build_ui_build.png" src="../../../_images/build_ui_build.png" />
</div></blockquote>
</div>
<div class="section" id="ui-genless">
<span id="id16"></span><h3>2.1.4.7.3. lessインポート定義雛形生成コマンド<a class="headerlink" href="#ui-genless" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>実行ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="26%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置プロジェクト</th>
<th class="head">配置フォルダ</th>
<th class="head">Windows用実行ファイル名</th>
<th class="head">Linux用実行ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>業務プロジェクト(web_project)</td>
<td>/ui_plugins/bin</td>
<td>ui_genless.bat</td>
<td>ui_genless.sh</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>設定項目</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="6%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">環境変数名</th>
<th class="head">必須</th>
<th class="head">設定内容</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PROJECT_CONF</td>
<td>必須</td>
<td>使用するファイル展開設定ファイルのパスを指定する。</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>処理内容詳細</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">配布されたプラグインおよびプロジェクト開発プラグインからlessファイルを抽出し、lessインポート定義ファイルの雛形を自動生成する。</div>
<div class="line">lessファイルはインポートする順序が大きな意味を持つため、作成された雛形を適宜修正する必要がある。</div>
</div>
<p>インポート定義は以下の順でソートされる。</p>
<ul class="simple">
<li>nablarch-css-core/**/reset.less</li>
<li>nablarch-css-core/**/*.less</li>
<li>nablarch-css-*/**/*.less</li>
<li>(プラグイングループ)-base/**/*.less</li>
<li>(プラグイングループ)-base/**/*-(表示モード).less</li>
<li>(プラグイングループ)-*/**/*.less</li>
<li>(プラグイングループ)-*/**/*-(表示モード).less</li>
</ul>
<div class="line-block">
<div class="line">プラグイングループはプラグイン名の最後のハイフンより前でグルーピングされたものである。</div>
<div class="line">例えば、nablarch-widget-box-base, nablarch-widget-box-content, nablarch-widget-box-imgはnablarch-widget-boxとして同一のグループとみなされる。</div>
<div class="line">また、nablarch-css-*以外の各プラグインは <a class="reference internal" href="#pjconf-json"><span>ビルドコマンド用設定ファイル</span></a> のpluginsで指定された順序でソートされる。</div>
</div>
</div></blockquote>
</div>
<div class="section" id="localserver">
<span id="id17"></span><h3>2.1.4.7.4. ローカル動作確認用サーバ起動コマンド<a class="headerlink" href="#localserver" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>実行ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="26%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置プロジェクト</th>
<th class="head">配置フォルダ</th>
<th class="head">Windows用実行ファイル名</th>
<th class="head">Linux用実行ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>業務プロジェクト(web_project     )</td>
<td>/ui_test <br />
/ui_demo</td>
<td>ローカル画面確認.bat</td>
<td>localServer.sh</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>処理内容詳細</strong></p>
<blockquote>
<div>ローカル動作確認用のサーバを起動する。</div></blockquote>
</div>
<div class="section" id="ui-demo">
<span id="id18"></span><h3>2.1.4.7.5. サーバ動作確認用サーバ起動コマンド<a class="headerlink" href="#ui-demo" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>実行ファイル</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="26%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">配置プロジェクト</th>
<th class="head">配置フォルダ</th>
<th class="head">Windows用実行ファイル名</th>
<th class="head">Linux用実行ファイル名</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>業務プロジェクト(web_project)</td>
<td>/ui_test</td>
<td>サーバ動作確認.bat</td>
<td>uiTestServer.sh</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>処理内容詳細</strong></p>
<blockquote>
<div>サーバ動作確認用のサーバを起動する。</div></blockquote>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'5u20',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/custom.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>