<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>nablarch-dev-ui_demo-core-lib\ui_local\js\jsp\el.js - Nablarch JavaScript Widget</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Nablarch JavaScript Widget"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/jQuery.html">jQuery</a></li>
            
                <li><a href="../classes/jsp.html">jsp</a></li>
            
                <li><a href="../classes/jsp.taglib.box.html">jsp.taglib.box</a></li>
            
                <li><a href="../classes/jsp.taglib.button.html">jsp.taglib.button</a></li>
            
                <li><a href="../classes/jsp.taglib.column.html">jsp.taglib.column</a></li>
            
                <li><a href="../classes/jsp.taglib.device.html">jsp.taglib.device</a></li>
            
                <li><a href="../classes/jsp.taglib.function.html">jsp.taglib.function</a></li>
            
                <li><a href="../classes/jsp.taglib.html.html">jsp.taglib.html</a></li>
            
                <li><a href="../classes/jsp.taglib.jsp.html">jsp.taglib.jsp</a></li>
            
                <li><a href="../classes/jsp.taglib.jstl.html">jsp.taglib.jstl</a></li>
            
                <li><a href="../classes/jsp.taglib.layout.html">jsp.taglib.layout</a></li>
            
                <li><a href="../classes/jsp.taglib.listsearchresult.html">jsp.taglib.listsearchresult</a></li>
            
                <li><a href="../classes/jsp.taglib.nablarch.html">jsp.taglib.nablarch</a></li>
            
                <li><a href="../classes/jsp.taglib.tab.html">jsp.taglib.tab</a></li>
            
                <li><a href="../classes/jsp.taglib.table.html">jsp.taglib.table</a></li>
            
                <li><a href="../classes/jsp.taglib.template.html">jsp.taglib.template</a></li>
            
                <li><a href="../classes/nablarch.ui.html">nablarch.ui</a></li>
            
                <li><a href="../classes/nablarch.ui.AutoSpan.html">nablarch.ui.AutoSpan</a></li>
            
                <li><a href="../classes/nablarch.ui.AutoSum.html">nablarch.ui.AutoSum</a></li>
            
                <li><a href="../classes/nablarch.ui.Collapsible.html">nablarch.ui.Collapsible</a></li>
            
                <li><a href="../classes/nablarch.ui.ContextMenu.html">nablarch.ui.ContextMenu</a></li>
            
                <li><a href="../classes/nablarch.ui.DatePicker.html">nablarch.ui.DatePicker</a></li>
            
                <li><a href="../classes/nablarch.ui.event.AjaxAction.html">nablarch.ui.event.AjaxAction</a></li>
            
                <li><a href="../classes/nablarch.ui.event.Listener.html">nablarch.ui.event.Listener</a></li>
            
                <li><a href="../classes/nablarch.ui.event.ShowDialog.html">nablarch.ui.event.ShowDialog</a></li>
            
                <li><a href="../classes/nablarch.ui.event.SubWindowListener.html">nablarch.ui.event.SubWindowListener</a></li>
            
                <li><a href="../classes/nablarch.ui.event.ToggleAction.html">nablarch.ui.event.ToggleAction</a></li>
            
                <li><a href="../classes/nablarch.ui.event.WindowClose.html">nablarch.ui.event.WindowClose</a></li>
            
                <li><a href="../classes/nablarch.ui.event.WriteAction.html">nablarch.ui.event.WriteAction</a></li>
            
                <li><a href="../classes/nablarch.ui.LightBox.html">nablarch.ui.LightBox</a></li>
            
                <li><a href="../classes/nablarch.ui.ListBuilder.html">nablarch.ui.ListBuilder</a></li>
            
                <li><a href="../classes/nablarch.ui.selector.html">nablarch.ui.selector</a></li>
            
                <li><a href="../classes/nablarch.ui.SlideMenu.html">nablarch.ui.SlideMenu</a></li>
            
                <li><a href="../classes/nablarch.ui.Tab.html">nablarch.ui.Tab</a></li>
            
                <li><a href="../classes/nablarch.ui.TabindexOrder.html">nablarch.ui.TabindexOrder</a></li>
            
                <li><a href="../classes/nablarch.ui.TabLink.html">nablarch.ui.TabLink</a></li>
            
                <li><a href="../classes/nablarch.ui.ToggleCheckbox.html">nablarch.ui.ToggleCheckbox</a></li>
            
                <li><a href="../classes/nablarch.ui.Tooltip.html">nablarch.ui.Tooltip</a></li>
            
                <li><a href="../classes/nablarch.ui.TreeList.html">nablarch.ui.TreeList</a></li>
            
                <li><a href="../classes/nablarch.ui.TreeMenu.html">nablarch.ui.TreeMenu</a></li>
            
                <li><a href="../classes/nablarch.ui.Widget.html">nablarch.ui.Widget</a></li>
            
                <li><a href="../classes/nablarch.util.BigDecimal.html">nablarch.util.BigDecimal</a></li>
            
                <li><a href="../classes/nablarch.util.BigDecimal.NaN.html">nablarch.util.BigDecimal.NaN</a></li>
            
                <li><a href="../classes/nablarch.util.Consumer.html">nablarch.util.Consumer</a></li>
            
                <li><a href="../classes/nablarch.util.DateUtil.html">nablarch.util.DateUtil</a></li>
            
                <li><a href="../classes/nablarch.util.SimpleDateFormat.html">nablarch.util.SimpleDateFormat</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/devtool.html">devtool</a></li>
            
                <li><a href="../modules/jsp.html">jsp</a></li>
            
                <li><a href="../modules/jsp.taglib.html">jsp.taglib</a></li>
            
                <li><a href="../modules/nablarch.ui.html">nablarch.ui</a></li>
            
                <li><a href="../modules/nablarch.ui.device.html">nablarch.ui.device</a></li>
            
                <li><a href="../modules/nablarch.util.html">nablarch.util</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: nablarch-dev-ui_demo-core-lib\ui_local\js\jsp\el.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module jsp
 * @author Iwauo Tajima
 */
define([&#x27;nablarch/util/Consumer&#x27;, &#x27;jsp/taglib/function&#x27;, &#x27;sugar&#x27;],
function(Consumer, jstlFunctions) { &#x27;use strict&#x27;;
  var identifireFragment = &quot;[_$a-zA-Z][_0-9a-zA-Z]*&quot;;

  return el_interpolate;

  /**
   * EL式の簡易パーサー
   *
   * 渡された文字列について、文字列中の &#x60;${...}&#x60; 形式で埋め込まれたel式を
   * 展開した結果の文字列を返す。
   *
   * @method el
   * @for jsp
   * @static
   * @param {String} str 評価対象文字列
   * @param {Object} [context] コンテキスト変数を格納したオブジェクト
   * @return {String} 評価結果文字列
   */
  function el_interpolate(str, context) {
    var m = /^\$\{([^}]*)\}$/.exec(str)
      , v;

    if (m) {
      v = el_eval(m[1], context);
    }
    else {
      v = str.replace(/\$\{([^}]*)\}/g, function(_, expr) {
        var v = el_eval(expr, context);
        return (typeof v === &#x27;undefined&#x27; || v === null) ? &#x27;&#x27;
             : (v === false)                            ? &#x27;false&#x27;
                                                        : v;
      });
    }
    return v;
  }

  /**
   * EL式を評価する。
   */
  function el_eval(expr, context) {
    var c = new Consumer(expr)
      , v;
    c.data = context;
    v = expression(c);
    return v[0];
  }

  /**
   * 式
   */
  function expression(c) {
    return c.once(ternaryExpression)
        || c.once(bareExpression);
  }

  function bareExpression(c) {
    return c.once(binaryExpresstion)
        || c.once(term);
  }

  /**
   * 2項演算式
   */
  function binaryExpresstion(c) {
    var op, v1, v2;
    return (v1 = term(c))
        &amp;&amp; (op = binaryOp(c))
        &amp;&amp; (v2 = term(c))
        &amp;&amp; op.fill(v1[0], v2[0]).call(c);
  }

  /**
   * 3項演算式
   */
  function ternaryExpression(c) {
    var cond, branch1, branch2;
    return (cond = bareExpression(c))
        &amp;&amp; c.consume(&#x27;\\?&#x27;)
        &amp;&amp; (branch1 = expression(c))
        &amp;&amp; c.consume(&#x27;\\:&#x27;)
        &amp;&amp; (branch2 = expression(c))
        &amp;&amp; !!cond[0] ? branch1 : branch2;
  }

  /**
   * 項
   */
  function term(c) {
    return c.once(expressionValue)
        || c.once(unaryExpression)
        || c.once(literal)
        || c.once(value);
  }

  /**
   * 単項演算
   */
  function unaryExpression(c) {
    var op, v;
    return (op = unaryOp(c))
        &amp;&amp; (v = term(c))
        &amp;&amp; op.fill(v[0]).call(c);
  }

  /**
   * 式を括弧でくくって項にする。
   */
  function expressionValue(c) {
    var v;
    return c.consume(&#x27;\\(&#x27;)
        &amp;&amp; (v = expression(c))
        &amp;&amp; c.consume(&#x27;\\)&#x27;)
        &amp;&amp; v;
  }

  /**
   * 単項演算子
   */
  function unaryOp(c) {
    return c.consume(&#x27;-&#x27;)     &amp;&amp; function(a) { return [-1 * a] }
        || c.consume(&#x27;!|not&#x27;) &amp;&amp; function(a) { return [!a]     }
        || c.consume(&#x27;empty&#x27;) &amp;&amp; function(a) {
             return (a &amp;&amp; a.hasOwnProperty(&#x27;length&#x27;)) ? [a.length == 0]
                                                      : [!a];
           };
  }

  /**
   * 2項演算子
   */
  function binaryOp(c) {
    return c.consume(&#x27;\\&amp;\\&amp;|and&#x27;) &amp;&amp; function(a,b) { return [a &amp;&amp; b] }
        || c.consume(&#x27;\\|\\||or&#x27;)  &amp;&amp; function(a,b) { return [a || b] }
        || c.consume(&#x27;\\+&#x27;)        &amp;&amp; function(a,b) { return [a + b]  }
        || c.consume(&#x27;\\-&#x27;)        &amp;&amp; function(a,b) { return [a - b]  }
        || c.consume(&#x27;\\*&#x27;)        &amp;&amp; function(a,b) { return [a * b]  }
        || c.consume(&#x27;\\/|div&#x27;)    &amp;&amp; function(a,b) { return [a / b]  }
        || c.consume(&#x27;%|mod&#x27;)      &amp;&amp; function(a,b) { return [a % b]  }
        || c.consume(&#x27;&gt;|gt&#x27;)       &amp;&amp; function(a,b) { return [a &gt; b]  }
        || c.consume(&#x27;&lt;|lt&#x27;)       &amp;&amp; function(a,b) { return [a &lt; b]  }
        || c.consume(&#x27;&gt;=|ge&#x27;)      &amp;&amp; function(a,b) { return [a &gt;= b] }
        || c.consume(&#x27;&lt;=|le&#x27;)      &amp;&amp; function(a,b) { return [a &lt;= b] }
        || c.consume(&#x27;==|eq&#x27;)      &amp;&amp; function(a,b) { return [a == b] }
        || c.consume(&#x27;!=|ne&#x27;)      &amp;&amp; function(a,b) { return [a != b] };
  }

  /**
   * 変数
   */
  function value(c) {
    var key, val;
    return (val = c.once(functionInvocation)) &amp;&amp; val
        || (key = c.once(identifier))         &amp;&amp; resolve(c, key);
  }

  /**
   * 識別子
   */
  function identifier(c) {
    var m;
    return !reserved(c)
        &amp;&amp; (m = c.consume(identifireFragment + &#x27;(\\.&#x27; + identifireFragment + &#x27;)*&#x27;))
        &amp;&amp; m[0].trim();
  }

  /**
   * 関数呼び出し
   */
  function functionInvocation(c) {
    var m, fname, args, func;
    return !reserved(c)
        &amp;&amp; (m = c.consume(identifireFragment + &#x27;\\:(&#x27; + identifireFragment + &#x27;)\\(&#x27;))
        &amp;&amp; (fname = m[1])
        &amp;&amp; (args = functionArguments(c))
        &amp;&amp; c.consume(&#x27;\\)&#x27;)
        &amp;&amp; (func = jstlFunctions[fname])
        &amp;&amp; [func.apply(c, args)];
  }

  function functionArguments(c) {
    var args = []
      , arg  = c.once(expression);
    if (!arg) {
      return [];
    }
    args = c.some(additionalArg);
    if (args) {
      args.unshift(arg[0]);
    }
    else {
      args = [arg[0]];
    }
    return args;
  }

  function additionalArg(c) {
    var arg;
    return c.consume(&#x27;,&#x27;)
        &amp;&amp; (arg = expression(c))
        &amp;&amp; arg[0];
  }

  /**
   * 予約語
   */
  function reserved(c) {
    return c.consume([
      &#x27;and&#x27;, &#x27;or&#x27;, &#x27;not&#x27;, &#x27;eq&#x27;, &#x27;ne&#x27;, &#x27;lt&#x27;, &#x27;gt&#x27;, &#x27;le&#x27;, &#x27;ge&#x27;
    , &#x27;true&#x27;, &#x27;false&#x27;, &#x27;null&#x27;, &#x27;instanceof&#x27;, &#x27;empty&#x27;, &#x27;mod&#x27;
    ].join(&#x27; |&#x27;));
  }

  /**
   * コンテキスト変数の値解決を行う。
   */
  function resolve(c, key) {
    var value = c.data.getVar(key);
    return [value];
  }

  /**
   * リテラル値
   */
  function literal(c) {
    return c.once(booleanLiteral)
        || c.once(numberLiteral)
        || c.once(stringLiteral)
        || c.once(nullLiteral);
  }

  /**
   * 真偽値リテラル
   */
  function booleanLiteral(c)  {
    return c.consume(&#x27;true&#x27;)  &amp;&amp; [true]
        || c.consume(&#x27;false&#x27;) &amp;&amp; [false];
  }

  /**
   * 数値リテラル
   */
  function numberLiteral(c) {
    var m;
    return (m = c.consume(&#x27;[0-9]+(\\.[0-9]+)?([eE][-+]?[0-9]+)?&#x27;)) &amp;&amp; [Number(m[0])];
  }

  /**
   * 文字列リテラル
   */
  function stringLiteral(c) {
    var m;
    // IE8 bug. Two RegExp bugs in Internet Explorer 8
    // http://blogs.perl.org/users/mauke/2010/11/two-regexp-bugs-in-internet-explorer-8.html
    return (m = c.consume(&#x27;\&quot;([^\&quot;]*)\&quot;&#x27;)) &amp;&amp; [m[1]]
        || (m = c.consume(&quot;\&#x27;([^\&#x27;]*)\&#x27;&quot;)) &amp;&amp; [m[1]];
  }

  /**
   * nullリテラル
   */
  function nullLiteral(c) {
    return c.consume(&#x27;null&#x27;) &amp;&amp; [null];
  }
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
