<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js\nablarch\ui\Placeholder.js - Nablarch JavaScript Widget</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Nablarch JavaScript Widget"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/jQuery.html">jQuery</a></li>
            
                <li><a href="../classes/nablarch.ui.html">nablarch.ui</a></li>
            
                <li><a href="../classes/nablarch.ui.AutoSpan.html">nablarch.ui.AutoSpan</a></li>
            
                <li><a href="../classes/nablarch.ui.AutoSum.html">nablarch.ui.AutoSum</a></li>
            
                <li><a href="../classes/nablarch.ui.Collapsible.html">nablarch.ui.Collapsible</a></li>
            
                <li><a href="../classes/nablarch.ui.ContextMenu.html">nablarch.ui.ContextMenu</a></li>
            
                <li><a href="../classes/nablarch.ui.DatePicker.html">nablarch.ui.DatePicker</a></li>
            
                <li><a href="../classes/nablarch.ui.event.AjaxAction.html">nablarch.ui.event.AjaxAction</a></li>
            
                <li><a href="../classes/nablarch.ui.event.Listener.html">nablarch.ui.event.Listener</a></li>
            
                <li><a href="../classes/nablarch.ui.event.ShowDialog.html">nablarch.ui.event.ShowDialog</a></li>
            
                <li><a href="../classes/nablarch.ui.event.SubWindowListener.html">nablarch.ui.event.SubWindowListener</a></li>
            
                <li><a href="../classes/nablarch.ui.event.ToggleAction.html">nablarch.ui.event.ToggleAction</a></li>
            
                <li><a href="../classes/nablarch.ui.event.WindowClose.html">nablarch.ui.event.WindowClose</a></li>
            
                <li><a href="../classes/nablarch.ui.event.WriteAction.html">nablarch.ui.event.WriteAction</a></li>
            
                <li><a href="../classes/nablarch.ui.LightBox.html">nablarch.ui.LightBox</a></li>
            
                <li><a href="../classes/nablarch.ui.ListBuilder.html">nablarch.ui.ListBuilder</a></li>
            
                <li><a href="../classes/nablarch.ui.selector.html">nablarch.ui.selector</a></li>
            
                <li><a href="../classes/nablarch.ui.Tab.html">nablarch.ui.Tab</a></li>
            
                <li><a href="../classes/nablarch.ui.TabindexOrder.html">nablarch.ui.TabindexOrder</a></li>
            
                <li><a href="../classes/nablarch.ui.TabLink.html">nablarch.ui.TabLink</a></li>
            
                <li><a href="../classes/nablarch.ui.ToggleCheckbox.html">nablarch.ui.ToggleCheckbox</a></li>
            
                <li><a href="../classes/nablarch.ui.Tooltip.html">nablarch.ui.Tooltip</a></li>
            
                <li><a href="../classes/nablarch.ui.TreeList.html">nablarch.ui.TreeList</a></li>
            
                <li><a href="../classes/nablarch.ui.TreeMenu.html">nablarch.ui.TreeMenu</a></li>
            
                <li><a href="../classes/nablarch.ui.Widget.html">nablarch.ui.Widget</a></li>
            
                <li><a href="../classes/nablarch.util.BigDecimal.html">nablarch.util.BigDecimal</a></li>
            
                <li><a href="../classes/nablarch.util.BigDecimal.NaN.html">nablarch.util.BigDecimal.NaN</a></li>
            
                <li><a href="../classes/nablarch.util.Consumer.html">nablarch.util.Consumer</a></li>
            
                <li><a href="../classes/nablarch.util.DateUtil.html">nablarch.util.DateUtil</a></li>
            
                <li><a href="../classes/nablarch.util.SimpleDateFormat.html">nablarch.util.SimpleDateFormat</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/devtool.html">devtool</a></li>
            
                <li><a href="../modules/nablarch.ui.html">nablarch.ui</a></li>
            
                <li><a href="../modules/nablarch.util.html">nablarch.util</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js\nablarch\ui\Placeholder.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * IEなどのネイティブでplaceholder属性をサポートしていないブラウザでプレースホルダを表示するUI部品。
 *
 * ネイティブでplaceholder属性をサポートしているブラウザの場合は何も処理しない。
 *
 * @author Kiyohito Itoh
 * @since  1.2
 */
define([&quot;jquery&quot;
      , &quot;nablarch/ui/Widget&quot;
      , &quot;nablarch/ui/event&quot;
      , &quot;sugar&quot;],
function($, Widget) { &quot;use strict&quot;;

  // placeholder属性をサポートしているブラウザの場合はすぐにリターン。
  if (&quot;placeholder&quot; in document.createElement(&quot;input&quot;)) {
    return {};
  }

  /**
   * モジュール定義。
   *
   * 入力値の取得と設定でプレースホルダに対応するため、jQueryの$.val()をオーバーライドする。
   *
   * $.val()
   *   プレースホルダが表示されている場合は、空文字を返す。
   *   プレースホルダが表示されていない場合は、jQueryの$.val()を呼び出す。
   *
   * $.val(value)
   *   プレースホルダが表示されている場合、プレースホルダ用のCSSクラスを削除し、
   *   jQueryの$.val(value)を呼び出す。
   *   プレースホルダが表示されていない場合は、jQueryの$.val(value)を呼び出す。
   */
  function define() {
    
    $.fn.originalVal = $.fn.val;
    $.fn.val = function Placeholder_jQuery_val(value) {

      var $this = $(this)
        , placeholder = $this.attr(&quot;placeholder&quot;)
        , originalValResult = value !== undefined ? $this.originalVal(value) : $this.originalVal();

      if (!placeholder) {
        // placeholder属性が設定されていない場合
        return originalValResult;
      }

      if (value !== undefined) {
        // $.val(value)呼び出しの場合
        $this.removeClass(Placeholder.className);
        if (value === &quot;&quot;) {
          // 設定された値が空文字列の場合には、placeholder属性の値をvalue属性に設定し、
          // Placeholder用クラス属性を追加する。
          $this.originalVal(placeholder).addClass(Placeholder.className);
        }
        return originalValResult;
      } else {
        return $this.hasClass(Placeholder.className) &amp;&amp; placeholder === originalValResult ? &quot;&quot; : originalValResult;
      }
    };

    return Placeholder;
  }

  Placeholder.prototype = Object.merge(new Widget(), {
    show: Placeholder_show
  , hide: Placeholder_hide
  });

  Placeholder.event = {
    &quot;$node focusin&quot; : &quot;hide&quot;
  , &quot;$node focusout&quot; : &quot;show&quot;
  , &quot;document beforeSubmit&quot; : &quot;hide&quot;
  , &quot;document afterSubmit&quot; : &quot;show&quot;
  };
  
  Placeholder.widgetType = &quot;nablarch_Placeholder&quot;;
  
  /** プレースホルダ用のCSSクラス名 */
  Placeholder.className = &quot;nablarch_placeholder&quot;;

  Placeholder.selector = &quot;:text[placeholder],textarea[placeholder]&quot;;
  
  Widget.register(Placeholder);
  
  /**
   * コンストラクタ。
   * @param element placeholder属性が指定されたDOMノード
   * @param option オプション(未使用)
   * @returns {Placeholder}
   */
  function Placeholder(element, option) {
    this.constructor = Placeholder;
    Widget.call(this, element);
    this.show();
  }

  /**
   * プレースホルダを表示する。
   *
   * 対象ノードのplaceholder属性の値が空でなく、入力値が空の場合のみプレースホルダを表示する。
   * プレースホルダ表示時にはプレースホルダ用のCSSクラスを追加する。
   *
   * @param event {jQuery.Event} イベント
   */
  function Placeholder_show(event) {
    var placeholder = this.$node.attr(&quot;placeholder&quot;);
    if (placeholder &amp;&amp; !this.$node.val()) {
      this.$node.originalVal(placeholder).addClass(Placeholder.className);
    }
  }

  /**
   * プレースホルダを消去する。
   *
   * 対象ノードのplaceholder属性の値が空でなく、プレースホルダ用のCSSクラスが指定されている場合のみ
   * プレースホルダを消去する。
   * プレースホルダ消去時にはプレースホルダ用のCSSクラスを削除する。
   *
   * @param event {jQuery.Event} イベント
   */
  function Placeholder_hide(event) {
    var placeholder = this.$node.attr(&quot;placeholder&quot;);
    if (placeholder &amp;&amp; this.$node.is(&quot;.&quot; + Placeholder.className)) {
      this.$node.originalVal(&quot;&quot;).removeClass(Placeholder.className);
    }
  }

  return define();
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
