


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>9.2. How to Manage the Configuration Depending on the Processing Architecture and Environment &mdash; ∇Nablarch  5u19 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/application_framework/application_framework/setting_guide/ManagingEnvironmentalConfiguration/index.html" />
  
    <link rel="top" title="∇Nablarch  5u19 documentation" href="../../../../index.html"/>
        <link rel="up" title="9. Nablarch Application Framework Configuration Guide" href="../index.html"/>
        <link rel="next" title="10. Default Configuration List" href="../../configuration/index.html"/>
        <link rel="prev" title="9.1.4.3. Procedure to rename a table used by Nablarch framework" href="../CustomizingConfigurations/CustomizeSystemTableName.html"/>
 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 5u19</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_nablarch/index.html">What is the Nablarch?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/concept.html">Nablarch Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/mvn_module.html">Module List of Nablarch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/license.html">Information on Nablarch License</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Nablarch Application Framework</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Application Framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../nablarch/index.html">1. What is Nablarch Application Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../web/index.html">2. Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../web_service/index.html">3. Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../batch/index.html">4. Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../messaging/index.html">5. Messaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../handlers/index.html">6. Standard Handler Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../libraries/index.html">7. Libraries Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../blank_project/index.html">8. Blank Project</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">9. Nablarch Application Framework Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration/index.html">10. Default Configuration List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cloud_native/index.html">11. Nablarch Cloud Native Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../adaptors/index.html">Adaptor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/log_adaptor.html">log Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/router_adaptor.html">Routing Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/webspheremq_adaptor.html">IBM WebSphere MQ Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/jaxrs_adaptor.html">JAX-RS Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/doma_adaptor.html">Doma Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/jsr310_adaptor.html">JSR310(Date and Time API)Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarker Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/mail_sender_velocity_adaptor.html">E-mail Velocity Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/web_thymeleaf_adaptor.html">Web Application Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/lettuce_adaptor.html">Lettuce Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/slf4j_adaptor.html">SLF4J Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/micrometer_adaptor.html">Micrometer Adapter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../example/index.html#procedure-to-build-the-environment">Procedure to build the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../example/index.html#application-execution-procedure">Application execution procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extension_components/index.html">Nablarch extension component</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/report/index.html">1. Form library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/workflow/doc/index.html">2. Workflow library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/workflow/tool/index.html">3. Workflow definition data generation tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/etl/index.html">4. ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../extension_components/etl/etl_maven_plugin.html">5. ETL Maven plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_tools/index.html">Nablarch development tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html">1. Efficient Java Static Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html#conduct-syntax-check">1.1. Conduct syntax check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html#unify-the-format">1.2. Unify the format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html#check-if-unauthorized-apis-are-being-used">1.3. Check if unauthorized APIs are being used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/ui_dev/index.html">2. Front-end UI development platform for advanced users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/testing_framework/index.html">3. Testing framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/index.html">3.1. How to Execute Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/testing_framework/guide/development_guide/06_TestFWGuide/index.html">3.2. How to Use the Automated Test Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/testing_framework/guide/development_guide/08_TestTools/index.html">3.3. Tools Used in the Programming Phase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/toolbox/index.html">4. Useful Tools When Developing Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/toolbox/JspStaticAnalysis/index.html">4.1. JSP Static Analysis Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/toolbox/SqlExecutor/SqlExecutor.html">4.2. Nablarch SQL Executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/toolbox/JspVerifier/JspVerifier.html">4.3. Job Screen JSP Validation Tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">Nablarch Implementation Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/01/index.html">Sample Password Encryption Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/0101_PBKDF2PasswordEncryptor.html">Sample Password Encryption Function Using PBKDF2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/01/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/02/index.html">Extended Validation Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#email-address-validation">Email address validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#validation-of-japan-telephone-numbers">Validation of Japan telephone numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/02/index.html#code-value-validation">Code value validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/03/index.html">Display a List of Search Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#how-to-use">How to Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchinfo-class">ListSearchInfo class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#listsearchresult-tag">listSearchResult tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#sort-search-results">Sort search results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#how-to-implement-displaying-a-list-of-all-search-results-on-a-single-screen">How to implement displaying a list of all search results on a single screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#how-to-implement-the-initial-display-of-search-results-with-the-default-search-conditions">How to implement the initial display of search results with the default search conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#default-settings-for-the-search-result-list-display-function">Default settings for the search result list display function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#how-to-import-a-sample-implementation-tag-file-into-the-business-application">How to import a sample implementation (tag file) into the business application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/03/index.html#tag-reference">Tag Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/04/index.html">Extended Formatter Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/04/0401_ExtendedDataFormatter.html">Data Formatter Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/04/0402_ExtendedFieldType.html">Field Type Expansion in the Data Formatter Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/05/index.html">Sample File Management Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/05/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/06/index.html">CAPTCHA Function Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/06_Captcha_guide.html">How to Incorporate the CAPTCHA Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/06/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/07/index.html">Sample UserAgent Information Acquisition Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#description-of-configuration">Description of configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/07/index.html#use-case">Use case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/08/index.html">Sample of HTML Email Send Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/08/index.html#implementation-examples">Implementation examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/09/index.html">How to Use a Sample to Send a Digitally Signed Email Using Bouncycastle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#environment-preparation">Environment preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#structure-of-digitally-signed-email-send-function">Structure of digitally signed email send function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#preparation-of-configuration-file">Preparation of configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/09/index.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/10/index.html">How to Use the Log Aggregation Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/10/index.html#list-of-samples-provided">List of samples provided</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/11/index.html">Messaging Platform Test Simulator Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#uses">Uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#how-to-use">How to use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/11/index.html#expansion-example">Expansion example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nablarch_api/index.html">Nablarch API</a></li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Nablarch Application Framework</a> &raquo;</li>
      
          <li><a href="../../index.html">Application Framework</a> &raquo;</li>
      
          <li><a href="../index.html">9. Nablarch Application Framework Configuration Guide</a> &raquo;</li>
      
    <li>9.2. How to Manage the Configuration Depending on the Processing Architecture and Environment</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/index.html" class="ja">日本語</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-manage-the-configuration-depending-on-the-processing-architecture-and-environment">
<h1>9.2. How to Manage the Configuration Depending on the Processing Architecture and Environment<a class="headerlink" href="#how-to-manage-the-configuration-depending-on-the-processing-architecture-and-environment" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id3">Summary</a></li>
<li><a class="reference internal" href="#organize-application-configuration" id="id4">Organize application configuration</a><ul>
<li><a class="reference internal" href="#id1" id="id5">Organize application configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prerequisites-and-how-to-switch-application-configuration-files" id="id6">Prerequisites and how to switch application configuration files</a><ul>
<li><a class="reference internal" href="#prerequisites-for-switching-application-configuration-files" id="id7">Prerequisites for switching application configuration files</a></li>
<li><a class="reference internal" href="#how-to-switch-the-application-configuration" id="id8">How to switch the application configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-switch-components-in-each-environment-how-to-switch-to-mock" id="id9">How to switch components in each environment (how to switch to mock)</a><ul>
<li><a class="reference internal" href="#how-to-create-a-component-configuration-file-xml-file" id="id10">How to create a component configuration file (xml file)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-switch-the-environment-configuration-value-for-each-environment" id="id11">How to switch the environment configuration value for each environment</a></li>
<li><a class="reference internal" href="#how-to-increase-the-defined-environment" id="id12">How to increase the defined environment</a><ul>
<li><a class="reference internal" href="#define-profiles" id="id13">Define profiles</a></li>
<li><a class="reference internal" href="#adding-a-directory" id="id14">Adding a directory</a></li>
<li><a class="reference internal" href="#creation-and-modification-of-application-configuration-files" id="id15">Creation and modification of application configuration files</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id3">9.2.1. Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In many cases, a system is organized by multiple processing architectures,
and multiple environments (such as development environment, production environment) are used for developing and operating the system.
Therefore, multiple application configurations must be managed according to each processing architecture and environment.</p>
<p>This chapter describes how to manage the processing architectures and environment-dependent configurations in Nablarch.</p>
</div>
<div class="section" id="organize-application-configuration">
<h2><a class="toc-backref" href="#id4">9.2.2. Organize application configuration</a><a class="headerlink" href="#organize-application-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id5">9.2.2.1. Organize application configuration</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Nablarch recommends organizing the application configuration from two perspectives.</p>
<table border="1" class="colwidths-given white-space-normal docutils">
<colgroup>
<col width="15%" />
<col width="23%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Perspective</th>
<th class="head">Specific examples</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Processing architecture</td>
<td>Online, batch</td>
<td>The component definition and environment configuration values vary for different processing architectures.</td>
</tr>
<tr class="row-odd"><td>Environment</td>
<td>Development environment and production environment</td>
<td>Some of the component definitions need to be changed (such as mocks).</td>
</tr>
</tbody>
</table>
<p>The following figure shows the difference in configurations for each approach.</p>
<img alt="../../../../_images/method_and_staging.png" src="../../../../_images/method_and_staging.png" />
</div>
</div>
<div class="section" id="prerequisites-and-how-to-switch-application-configuration-files">
<h2><a class="toc-backref" href="#id6">9.2.3. Prerequisites and how to switch application configuration files</a><a class="headerlink" href="#prerequisites-and-how-to-switch-application-configuration-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisites-for-switching-application-configuration-files">
<h3><a class="toc-backref" href="#id7">9.2.3.1. Prerequisites for switching application configuration files</a><a class="headerlink" href="#prerequisites-for-switching-application-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Prepare the minimum application configuration files required for the combination of processing architecture and environment.</p>
<p>The directory structure concerning the application configuration files of the project immediately after it is generated from the archetype is shown below.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>web/batch
|
\---src
    +---env
    |   +---dev                   … development environment
    |   |   |
    |   |   \---env.properties    … Environment configuration file for development environment (properties)
    |   |
    |   \---prod                  … Production environment
    |       |
    |       \---env.properties    … Environment configuration file for production environment (properties)
    |
    +---main
    |   +---java
    |   |
    |   +---resources             … Resources that do not differ for each environment
    |       |
    |       \---common.properties … Environment-independent configuration files (properties)
    |
    \---test
        +---java
        |
        \---resources             … Unit test environment
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<ul class="last simple">
<li>The environment-independent environment configuration file (properties) is used in all environments.</li>
<li>If the environment is not sufficient, see <a class="reference internal" href="#how-to-add-profile"><span>How to increase the defined environment</span></a> below to add an environment.</li>
<li>When using a common project that is referenced from an execution-based project (such as web application, batch application), the application configuration files for each environment of the single common project are not required.</li>
</ul>
</div>
</div>
<div class="section" id="how-to-switch-the-application-configuration">
<h3><a class="toc-backref" href="#id8">9.2.3.2. How to switch the application configuration</a><a class="headerlink" href="#how-to-switch-the-application-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="when-the-application-server-is-launched-locally-and-when-the-deliverables-are-generated-when-war-and-jar-are-generated">
<h4>9.2.3.2.1. When the application server is launched locally and when the deliverables are generated (when war and jar are generated)<a class="headerlink" href="#when-the-application-server-is-launched-locally-and-when-the-deliverables-are-generated-when-war-and-jar-are-generated" title="Permalink to this headline">¶</a></h4>
<p>Application configuration files are switched
using the <a class="footnote-reference" href="#profile" id="id2">[1]</a> function of Apache Maven
(hereinafter referred to as Maven).</p>
<table class="docutils footnote" frame="void" id="profile" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>Profiles are initially defined in projects generated from the archetype. See <a class="reference internal" href="../../blank_project/MavenModuleStructures/index.html#mavenmodulestructuresprofileslist"><span>Profile list</span></a> for the defined profiles.</td></tr>
</tbody>
</table>
<p>The operation when built with Maven by specifying the production environment in the profile is shown below.</p>
<p><strong>[Build command example]</strong></p>
<div class="highlight-bat"><div class="highlight"><pre><span></span>mvn -P prod package -DskipTests=true
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>The options used in the above command are as follows:</p>
<ul class="last simple">
<li>-P … Specifies the profile</li>
<li>-DskipTests=true  … Specifies skipping the unit test</li>
</ul>
</div>
<p><strong>[Maven operation (application configuration switching part only)]</strong></p>
<img alt="../../../../_images/switch_application_settings.png" src="../../../../_images/switch_application_settings.png" />
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If the file name is duplicated in src/main/resources and the directory for each environment, the file in the directory for each environment is given priority.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">In the above figure, only the &#8220;component configuration file (xml)&#8221; and &#8220;environment configuration value definition file (properties file)&#8221; are described, but all the files under resources are copied.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>To confirm which environment the artifact was created for,
the target environment entry (<code class="docutils literal"><span class="pre">Target-Environment</span></code>) is added to <cite>META-INF/MANIFEST.MF</cite>.</p>
<p><strong>[Example of MANIFEST.MF when built by specifying the production environment]</strong></p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>Manifest-Version: 1.0
Built-By: tie301686
Build-Jdk: 1.7.0_60
Created-By: Apache Maven 3.2.3
Target-Environment: Production Environment
Archiver-Version: Plexus Archiver
</pre></div>
</div>
</div>
</div>
<div class="section" id="when-the-unit-test-is-run">
<h4>9.2.3.2.2. When the unit test is run<a class="headerlink" href="#when-the-unit-test-is-run" title="Permalink to this headline">¶</a></h4>
<p>When the unit test is run, the specified profile and the resources in <code class="docutils literal"><span class="pre">src/test/resources</span></code> are used.</p>
<p>If a profile is not specified explicitly, the dev profile is used by default.</p>
<p>An example of the command to run a unit test using the dev profile is shown below.</p>
<div class="highlight-bat"><div class="highlight"><pre><span></span>mvn test
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-switch-components-in-each-environment-how-to-switch-to-mock">
<span id="how-to-change-componet-define"></span><h2><a class="toc-backref" href="#id9">9.2.4. How to switch components in each environment (how to switch to mock)</a><a class="headerlink" href="#how-to-switch-components-in-each-environment-how-to-switch-to-mock" title="Permalink to this headline">¶</a></h2>
<p>This is achieved by switching the component configuration file (xml file).</p>
<div class="section" id="how-to-create-a-component-configuration-file-xml-file">
<h3><a class="toc-backref" href="#id10">9.2.4.1. How to create a component configuration file (xml file)</a><a class="headerlink" href="#how-to-create-a-component-configuration-file-xml-file" title="Permalink to this headline">¶</a></h3>
<p>First, create production component definitions for each processing architecture based on the default configuration values provided by Nablarch.</p>
<p>Next, create a component definition for each environment as a difference from production for those component definitions.</p>
<p>Place the created component configuration file in the directory of each environment, and replace it when building.</p>
</div>
</div>
<div class="section" id="how-to-switch-the-environment-configuration-value-for-each-environment">
<span id="how-to-switch-env-values"></span><h2><a class="toc-backref" href="#id11">9.2.5. How to switch the environment configuration value for each environment</a><a class="headerlink" href="#how-to-switch-the-environment-configuration-value-for-each-environment" title="Permalink to this headline">¶</a></h2>
<p>This is achieved by switching the environment configuration file (env.properties) placed in each environment.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<ul class="last simple">
<li>Configuration items that are unlikely to change in each environment are described in common.properties immediately after being generated from the archetype. <br />
To change the values described in common.properties for each environment, move (cut and paste) the items to env.properties.</li>
</ul>
</div>
</div>
<div class="section" id="how-to-increase-the-defined-environment">
<span id="how-to-add-profile"></span><h2><a class="toc-backref" href="#id12">9.2.6. How to increase the defined environment</a><a class="headerlink" href="#how-to-increase-the-defined-environment" title="Permalink to this headline">¶</a></h2>
<p>If the environment defined by default is insufficient, add an environment definition.</p>
<p>Additions can be made using the following methods</p>
<div class="section" id="define-profiles">
<span id="addprofile"></span><h3><a class="toc-backref" href="#id13">9.2.6.1. Define profiles</a><a class="headerlink" href="#define-profiles" title="Permalink to this headline">¶</a></h3>
<p>Add a profile definition in the profiles of pom.xml for the project of each processing architecture (such as web and batch).</p>
<p>Below, an integration test environment A has been added as an example.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;profiles&gt;</span>
  <span class="c">&lt;!-- Middle is omitted --&gt;</span>

  <span class="c">&lt;!-- Integration test environment A --&gt;</span>
  <span class="nt">&lt;profile&gt;</span>
    <span class="nt">&lt;id&gt;</span>integration-test-a<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
      <span class="nt">&lt;env.name&gt;</span>Integration test environment A<span class="nt">&lt;/env.name&gt;</span>
      <span class="nt">&lt;env.dir&gt;</span>ita<span class="nt">&lt;/env.dir&gt;</span>
      <span class="nt">&lt;env.classifier&gt;</span>ita<span class="nt">&lt;/env.classifier&gt;</span>
      <span class="nt">&lt;webxml.path&gt;</span>src/main/webapp/WEB-INF/web.xml<span class="nt">&lt;/webxml.path&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
  <span class="nt">&lt;/profile&gt;</span>

  <span class="c">&lt;!-- Middle is omitted --&gt;</span>
<span class="nt">&lt;/profiles&gt;</span>
</pre></div>
</div>
<p>The items are described below.</p>
<table border="1" class="colwidths-given white-space-normal docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Item</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>id</td>
<td>Profile ID specified when executing the maven command. Specify a profile that does not overlap with other profiles.</td>
</tr>
<tr class="row-odd"><td>env.name</td>
<td>The environment name to be included in the manifest of war and jar files. Give it an arbitrary name.</td>
</tr>
<tr class="row-even"><td>env.dir</td>
<td>The directory where the resource is stored.</td>
</tr>
<tr class="row-odd"><td>env.classifier</td>
<td>The identifier to be added to the end of the file name part of war and jar.Give it an arbitrary name with alphanumeric characters. <br />
The process of adding an identifier at the end of the file name is realized by configuring a value for the classifier property of the maven-war-plugin and maven-jar-plugin in pom.xml.</td>
</tr>
<tr class="row-even"><td>webxml.path</td>
<td>Specifies the web.xml to use. <br />
JNDI configuration must also be described in web.xml.Environmental differences may occur, and the web.xml to be used is configurable. <br />
If the path is the same as that for production and there is no problem, set &#8220;src/main/webapp/WEB-INF/web.xml&#8221; as in the example.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="adding-a-directory">
<h3><a class="toc-backref" href="#id14">9.2.6.2. Adding a directory</a><a class="headerlink" href="#adding-a-directory" title="Permalink to this headline">¶</a></h3>
<p>Add the directory specified in the profile definition.</p>
<p>In the case of the <a class="reference internal" href="#addprofile"><span>Define profiles</span></a> example, create &#8220;src/env/ita/resources/&#8221;.</p>
</div>
<div class="section" id="creation-and-modification-of-application-configuration-files">
<h3><a class="toc-backref" href="#id15">9.2.6.3. Creation and modification of application configuration files</a><a class="headerlink" href="#creation-and-modification-of-application-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Copy and modify the application configuration files of similar profiles.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2021, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'5u19',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>